O/=100;var e=(new Date).getTime();let u=(new Date).getTime(),N="http://www.w3.org/2000/svg",g=document.querySelector("#main-svg");let R=[1703167200,1718974800,1750510800,1845205200,2002971600,2318504400],v="https://eth-goerli.g.alchemy.com/v2/ZXbjH0LyjJq69t099ce8gRs494wOaqMq";function D(e){var t=e.slice(2),l=[];for(let e=0;e<t.length;e+=64){var o=t.slice(e,e+64),o=parseInt(o,16);l.push(o)}return l}function H(t){var l=[];for(let e=0;e<t.length;e+=2)l.push(t.slice(e,e+2));return l}function I(t,l){var e,o=[];let r=0;for(let e=0;e<l.length;e++){var a=l[e],n=t.slice(r,r+a);o.push(n),r+=a}return r<t.length&&(e=t.slice(r),o.push(e)),o}let J=Xe("number_of_colors");var m,t=Xe("color_names"),y=(console.log("Selected color names:",t),{goldenhour:{chance:.1,colors:["#ff1249;#6b6cff;#c80085;#ffe112;#ff1249","#6b6cff;#ff1249;#ffe112;#c80085;#6b6cff"]},dawn:{chance:.1,colors:["#ff4637;#83a9ff;#e91278;#fff149;#ff4637","#9ab0fe;#ff5252;#fffb57;#f23662;#9ab0fe"]},ibiza:{chance:.1,colors:["#b2004e;#573fcd;#990086;#ec7d1a;#b2004e","#442dbe;#c2045c;#d26b0a;#a80094;#442dbe"]},southbeach:{chance:.1,colors:["#f72585;#4cc9f0;#11a7d4;#fa6bab;#f72585","#4cc9f0;#f72585;#fa6bab;#11a7d4;#4cc9f0"]},mist:{chance:.1,colors:["#ff6494;#98e8ed;#ffe6ff;#80ffff;#ff6494","#9affff;#ff6277;#80ffff;#ffe6ff;#9affff"]},dusk:{chance:.1,colors:["#c4107c;#1d5fb6;#a50d68;#4d88ff;#c4107c","#5981d9;#f042aa;#2f62d0;#b40d85;#5981d9"]},platinum:{chance:.1,colors:["#080808;#828282;#d2d2d2;#202020;#7d7d7d;#080808","#efefef;#353535;#161616;#b2b2b2;#383838;#f5f5f5"]},palladium:{chance:.1,colors:["#f5f5f5;#808080;#666666;#f2f2f2;#787878;#f5f5f5","#4d4d4d;#949494;#ffffff;#595959;#939393;#4d4d4d"]},rhodium:{chance:.1,colors:["#000000;#4f4f4f;#818181;#000000;#515151;#000000","#929292;#000000;#0f0f0f;#898989;#000000;#929292"]},ipanema:{chance:.1,colors:["#a7c3ff;#ff0066;#ffa9bd;#ff0066;#a7c3ff","#ff9ea1;#0000ff;#68b6ff;#0000ff;#ff9ea1"]},malibu:{chance:.1,colors:["#c0d5ff;#ff6666;#ffe1db;#150070;#c0d5ff","#fee3dc;#ff66ff;#c9e9ff;#ff66ff;#fee3dc"]},night:{chance:.1,colors:["#0000ff;#000080;#ff2a5b;#000080;#0000ff","#dd3a3f;#03000f;#0062be;#03000f;#dd3a3f"]},maldives:{chance:.1,colors:["#ffff99;#ff668a;#ffff33;#ffe6f2;#ffff99","#ff668a;#ffff99;#ffe6f2;#ffff33;#ff668a"]},venicebeach:{chance:.1,colors:["#ff66ff;#ccffff;#ffbb33;#ffff66;#ff66ff;","#ffbb33;#ff66ff;#ffff66;#ccffff;#ffbb33"]},sunset:{chance:.1,colors:["#809fff;#ff4d4d;#4d79ff;#ff7733;#809fff","#ff5500;#809fff;#ff4d4d;#4d79ff;#ff5500"]},vegas:{chance:.1,colors:["#3366ff;#ff99ff;#ff0066;#ff8533;#3366ff","#ffccff;#ff0066;#000099;#3333ff;#ffccff"]},cannes:{chance:.1,colors:["#ffe112;#ff668a;#ffff80;#ff1a4f;#ffe112","#ff668a;#ffe112;#ff1a4f;#ffff80;#ff668a"]},special_sends:{chance:.1,colors:["#ffb380;#e60036;#ffcc00;#ff003c;#ffb380","#e60036;#ffb380;#cc0030;#ff6600;#e60036"]},special_sales:{chance:.1,colors:["#ffff33;#ff0066;#ffff00;#ff6600;#ffff33","#ff4d4d;#ffe112;#e6005c;#ff6666;#ff4d4d"]},special_approval:{chance:.1,colors:["#4d4dff;#98e8ed;#0039e6;#80ffff;#4d4dff","#ccffff;#b3f0ff;#80ffff;#3366ff;#ccffff"]}});let q=[];for(m of t)q.push(y[m]);console.log("Selected colors: ",t);let oe=[50,80],k=[];let z={increased:[7,3,1],decreased:[0,4,8],neutral:[6,2,10,5,9,11]},B=[11,11];let l=15,re=e,ae=5;let f=5e3;let ne=5e3,ie=1,se=80,ce=2,fe=3e3,ue=[.7,.8],de=1.3,G={royalty:[[-.4,-.3,-.1,0,.1,.3,.6],[-3,-2,-1,0,1,2,3]],contract_activity:[[-1,-.5,-.25,0,.25,.5,.75],[-3,-2,-1,0,1,2,3]],clustering_mode:[[-1,-.5,-.25,0,.25,.5,.75],[-3,-2,-1,0,1,2,3]],approvals:[[-1,-.5,-.25,0,.25,.5,.75],[-3,-2,-1,0,1,2,3]]},pe=1,_e=5,ge=[q[q.length-1]],U=3,he=0,me=["#ff944d;#e60036;#ff884d;#ff003c;#ff944d","#e60036;#ff944d;#cc0030;#ff6600;#e60036","#e60036;#ff944d;#cc0030;#ff6600;#e60036","#ff944d;#e60036;#ff884d;#ff003c;#ff944d"],ye=["#ffe112;#ff4d4d;#ffff66;#ff9933;#ffe112","#e67300;#ffe112;#e65c00;#ffff66;#e67300","#e67300;#ffe112;#e65c00;#ffff66;#e67300","#ffe112;#ff4d4d;#ffff66;#ff9933;#ffe112"],be=["#9affff;#4d4dff;#80ffff;#3366ff;#9affff","#4d4dff;#98e8ed;#3366ff;#80ffff;#4d4dff","#4d4dff;#98e8ed;#3366ff;#80ffff;#4d4dff","#9affff;#4d4dff;#80ffff;#3366ff;#9affff"],ve=["#ffff00;#ff0000;#ffff00;#ff0000;#ffffff;#0000ff;#ffff00","#ff0000;#ffff00;#0000ff;#ffff00;#ff0000;#ffffff;#ff0000","#ff0000;#ffff00;#0000ff;#ffff00;#ff0000;#ffffff;#ff0000","#ffff00;#ff0000;#ffff00;#ff0000;#ffffff;#0000ff;#ffff00"];var Se,Ae,we,Le,t=Xe("layer_paths"),e=t.slice(0,8),Ne=t.slice(8,16),qe=t.slice(16,24);console.log("Selected layer paths:",e),console.log("Selected hodl layer paths:",Ne),console.log("Selected contract milestone layer paths:",qe);let W=[{id:"lp0",type:"plate",paths:i(e[0]),paths_group_name:e[0],color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.7,1],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:q,clustering_density:[0,0],gradient_coordinates:[0,0,100,0]},{id:"lc0",type:"cluster",paths:i(e[1]),paths_group_name:e[1],color_duration:[30,60],coordinates:[[-30,30],[-10,10]],scale:[.06,.1],number_of_visible_shapes:17,change_positions_chance:.5,color_combinations_list:q,clustering_density:[7,9],gradient_coordinates:[0,0,100,0]},{id:"lp1",type:"plate",paths:i(e[2]),paths_group_name:e[2],color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.6,1],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:q,clustering_density:[0,0],gradient_coordinates:[0,0,100,0]},{id:"lc1",type:"cluster",paths:i(e[3]),paths_group_name:e[3],color_duration:[30,60],coordinates:[[-10,10],[-30,30]],scale:[.06,.1],number_of_visible_shapes:17,change_positions_chance:.5,color_combinations_list:q,clustering_density:[7,9],gradient_coordinates:[0,0,100,0]},{id:"lp2",type:"plate",paths:i(e[4]),paths_group_name:e[4],color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.5,.9],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:q,clustering_density:[0,0],gradient_coordinates:[0,0,100,0]},{id:"lc2",type:"cluster",paths:i(e[5]),paths_group_name:e[5],color_duration:[30,60],coordinates:[[-10,80],[-10,30]],scale:[.06,.1],number_of_visible_shapes:17,change_positions_chance:.5,color_combinations_list:q,clustering_density:[7,9],gradient_coordinates:[0,0,100,0]},{id:"lp3",type:"plate",paths:i(e[6]),paths_group_name:e[6],color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.4,.9],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:q,clustering_density:[0,0],gradient_coordinates:[0,0,100,0]},{id:"lc3",type:"cluster",paths:i(e[7]),paths_group_name:e[7],color_duration:[30,60],coordinates:[[-30,10],[-30,50]],scale:[.06,.1],number_of_visible_shapes:17,change_positions_chance:.5,color_combinations_list:q,clustering_density:[7,9],gradient_coordinates:[0,0,100,0]}],S=[{id:"s_lp0",type:"plate",paths:i("L - send"),paths_group_name:"L - send",color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.5,1],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:[y.special_sends],clustering_density:[0,0],gradient_coordinates:[0,0,100,0],classes:["special","send","special_no_add"]},{id:"s_lp1",type:"plate",paths:i("L - sale"),paths_group_name:"L - sale",color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.7,1],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:[y.special_sales],clustering_density:[0,0],gradient_coordinates:[0,0,100,0],classes:["special","sale","special_no_add"]},{id:"s_lp2",type:"plate",paths:i("L - approval"),paths_group_name:"L - approval",color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.45,.75],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:[y.special_approval],clustering_density:[0,0],gradient_coordinates:[0,0,100,0],classes:["special","approval","special_no_add"]},{id:"s_lp3",type:"plate",paths:i("L - flip"),paths_group_name:"L - flip",color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.6,1],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:q,clustering_density:[0,0],gradient_coordinates:[0,0,100,0],classes:["special","flip","special_no_add"]}];for(let e=0;e<7;e++){var ke=Ne[e];S.push({id:"hodl_lp_"+e,type:"plate",paths:i(ke),paths_group_name:ke,color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.5,.8],number_of_visible_shapes:1,change_positions_chance:.5,color_combinations_list:q,clustering_density:[0,0],gradient_coordinates:[0,0,100,0],classes:["special","hodl","time_hodld_"+e]})}for(let e=0;e<7;e++)selected_path=qe[e],S.push({id:"milestone_lc_"+e,type:"cluster",paths:i(selected_path),paths_group_name:selected_path,color_duration:[30,60],coordinates:[[-10,10],[-30,30]],scale:[.06,.1],number_of_visible_shapes:10,change_positions_chance:.5,color_combinations_list:q,clustering_density:[7,9],gradient_coordinates:[0,0,100,0],classes:["special","contract_milestones","milestone_"+e]});let xe={4:{0:{1:2,2:2,3:2,4:2,5:0,6:0,7:0,8:0,9:0,10:0},1:{1:2,2:3,3:2,4:3,5:0,6:0,7:0,8:0,9:0,10:0},2:{1:3,2:3,3:3,4:3,5:0,6:0,7:0,8:0,9:0,10:0},3:{1:3,2:3,3:4,4:4,5:0,6:0,7:0,8:0,9:0,10:0},"-3":{1:1,2:0,3:0,4:1,5:0,6:0,7:0,8:0,9:0,10:0},"-2":{1:0,2:1,3:1,4:1,5:0,6:0,7:0,8:0,9:0,10:0},"-1":{1:2,2:1,3:2,4:1,5:0,6:0,7:0,8:0,9:0,10:0}},5:{0:{1:2,2:2,3:2,4:2,5:1,6:0,7:0,8:0,9:0,10:0},1:{1:2,2:3,3:2,4:3,5:2,6:0,7:0,8:0,9:0,10:0},2:{1:3,2:3,3:3,4:3,5:2,6:0,7:0,8:0,9:0,10:0},3:{1:3,2:3,3:4,4:4,5:3,6:0,7:0,8:0,9:0,10:0},"-3":{1:1,2:0,3:0,4:1,5:1,6:0,7:0,8:0,9:0,10:0},"-2":{1:0,2:1,3:1,4:1,5:1,6:0,7:0,8:0,9:0,10:0},"-1":{1:2,2:1,3:2,4:1,5:1,6:0,7:0,8:0,9:0,10:0}},6:{0:{1:2,2:2,3:2,4:2,5:1,6:1,7:0,8:0,9:0,10:0},1:{1:2,2:3,3:2,4:3,5:2,6:1,7:0,8:0,9:0,10:0},2:{1:3,2:3,3:3,4:3,5:2,6:2,7:0,8:0,9:0,10:0},3:{1:3,2:3,3:4,4:4,5:3,6:2,7:0,8:0,9:0,10:0},"-3":{1:1,2:0,3:0,4:1,5:0,6:1,7:0,8:0,9:0,10:0},"-2":{1:0,2:1,3:1,4:1,5:1,6:0,7:0,8:0,9:0,10:0},"-1":{1:2,2:1,3:2,4:1,5:1,6:1,7:0,8:0,9:0,10:0}},7:{0:{1:2,2:2,3:2,4:2,5:1,6:1,7:2,8:0,9:0,10:0},1:{1:2,2:3,3:2,4:3,5:2,6:1,7:2,8:0,9:0,10:0},2:{1:3,2:3,3:3,4:3,5:2,6:2,7:3,8:0,9:0,10:0},3:{1:3,2:3,3:4,4:4,5:3,6:2,7:3,8:0,9:0,10:0},"-3":{1:1,2:0,3:0,4:1,5:1,6:1,7:0,8:0,9:0,10:0},"-2":{1:0,2:1,3:1,4:1,5:1,6:0,7:1,8:0,9:0,10:0},"-1":{1:2,2:1,3:2,4:1,5:1,6:1,7:2,8:0,9:0,10:0}},8:{0:{1:2,2:2,3:2,4:2,5:1,6:1,7:2,8:1,9:0,10:0},1:{1:2,2:3,3:2,4:3,5:2,6:1,7:2,8:2,9:0,10:0},2:{1:3,2:3,3:3,4:3,5:2,6:2,7:3,8:2,9:0,10:0},3:{1:3,2:3,3:4,4:4,5:3,6:2,7:3,8:2,9:0,10:0},"-3":{1:1,2:0,3:0,4:1,5:1,6:1,7:0,8:1,9:0,10:0},"-2":{1:0,2:1,3:1,4:1,5:1,6:0,7:1,8:1,9:0,10:0},"-1":{1:2,2:1,3:2,4:1,5:1,6:1,7:2,8:1,9:0,10:0}},9:{0:{1:2,2:2,3:2,4:2,5:1,6:1,7:2,8:1,9:1,10:0},1:{1:2,2:3,3:2,4:3,5:2,6:1,7:2,8:2,9:2,10:0},2:{1:3,2:3,3:3,4:3,5:2,6:2,7:3,8:2,9:2,10:0},4:{1:3,2:3,3:4,4:4,5:3,6:2,7:3,8:2,9:3,10:0},"-3":{1:1,2:0,3:0,4:1,5:1,6:1,7:0,8:1,9:1,10:0},"-2":{1:0,2:1,3:1,4:1,5:1,6:0,7:1,8:1,9:1,10:0},"-1":{1:2,2:1,3:2,4:1,5:1,6:1,7:2,8:1,9:1,10:0}},10:{0:{1:2,2:2,3:2,4:2,5:1,6:1,7:2,8:2,9:1,10:1},1:{1:2,2:3,3:2,4:3,5:2,6:2,7:2,8:3,9:2,10:2},2:{1:3,2:3,3:3,4:3,5:2,6:2,7:3,8:2,9:3,10:3},3:{1:4,2:3,3:4,4:4,5:3,6:2,7:3,8:2,9:4,10:3},"-3":{1:1,2:0,3:0,4:1,5:1,6:1,7:0,8:1,9:1,10:0},"-2":{1:0,2:1,3:1,4:1,5:1,6:0,7:1,8:1,9:1,10:1},"-1":{1:2,2:1,3:2,4:1,5:1,6:1,7:2,8:1,9:1,10:1}}};for(Se of S)Se.paths_unlocked=!1;for(Ae of W)Ae.paths_unlocked=!1;for(we of W)if("plate"==we.type){if(--U<0)break;we.paths_unlocked=!0}for(Le of W)Le.classes=[];W.filter(e=>"plate"==e.type).length;let Ce=!0;(new Date).getTime();var t=te(Object.keys(paths),!1),Te=t.filter(e=>"L "==e.slice(0,2)),Me=t.filter(e=>"S "==e.slice(0,2)),$e=t.filter(e=>"LS"==e.slice(0,2)),o=[];for(let e=0;e<5;e++)for(var Ee of Te.concat($e))for(layer_name of paths[Ee][0].split(","))if(layer_name=="plate layer "+(e+1))try{o[e].push(Ee)}catch{o.push([]),o[e].push(Ee)}var je,r,a,n=[];for(let e=0;e<5;e++)for(var Pe of Me.concat($e))for(layer_name of paths[Pe][0].split(","))if(layer_name=="cluster layer "+(e+1))try{n[e].push(Pe)}catch{n.push([]),n[e].push(Pe)}for(let e=0;e<4;e++)o[e]=o[e].map(e=>({value:e,sort:Ge()})).sort((e,t)=>e.sort-t.sort).map(({value:e})=>e),n[e]=n[e].map(e=>({value:e,sort:Ge()})).sort((e,t)=>e.sort-t.sort).map(({value:e})=>e);e=document.querySelector("#main-svg"),(t=document.createElementNS(N,"defs")).setAttributeNS(null,"id","defs"),e.appendChild(t);{let e=document.querySelector("#main-svg"),t=ee(oe),l=te(ee(ge).colors),o=e.querySelector("#defs"),r=Be([0,0,100,0],"gradient_bg"),a=x(0,"#000000"),n=x(1,"#000000"),i=C(l[0],t),s=C(l[1],t),c=(a.appendChild(i),n.appendChild(s),r.appendChild(a),r.appendChild(n),o.appendChild(r),r=Be([0,0,100,0],"gradient_bg_mirror"),a=x(0,"#000000"),n=x(1,"#000000"),i=C(l[1],t),s=C(l[0],t),a.appendChild(i),n.appendChild(s),r.appendChild(a),r.appendChild(n),o.appendChild(r),document.createElementNS(N,"svg")),f=(c.classList.add("background"),c.setAttributeNS(null,"width","100%"),c.setAttributeNS(null,"height","100%"),c.setAttributeNS(null,"x",0),c.setAttributeNS(null,"y",0),document.createElementNS(N,"rect"));f.setAttributeNS(null,"width","100%"),f.setAttributeNS(null,"height","100%"),f.setAttributeNS(null,"x",0),f.setAttributeNS(null,"y",0),f.setAttributeNS(null,"fill","url(#gradient_bg)"),f.setAttributeNS(null,"id","background"),c.appendChild(f),e.appendChild(c)}!function(t=-1,l="bottom"){var o=document.querySelector("#main-svg"),r=o.querySelector("#defs"),a=te(Array.from(q)),n=[];for(let e=0;e<W.length;e++)if(!(-1!=t&e!=t)){var i,s=W[e],c=("cluster"==s.type&&(c=W[e-1],T(),c.current_x,c.current_scale,V(s.coordinates[0][0],s.coordinates[0][1]),c.current_y,c.current_scale,V(s.coordinates[1][0],s.coordinates[1][1])),a[e%a.length].colors),f=(n.includes(JSON.stringify(c))&&console.log("Duplicate color"),n.push(JSON.stringify(c)),console.log("Using color",c,"for layer",e),`g-${s.id}-`+s.type),u=V(s.color_duration[0],s.color_duration[1]),d=(s.current_scale=V(s.scale[0],s.scale[1],.01),Be(s.gradient_coordinates,f)),p=(d.setAttributeNS(null,"class",`gradient ${s.type} `+s.id),x(0,c[0][0])),_=x(1,c[1][0]),g=C(c[0],u),u=C(c[1],u),h=(p.appendChild(g),_.appendChild(u),d.appendChild(p),d.appendChild(_),r.appendChild(d),document.createElementNS(N,"g")),m=(h.setAttributeNS(null,"id",`g-${s.id}-${s.type}-`+e),h.setAttributeNS(null,"class",`layer group ${s.type} `+s.id),"cluster"==s.type&&(i=We(ee(B),s.number_of_visible_shapes,V(s.clustering_density[0],s.clustering_density[1]),.5,[3,6],s.clustering_density)),te(Array.from(s.paths),s.paths_unlocked));for(let t=0;t<s.number_of_visible_shapes;t++){var y,b,v=`p-${s.id}-${s.type}-`+t,S=`s-${s.id}-${s.type}-`+t;let e=1;"plate"==s.type?(y=Q(s.coordinates[0][0],s.coordinates[0][1])/s.current_scale,b=Q(s.coordinates[1][0],s.coordinates[1][1])/s.current_scale,s.current_x=y,s.current_y=b,s.current_path=m[t%m.length]):(y=i[t][0],b=i[t][1],s.current_x=y,s.current_y=b,s.current_path=m[t%m.length],k.length&&(e=V(k[0],k[1],.01)));var A,w=document.createElementNS(N,"path"),L=(w.setAttributeNS(null,"transform",`scale(${s.current_scale*e}, ${s.current_scale*e})`),w.setAttributeNS(null,"d",s.current_path),w.setAttributeNS(null,"fill",`url(#${f})`),w.setAttributeNS(null,"id",v),w.setAttributeNS(null,"class",`layer path ${s.type} `+s.id),document.createElementNS(N,"svg"));L.setAttributeNS(null,"x",y+"%"),L.setAttributeNS(null,"y",b+"%"),L.setAttributeNS(null,"transform-origin","center"),L.setAttributeNS(null,"id",S),L.setAttributeNS(null,"class",`layer svg ${s.type} `+s.id);for(A of s.classes)L.classList.add(A),h.classList.add(A);L.appendChild(w),h.appendChild(L)}if(h.setAttribute("initial_number_of_shapes",s.number_of_visible_shapes),-1!=t)return h.animate([{opacity:"0"},{opacity:"1"}],{duration:ne,iterations:1,fill:"forwards"}),"top"==l?(g=document.querySelectorAll(".group.plate"))[g.length-1].after(h):document.querySelector(".group.plate").before(h);o.appendChild(h)}}(),e=document.querySelector("#main-svg"),t=e.querySelector("#defs"),(je=document.createElementNS(N,"mask")).setAttributeNS(null,"id","bg_border_clip_path"),(r=document.createElementNS(N,"rect")).setAttributeNS(null,"width","101%"),r.setAttributeNS(null,"height","101%"),r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y","0"),r.setAttributeNS(null,"fill","white"),(a=document.createElementNS(N,"rect")).setAttributeNS(null,"width","94%"),a.setAttributeNS(null,"height","95.3%"),a.setAttributeNS(null,"x","3%"),a.setAttributeNS(null,"y","2.5%"),a.setAttributeNS(null,"fill","black"),je.appendChild(r),je.appendChild(a),t.appendChild(je),(r=document.createElementNS(N,"rect")).setAttributeNS(null,"width","100%"),r.setAttributeNS(null,"height","100%"),r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y","0"),r.setAttributeNS(null,"fill","url(#gradient_bg_mirror)"),r.setAttributeNS(null,"mask","url(#bg_border_clip_path)"),r.setAttributeNS(null,"class","frame"),e.appendChild(r);setTimeout(async function e(o,r=!1,a=10){let t=te(Array.from(W).concat(S));for(var n of t)if("cluster"==n.type){let e=g.querySelector(".group."+n.id);if(null!=e){let l=e.querySelectorAll("svg");var i=We(ee(B),l.length,V(n.clustering_density[0],n.clustering_density[1]),.5,[3,6],n.clustering_density);for(let t=0;t<l.length;t++)if(T()>1-n.change_positions_chance&&!l[t].classList.contains("animating")&&!l[t].classList.contains("removing")){l[t].classList.add("animating");var s=i[t][0],c=i[t][1];s<0&&(s+=Q(1,10)),0<s&&(s-=Q(1,10)),c<0&&(c+=Q(1,10)),0<c&&(c-=Q(1,10)),n.current_x=s,n.current_y=c,r&&(n.current_path=ee(n.paths));let e=e=>{e[0].classList.contains("removing")?e[0].remove():(e[0].setAttributeNS(null,"x",e[1]+"%"),e[0].setAttributeNS(null,"y",e[2]+"%"),e[4]&&e[0].querySelector("path").setAttributeNS(null,"d",e[3]))};0==a?_([l[t]],o,e,[l[t],s,c,n.current_path,r]):setTimeout(_,1e3*Q(0,a),[l[t]],o,e,[l[t],s,c,n.current_path,r])}}}0;setTimeout(e,5e3,5,r,a)},5e3,5,!0,5),setTimeout(async function e(o,r=!1,a=10){864e5<(new Date).getTime()-re&&(re=(new Date).getTime(),console.log("Reducing plate_shapes_update_time, current",l),--l,l=Math.max(l,5),ae=l,console.log("New",l));let n=!1;let i=Array.from(W).concat(S);let t=te(Array.from(W).concat(S));for(var s of t){if("plate"==s.type){let e=g.querySelector(".group."+s.id);if(null==e)continue;let l=e.querySelectorAll("svg");for(let t=0;t<l.length;t++){if(T()>1-s.change_positions_chance&&!l[t].classList.contains("animating")&&!l[t].classList.contains("removing")){if(l[t].classList.add("animating"),0<U&&he<U)for(let e=0;e<i.length;e++)if(e<Math.min(U,10)-he){he++,r=!0;break}Math.abs(s.current_x-c)<10&&(c=s.current_x+V(-20,20)),Math.abs(s.current_y-f)<10&&(f=s.current_y+V(-20,20));var c=V(s.coordinates[0][0],s.coordinates[0][1])/s.current_scale,f=V(s.coordinates[1][0],s.coordinates[1][1])/s.current_scale;s.current_x=c,s.current_y=f,r&&(s.current_path=ee(s.paths));let e=e=>{e[0].classList.contains("removing")?e[0].remove():(e[0].setAttributeNS(null,"x",e[1]+"%"),e[0].setAttributeNS(null,"y",e[2]+"%"),e[4]&&e[0].querySelector("path").setAttributeNS(null,"d",e[3]))};0==a?_([l[t]],o,e,[l[t],c,f,s.current_path,r]):setTimeout(_,1e3*Q(0,a),[l[t]],o,e,[l[t],c,f,s.current_path,r]),n=!0;break}if(n)break}if(n)break}if(n)break}0;setTimeout(e,1e3*l,ae,r,a)},5e3,ae,!0,5),async function e(){let t=await Ve();await et(...t);setTimeout(e,1e4)}();let Fe=(e,t)=>{var l;return 0!=t&&(l=t<0?-1:1,t=Math.abs(t),0<=e&&--t,1<=e&&(t-=2),2<=e&&(t-=3),-0==(t=Math.max(0,t)*l))?0:t};async function E(e,t){if("send"==e){if(0<document.querySelectorAll(".sale").length&&(Y("sale"),await X("special_frame_sale","special_background_sale")),0<document.querySelectorAll(".approval").length&&(Y("approval"),await X("special_frame_approval","special_background_approval")),0<document.querySelectorAll(".send").length)return console.log("Send layer already exists"),void Z(1,5,20,!0);0<document.querySelectorAll(".special_frame_contract_milestone").length&&await X("special_frame_contract_milestone","special_background_contract_milestone"),K("send"),Re("cluster",1,2e4),await Oe(me,"special_frame_send","special_background_send"),Z(1,5,20,!0)}if("stop_send"==e&&(0<document.querySelectorAll(".send").length&&Y("send"),0<document.querySelectorAll(".special_frame_send").length)&&await X("special_frame_send","special_background_send"),"sale"==e){if(0<document.querySelectorAll(".send").length&&(Y("send"),await X("special_frame_send","special_background_send")),0<document.querySelectorAll(".approval").length&&(Y("approval"),await X("special_frame_approval","special_background_approval")),0<document.querySelectorAll(".sale").length)return console.log("Sale layer already exists"),void await ze(5,"plate",20,!0,!0);0<document.querySelectorAll(".special_frame_contract_milestone").length&&await X("special_frame_contract_milestone","special_background_contract_milestone"),K("sale"),ze(5,"plate",20,!0,!0),await Oe(ye,"special_frame_sale","special_background_sale"),Z(1,5,20,!0),Re("cluster",1,2e4)}if("stop_sale"==e&&(0<document.querySelectorAll(".sale").length&&Y("sale"),0<document.querySelectorAll(".special_frame_sale").length)&&await X("special_frame_sale","special_background_sale"),"approval"==e){if(0<document.querySelectorAll(".send").length&&(Y("send"),await X("special_frame_send","special_background_send")),0<document.querySelectorAll(".sale").length&&(Y("sale"),await X("special_frame_sale","special_background_sale")),0<document.querySelectorAll(".approval").length)return console.log("Approval layer already exists"),void await Z(1,5,20,!0);0<document.querySelectorAll(".special_frame_contract_milestone").length&&await X("special_frame_contract_milestone","special_background_contract_milestone"),K("approval"),await Oe(be,"special_frame_approval","special_background_approval"),Z(1,5,20,!0)}if("stop_approval"==e&&(0<document.querySelectorAll(".approval").length&&Y("approval"),0<document.querySelectorAll(".special_frame_approval").length)&&await X("special_frame_approval","special_background_approval"),"high_royalty"==e){var l=le(G.royalty[0],G.royalty[1],t),o=te(Array.from(document.querySelectorAll("g.plate")));for(let e=0;e<l;e++)for(var r of o.reverse())for(let e=0;e<pe;e++){if(!(document.querySelectorAll("g.plate path").length<se))break;console.log("Adding 1 shape to plate layer"),Je(r,1),await new Promise(e=>setTimeout(e,1e3*Q(1,5)))}}if("low_royalty"==e){var a=le(G.royalty[0],G.royalty[1],t),a=Math.abs(a),F=te(Array.from(document.querySelectorAll("g.plate")));for(let e=0;e<a;e++)for(let t of F.reverse())for(let e=0;e<pe;e++){var n=t.querySelectorAll("svg"),i=document.querySelectorAll("g.plate path");if(!(0<n.length&i.length>ie))break;i=W.filter(e=>e.id==t.id.split("-")[1])[0];null==i.svg_prototype&&(i.svg_prototype=n[0]),console.log("Subtracting 1 shape of plate layer"),Je(t,-1),await new Promise(e=>setTimeout(e,1e3*Q(1,5)))}}if("same_royalty"==e)for(let t of document.querySelectorAll("g.plate")){var s=t.querySelectorAll("svg");if(2<s.length){var c=W.filter(e=>e.id==t.id.split("-"[1]));null==c.svg_prototype&&(c.svg_prototype=s[0]);for(let e=0;e<s.length-2;e++)Je(t,-1),await new Promise(e=>setTimeout(e,1e3*V(1,3)))}else s.length<2&&(Je(t,1),await new Promise(e=>setTimeout(e,1e3*V(1,3))))}var f;if("high_holder_distribution"==e&&(M=($=document.querySelector(".frame")).cloneNode(!0),document.querySelector("g.group").before(M),$.animate({opacity:"0"},{duration:5e3,iterations:1,fill:"forwards"}),setTimeout(e=>e.remove(),5e3,$)),"low_holder_distribution"==e&&($=(M=document.querySelector(".frame")).cloneNode(!0),(f=document.querySelectorAll("g.group"))[f.length-1].after($),$.animate([{opacity:"0"},{opacity:"1"}],{duration:5e3,iterations:1,fill:"forwards"}),setTimeout(e=>e.remove(),5e3,M)),"total_contract_activity_up"==e){var O=le(G.contract_activity[0],G.contract_activity[1],t),R=te(Array.from(document.querySelectorAll("g.cluster")));for(let e=0;e<O;e++)for(var D of R.reverse())for(let e=0;e<_e;e++){if(!(document.querySelectorAll("g.cluster path").length<fe))break;console.log("Adding 1 shape to cluster layer"),Ie(D,1),await new Promise(e=>setTimeout(e,1e3*Q(1,2)))}}if("total_contract_activity_down"==e){var u=le(G.contract_activity[0],G.contract_activity[1],t),u=Math.abs(u),H=te(Array.from(document.querySelectorAll("g.cluster")));for(let e=0;e<u;e++)for(let t of H.reverse())for(let e=0;e<_e;e++){var d=t.querySelectorAll("svg"),p=document.querySelectorAll("g.cluster path");if(!(0<d.length&p.length>ce))break;p=W.filter(e=>e.id==t.id.split("-")[1])[0];null==p.svg_prototype&&(p.svg_prototype=d[0]),console.log("Subtracting 1 shape of cluster layer"),Ie(t,-1),await new Promise(e=>setTimeout(e,1e3*Q(1,2)))}}if("contract_milestone"==e){var _=document.querySelectorAll("g.contract_milestones").length,g=t+1-_;if(0<g){if(0<document.querySelectorAll(".send").length)return void console.log("Send layer active, delaying contract milestone");if(0<document.querySelectorAll(".sale").length)return void console.log("Sale layer active, delaying contract milestone");if(0<document.querySelectorAll(".approval").length)return void console.log("Approval layer active, delaying contract milestone")}for(let e=_;e<_+g;e++)console.log("Adding contract milestone milestone_"+e),K("milestone_"+e);if(Ye(document.querySelector(".special_frame_contract_milestone")))return void console.log("Another party mode currently on");await Oe(ve,"special_frame_contract_milestone","special_background_contract_milestone"),ze(5,"plate",100,!0,!0)}if("stop_contract_milestone"==e&&0<document.querySelectorAll(".special_frame_contract_milestone").length&&await X("special_frame_contract_milestone","special_background_contract_milestone"),"contract_milestone_no_celebration"==e){var h=document.querySelectorAll("g.contract_milestones").length,I=t+1-h;for(let e=h;e<h+I;e++)console.log("Adding contract milestone milestone_"+e),K("milestone_"+e)}if("time_hodld"==e){var m=document.querySelectorAll("g.hodl"),y=t-m.length;if(0<y)for(let e=0;e<Math.abs(y);e++)console.log("Adding hodl layer"),K("time_hodld_"+e);else if(y<0)for(let e=0;e<Math.abs(y);e++)console.log("Removing hodl layer",m[e].id),!function(e){var t=e.animate([{opacity:0}],{duration:5e3,iterations:1,fill:"forwards"});t.onfinish=()=>{e.remove()}}(m[e])}if("wallet_holds_multiple"==e&&(console.log("Setting number_of_unlocked_layers_on_startup to",t-1),U=t-1),"flipped_x_times"==e&&null==document.querySelector(".flip")&&K("flip"),"hodld_after_flipped_x_times"==e&&Y("flip"),"increased_sends"==e&&(f=ee(z.increased),console.log("Switching clustering mode to upwards",f),B=[f,f]),"decreased_sends"==e&&($=ee(z.decreased),console.log("Switching clustering mode to downwards",$),B=[$,$]),"same_sends"==e&&(M=ee(z.neutral),console.log("Switching clustering mode to vertical",M),B=[M,M]),"no_sends"==e&&(f=ee(z.neutral),console.log("Switching clustering mode to horizontal",f),B=[f,f]),"tier_royalty"==e){var b=t,v=document.querySelectorAll("g.plate:not(.special_no_add)"),S=v.length;let l=0,o=0;var A=document.querySelectorAll("path.plate:not(.special_no_add)").length;console.log("number plate layers:",S,"tier:",b);for(let t=0;t<v.length;t++){var w=v[t],L=w.querySelectorAll(".svg").length;parseInt(w.getAttribute("initial_number_of_shapes"));let e=xe[S][b][t+1]-L;console.log("layer:",t+1,"number_of_shapes:",L,"number_of_shapes_to_add_or_remove:",e),e<0?(e=Math.abs(e),A-l-e<ie&&(e=A-l-ie),De(w,e=Math.min(e,L),"plate"),l+=e):0<e&&(e=Math.abs(e),He(w,e=A+o+e>se?se-(A+o):e,"plate"),o+=e)}}if("tier_contract_activity"==e){var N=t,q=document.querySelectorAll("g.cluster:not(.special_no_add)"),k=q.length;let l=0,o=0;var x=document.querySelectorAll("path.cluster:not(.special_no_add)").length;console.log("number cluster layers:",k,"tier:",N);for(let t=0;t<k;t++){var C=q[t],T=C.querySelectorAll(".svg").length,J=T-parseInt(C.getAttribute("initial_number_of_shapes"));let e=N*_e-J;console.log("layer:",t+1,"number_of_shapes:",T,"number_of_shapes_to_add_or_remove:",e),e<0?(e=Math.abs(e),x-l-e<ce&&(e=x-l-ce),De(C,e=Math.min(e,T),"cluster"),l+=e):0<e&&(e=Math.abs(e),He(C,e=x+o+e>fe?fe-(x+o):e,"cluster"),o+=e)}}if("tier_sends"==e){var M,$=t;let e=z.neutral;if(0<$?e=z.increased:$<0&&(e=z.decreased),-1!=e.indexOf(B[0])&&(0==$||e[Math.abs($)-1]==B[0]))return void console.log("Clustering mode already matches desired one");M=0==$?ee(e):e[Math.abs($)-1],console.log("Setting clustering mode to",M),B=[M,M]}if("tier_approvals"==e){let e=-3==t?1.9:-2==t?1.5:-1==t?1.25:1==t?.75:2==t?.5:3==t?.3:0;var E=e;for(let o of document.querySelectorAll("linearGradient")){var j=o.querySelectorAll(".animation");for(let l=0;l<j.length;l++){let e=j[l].getAttribute("dur"),t=(e=Number.parseFloat(e.slice(0,e.length-1)),parseFloat(j[l].getAttribute("original_duration")));var P=0==E?t:Math.round(t*E);P=Math.max(10,P),e==P?console.log("Gradient speed already matching",j[l].id):(j[l].old_dur=e,j[l].new_dur=P,j[l].onrepeat=function(){console.log(`Changing gradient speed from ${this.old_dur}s to ${this.new_dur}s (original: ${t}s) of `+o.getAttribute("id")),this.setAttribute("begin",this.getCurrentTime()),this.setAttribute("dur",this.new_dur+"s"),this.onrepeat=void 0})}}await 0}"remove_flip_layer"==e&&Y("flip")}async function Oe(e,t,l){var o,r,a=document.querySelector(".frame"),n=document.querySelector("#background"),i=a.cloneNode(!0),t=(i.classList.add(t),n.cloneNode(!0)),l=(t.classList.add(l),i.setAttribute("fill","url(#gradient_bg_mirror_read_and_black)"),t.setAttribute("fill","url(#gradient_bg_read_and_black)"),document.querySelector("#gradient_bg_mirror")),s=document.querySelector("#gradient_bg"),c=l.cloneNode(!0),f=s.cloneNode(!0),u=(c.setAttribute("id","gradient_bg_mirror_read_and_black"),f.setAttribute("id","gradient_bg_read_and_black"),Array.from(e));for(o of c.querySelectorAll("stop")){var d=o.querySelector("animate");d.setAttribute("values",u.pop()),d.setAttribute("dur","20s")}for(r of f.querySelectorAll("stop")){var p=r.querySelector("animate");p.setAttribute("values",u.pop()),p.setAttribute("dur","30s")}l.after(c),s.after(f),i.setAttribute("opacity","0"),i.animate([{opacity:"1"}],{duration:5e3,iterations:1,fill:"forwards"}),a.after(i),t.setAttribute("opacity","0"),t.animate([{opacity:"1"}],{duration:5e3,iterations:1,fill:"forwards"}),n.after(t)}async function X(e,t){let l=document.querySelector("."+e);document.querySelector("#gradient_bg_mirror");l.setAttribute("opacity","1");let o=l.animate([{opacity:"0"}],{duration:5e3,iterations:1,fill:"forwards"}),r=(o.onfinish=function(){l.remove()},document.querySelector("."+t));r.setAttribute("opacity","1"),(o=r.animate([{opacity:"0"}],{duration:5e3,iterations:1,fill:"forwards"})).onfinish=function(){r.remove()},await new Promise(e=>setTimeout(e,6e3))}function Re(t,l,o){for(let e of W)e.type==t&&(null==e.original_change_positions_chance&&(e.original_change_positions_chance=e.change_positions_chance),e.change_positions_chance=l,setTimeout(()=>{e.change_positions_chance=e=e.original_change_positions_chance},o))}async function De(l,e,o){let r=te(l.querySelectorAll("svg"));for(let t=0;t<e;t++){console.log(`Removing ${o} of layer`,l.id);let e=W.filter(e=>e.id==l.id.split("-")[1])[0];null==(e=null==e?S.filter(e=>e.id==l.id.split("-")[1])[0]:e).svg_prototype&&(e.svg_prototype=r[t]),r[t].classList.add("removing"),r[t].classList.contains("animating")||(r[t].animate([{opacity:"0"}],{duration:5e3,iterations:1,fill:"forwards"}).onfinish=e=>{r[t].remove()})}}async function He(l,t,o){for(let e=0;e<t;e++)if(console.log("Adding shape to layer",l.id),"cluster"==o){let t=ee(l.querySelectorAll(".svg.cluster")),e=t.cloneNode(!0);if(null==t){let e=W.filter(e=>e.id==l.id.split("-")[1])[0];null==e&&(e=S.filter(e=>e.id==l.id.split("-")[1])[0]),t=e.svg_prototype}try{n=(l.classList.contains("special")?S.filter(e=>l.classList.contains(e.id)):W.filter(e=>l.classList.contains(e.id)))[0],e.querySelector("path").setAttribute("d",ee(n.paths))}catch(e){console.log("Adding shapes to plate layer failed",l,e)}var r=e.getAttribute("x").split("%")[0]*V(.99,1.01,.1),a=e.getAttribute("y").split("%")[0]*V(.99,1.01,.1),r=(e.setAttribute("x",r+"%"),e.setAttribute("y",a+"%"),e.classList.add("animating"),e.animate([{opacity:"0"},{opacity:"1"}],{duration:f,iterations:1,fill:"forwards"}));l.appendChild(e),r.onfinish=function(){e.classList.remove("animating")}}else if("plate"==o){let t=l.querySelector("svg");if(null==t){let e=W.filter(e=>e.id==l.id.split("-")[1])[0];null==e&&(e=S.filter(e=>e.id==l.id.split("-")[1])[0]),t=e.svg_prototype}let e=t.cloneNode(!0);try{var n;n=(l.classList.contains("special")?S.filter(e=>l.classList.contains(e.id)):W.filter(e=>l.classList.contains(e.id)))[0],e.querySelector("path").setAttribute("d",ee(n.paths))}catch(e){console.log("Adding shapes to plate layer failed",l,e)}var a=V(ue[0],ue[1],.1),r=e.querySelector("path"),i=r.getAttribute("transform").split("(")[1].split(","),i=(i[0]=parseFloat(i[0])*a,i[1]=parseFloat(i[1].slice(0,i[1].length-2))*a,r.setAttribute("transform",`scale(${i[0]}, ${i[1]})`),parseFloat(e.getAttribute("x").split("%")[0])+V(-20,20)),s=parseFloat(e.getAttribute("y").split("%")[0])+V(-20,20);i*=de,s*=de,e.setAttribute("x",i+"%"),e.setAttribute("y",s+"%"),e.classList.add("animating"),e.classList.add("dynamic_add"),l.appendChild(e),e.animate([{opacity:"0"},{opacity:"1"}],{duration:f,iterations:1,fill:"forwards"}).onfinish=function(){e.classList.remove("animating")}}}async function Ie(l,t){if(t<0){var o=l.querySelectorAll("svg");for(let e=0;e<o.length;e++){var r=o[e];if(r.classList.contains("animating"))for(let t of r.getAnimations())"finished"!=t.playState&&(console.log(t),t.svg=r,t.onfinish=e=>{t.svg.remove()},console.log("Shape is animating",l.id));return console.log("Removing shape from layer",l.id),r.classList.add("animating"),r.classList.add("removing"),r.animate([{opacity:"0"}],{duration:f,iterations:1,fill:"forwards"}),setTimeout(e=>e.remove(),f,r),!0}return!1}if(0<t){console.log("Adding shape to layer",l.id);let e=ee(l.querySelectorAll(".svg.cluster")).cloneNode(!0);var t=e.getAttribute("x").split("%")[0]*V(.99,1.01),a=e.getAttribute("y").split("%")[0]*V(.99,1.01),t=(e.setAttribute("x",t+"%"),e.setAttribute("y",a+"%"),e.classList.add("animating"),e.animate([{opacity:"0"},{opacity:"1"}],{duration:f,iterations:1,fill:"forwards"}));l.appendChild(e),t.onfinish=function(){e.classList.remove("animating")}}}function Je(o,t){if(t<0){var l=o.querySelectorAll("svg");for(let t=0;t<l.length;t++){if(!l[t].classList.contains("animating")){console.log("Removing shape from layer",o.id);let e=l[t];e.classList.add("animating"),e.classList.add("removing"),e.animate([{opacity:"0"}],{duration:f,iterations:1,fill:"forwards"}).onfinish=function(){e.remove()};break}console.log("Shape is animating",o.id)}}else if(0<t){console.log("Adding shape to layer",o.id);let e=o.querySelector("svg");null==e&&(t=W.filter(e=>e.id==o.id.split("-")[1])[0],e=t.svg_prototype);let l=e.cloneNode(!0);try{let t=o.getAttribute("id").split("-")[1];var r=("s_"==t.slice(0,2)?S.filter(e=>e.id==t):W.filter(e=>e.id==t))[0];l.querySelector("path").setAttribute("d",ee(r.paths))}catch{console.log("Adding shapes to plate layer failed",o)}var t=V(ue[0],ue[1],.1),r=l.querySelector("path"),a=r.getAttribute("transform").split("(")[1].split(","),t=(a[0]=parseFloat(a[0])*t,a[1]=parseFloat(a[1].slice(0,a[1].length-2))*t,r.setAttribute("transform",`scale(${a[0]}, ${a[1]})`),parseFloat(l.getAttribute("x").split("%")[0])+V(-20,20)),r=parseFloat(l.getAttribute("y").split("%")[0])+V(-20,20);t*=de,r*=de,l.setAttribute("x",t+"%"),l.setAttribute("y",r+"%"),l.classList.add("animating"),l.classList.add("dynamic_add"),o.appendChild(l),l.animate([{opacity:"0"},{opacity:"1"}],{duration:f,iterations:1,fill:"forwards"}).onfinish=function(){l.classList.remove("animating")}}}function Y(e){var t;for(t of document.querySelectorAll("g."+e)){let e=t.animate([{opacity:1},{opacity:0}],{duration:5e3,iterations:1,fill:"forwards"});e.layer=t,e.onfinish=t=>{W=W.filter(e=>e.id!=t.target.layer.id),e.layer.remove()}}}async function Z(t=.5,l=5,o=2,r=!1){console.log("Changing order");var a=document.querySelectorAll(".group.layer"),a=Array.from(a).filter(e=>!e.classList.contains("special")),n=document.querySelector("#main-svg");let i=0;for(let e=2;e<a.length&&!(i>=o);e+=2)T()>1-t&&(_([a[e],a[e+1]],l,e=>{e[0].insertBefore(e[2],e[3]),e[0].insertBefore(e[1],e[2])},[n,a[e],a[e+1],a[0]]),i+=1,r)&&await new Promise(e=>setTimeout(e,1e3*V(3,6)));setTimeout(function(){var l=[],o=document.querySelectorAll(".group.layer");for(let t=0;t<o.length;t++)for(let e=0;e<W.length;e++)if(o[t].getAttribute("class").includes(W[e].id)){l.push(W[e]);break}W=l},2*l*1e3)}async function ze(l=5,t="both",o=4,r=!1,a=!1){console.log("Changing positions and paths");for(let e=0;e<W.length;e++){var n=W[e];if(!("both"!=t&t!=n.type)){var i=g.querySelector(".group."+n.id);if(null==i)n.delete=!0;else{var s,c,f,u=i.querySelectorAll("svg");"cluster"==n.type&&te(s=We(ee(B),n.number_of_visible_shapes,V(n.clustering_density[0],n.clustering_density[1]),.5,[3,6],n.clustering_density));let t=0;for(let e=0;e<u.length&&!(t>=o);e++)if((!!r||T()>1-n.change_positions_chance)&!u[e].classList.contains("animating")){for(u[e].classList.add("animating"),f="cluster"==n.type?(c=s[e][0],s[e][1]):(c=V(n.coordinates[0][0],n.coordinates[0][1])/n.current_scale,V(n.coordinates[1][0],n.coordinates[1][1])/n.current_scale),Math.abs(n.current_x-c)<10&&(c=n.current_x+V(10,20)),Math.abs(n.current_y-f)<10&&(f=n.current_y+V(10,20)),n.current_x=c,n.current_y=f;;)if(ee(n.paths)!=n.current_path){n.current_path=ee(n.paths);break}_([u[e]],l,e=>{e[0].setAttributeNS(null,"x",e[1]+"%"),e[0].setAttributeNS(null,"y",e[2]+"%"),e[0].querySelector("path").setAttributeNS(null,"d",e[3])},[u[e],c,f,n.current_path]),a&&await new Promise(e=>setTimeout(e,1e3*Q(2,8))),t++}}}}W=W.filter(e=>1!=e.delete)}async function _(t,e,l,o,r=0){t=t.filter(e=>null!=e),0!=r&&await new Promise(e=>setTimeout(e,r));let a={duration:1e3*e,iterations:1,fill:"forwards"};for(let e=0;e<t.length;e++)t[e].animate({opacity:"0"},a);setTimeout(function(){l(o);for(let e=0;e<t.length;e++)t[e].animate({opacity:"1"},a),t[e].classList.remove("animating")},1e3*e)}function K(t,e="top"){var l,o=document.querySelector("#main-svg").querySelector("#defs"),r=ee(S.filter(e=>-1!=e.classes.indexOf(t))),a=ee(r.color_combinations_list).colors,n=`g-${r.id}-`+r.type,i=V(r.color_duration[0],r.color_duration[1]),s=Be(r.gradient_coordinates,n),c=(r.current_scale=V(r.scale[0],r.scale[1],.01),s.setAttributeNS(null,"class",`gradient ${r.type} `+r.id),x(0,a[0])),f=x(1,a[1]),u=C(a[0],i),a=C(a[1],i),d=(c.appendChild(u),f.appendChild(a),s.appendChild(c),s.appendChild(f),o.appendChild(s),document.createElementNS(N,"g"));d.setAttributeNS(null,"id",`g-${r.id}-`+r.type),d.setAttributeNS(null,"class",`layer group ${r.type} `+r.id),"cluster"==r.type&&(l=We(ee(B),r.number_of_visible_shapes,V(r.clustering_density[0],r.clustering_density[1]),.5,[3,6],r.clustering_density));for(let t=0;t<r.number_of_visible_shapes;t++){var p,_,g=`p-${r.id}-${r.type}-`+t,h=`s-${r.id}-${r.type}-`+t;let e=1;"plate"==r.type?(p=Q(r.coordinates[0][0],r.coordinates[0][1])/r.current_scale,_=Q(r.coordinates[1][0],r.coordinates[1][1])/r.current_scale,r.current_x=p,r.current_y=_,r.current_path=ee(r.paths,Ce)):(p=l[t][0],_=l[t][1],r.current_x=p,r.current_y=_,r.current_path=ee(r.paths,Ce),k.length&&(e=V(k[0],k[1],.01)));var m,y=document.createElementNS(N,"path"),b=(y.setAttributeNS(null,"transform",`scale(${r.current_scale*e}, ${r.current_scale*e})`),y.setAttributeNS(null,"d",r.current_path),y.setAttributeNS(null,"fill",`url(#${n})`),y.setAttributeNS(null,"id",g),y.setAttributeNS(null,"class",`layer path ${r.type} ${r.id} special`),document.createElementNS(N,"svg"));b.setAttributeNS(null,"x",p+"%"),b.setAttributeNS(null,"y",_+"%"),b.setAttributeNS(null,"transform-origin","center"),b.setAttributeNS(null,"id",h),b.setAttributeNS(null,"class",`layer svg ${r.type} ${r.id} special`);for(m of r.classes)b.classList.add(m),d.classList.add(m);b.appendChild(y),d.appendChild(b)}d.setAttribute("initial_number_of_shapes",r.number_of_visible_shapes),d.animate([{opacity:"0"},{opacity:"1"}],{duration:ne,iterations:1,fill:"forwards"}),"top"==e?(i=document.querySelectorAll(".group"))[i.length-1].after(d):document.querySelector(".group").before(d)}function x(e,t){var l=document.createElementNS(N,"stop");return l.setAttributeNS(null,"offset",e),l.setAttributeNS(null,"stop-color",t),l}function C(e,t){var l=document.createElementNS(N,"animate");return l.setAttributeNS(null,"attributeName","stop-color"),l.setAttributeNS(null,"values",e),l.setAttributeNS(null,"dur",t+"s"),l.setAttributeNS(null,"repeatCount","indefinite"),l.setAttributeNS(null,"class","animation"),l.setAttributeNS(null,"original_duration",t),l}function Be(e,t){var l=document.createElementNS(N,"linearGradient");return l.setAttributeNS(null,"id",t),l.setAttributeNS(null,"x1",e[0]+"%"),l.setAttributeNS(null,"x2",e[2]+"%"),l.setAttributeNS(null,"y1",e[1]+"%"),l.setAttributeNS(null,"y2",e[3]+"%"),l}function T(){var e=1e4*Math.sin(u++);return e-Math.floor(e)}function Ge(){return(h+=s)%100/100}function Ue(){return(h=(1664525*h+s)%89652912)%101}function Q(e,t,l=!0){return e=Math.ceil(e),t=Math.floor(t),l?Math.floor(T()*(t+1-e)+e):Math.floor(Ge()*(t+1-e)+e)}function V(e,t,l=1,o=3,r=!0){r=r?T()*(t+l-e)+e:Ge()*(t+l-e)+e;return t=(t=o)||0,Math.floor(r*Math.pow(10,t))/Math.pow(10,t)}function ee(e,t=!0){return e[Q(0,e.length-1,t)]}function te(e,t=!0){let l=e.length,o;for(;0!=l;)o=t?Math.floor(T()*l):Math.floor(Ge()*l),l--,[e[l],e[o]]=[e[o],e[l]];return e}function We(e,t,l=0,o=0,r=[3,8],a=[1,3],n=0,i=[-200,300]){var s,c,f,u,d,p,_,g,h,m,y;if(0==e&&(c=A(45,95,40,10,l+10,t+1),f=A(30,55,40,20,l+20,t+1),u=A(40,0,40,30,l+30,t+1)),1==e&&(c=A(60,0,90,30,l+40,t+1),f=A(20,40,20,40,l+20,t+1),u=A(40,70,100,50,l+30,t+1)),5==e&&(u=A(10,5,5,10,l+10,t+1),c=A(20,10,1,50,l+50,t+1),f=A(30,30,-5,20,l+20,t+1)),3==e&&(u=A(90,0,160,0,l+20,t+1),f=A(50,50,160,0,l+30,t+1),c=A(10,70,160,0,l+40,t+1)),6==e&&(c=A(50,50,10,10,l+30,t+1),f=A(50,20,20,10,l+5,t+1),u=A(50,50,30,10,l+10,t+1)),2==e&&(c=A(0,10,20,10,l+5,t+1),f=A(80,40,10,20,l+10,t+1),u=A(90,30,40,30,l+30,t+1)),4==e){for(s=[],_=t/100,S=0;S<t;S++)d=b=S/_,d+=V(-(p=S|b&d)%10,p%10)+Math.sin(b)*p%30,p+=V(-S%10,S%10),s.push({x:d%110,y:p%110});u=f=c=s}7==e&&(c=A(95,30,-40,13,l+10,2*t),f=A(90,40,-35,20,l+20,t+1),u=A(80,50,-30,30,l+30,t+1)),8==e&&(c=A(60,50,-10,10,l+10,t+1),f=A(70,50,10,20,l+20,t+1),u=A(80,50,20,30,l+30,t+1)),9==e&&(c=A(5,40,.1,2,l+30,t+1),f=A(40,50,.3,2,l+10,t+1),u=A(60,45,.3,2,l+40,t+1)),10==e&&(c=A(3,10,-5,20,l+10,t+1),f=A(10,80,-10,20,l+20,t+1),u=A(80,20,-20,10,l+30,t+1)),11==e&&(c=A(15,10,-5,30,l+40,t+1),f=A(50,80,-10,26,l+30,t+1),u=A(80,40,-10,15,l+20,t+1)),g=[],s=(s=(s=c.filter(e=>0<e.x&e.x<100&0<e.y&e.y<101)).concat(f.filter(e=>0<e.x&e.x<100&0<e.y&e.y<101))).concat(u.filter(e=>0<e.x&e.x<100&0<e.y&e.y<101));for(let e=0;e<t;e++)g.push(ee(s));if(0<o)for(h=!1,S=y=m=0;S<g.length;S++)h?(S<y&&(g[S].x=g[m].x+V(-_,_),g[S].y=g[m].y+V(-_,_)),y<S&&(h=!1)):T()>o&&(h=!0,y=(m=S)+Q(r),_=V(a[0],a[1]));for(var v=[],S=0;S<g.length;S++)g[S].x<i[0]|g[S].x>i[1]&&(g[S].x=V(0,100,3)),g[S].y<i[0]|g[S].y>i[1]&&(g[S].y=V(0,100,3)),0<n&&T()>1-n&&(g[S].x=V(0,100,3),g[S].y=V(0,100,3)),v.push([g[S].x,g[S].y]);return v}function A(t,l,e,o,r,a){var n=Math.tan(e),i=Math.cos(e)*o,s=Math.sin(e)*o,c=[];for(let e=0;e<a;e++){var f=(T()-.5)*r,u=(T()-.5)*r,f=t+i+f;c.push({x:f,y:l+n*(f-t)+s+u})}return c}function i(e){try{return paths[e].slice(1,paths[e].length-1)}catch{var t=ee(Object.keys(paths));return console.log(e,"not found in paths using: ",t),paths[t].slice(1,paths[t].length-1)}}function Xe(e){var l=["LS - range","LS - splash","LS - plane","LS - streetlight","LS - glass","LS - left","LS - right","LS - map","LS - fracture","LS - liquid","LS - mosaic","LS - cumulus","S - recall fragment","LS - pointer","LS - cliff","LS - hill","LS - city","LS - sign","S - ship","LS - plus","S - recall flock","S - bug","LS - honeycomb","L - ice large","LS - path","S - footprint small","LS - planet","LS - logo","LS - multiplier","S - fragment","LS - stratus","S - flock","LS - river","S - candle","L - girder","L - elevation","L - urban","L - plan","L - floor","L - ruin","L - corridor","L - wall ","L - pie chart","L - house","L - pod","L - ceiling","L - window displaced","L - modern","L - blueprint","L - road","L - bell curve","L - beam thick","L - perspective","L - flame","L - window pane","L - window poly","L - window frame","L - frame","L - future","L - body","L - beam medium","L - head","L - rural","L - beam thin","L - ripple","L - brain","L - flame high","L - foothill","L - mnemonic","L - jet","L - mountain","L - rockies","L - fingerprint","L - haze","L - skeleton","L - skyline","L - comic","L - ribbon","L - wave","L - footprint large"],o=[14,40,43,2,41,34,35,37,38,39,23,11,42,36,3],r=[5,5,6,7,7,10,10,10,10,10,15,15,17,18,20],a=[2,7,0,5,6,1,4,3],n=[7,7,8,10,10,12,15,20],i=[54,44,48,53,6,5,7,0,52,45,1,51,46,47,49,4,10,50,13],s=[4,5,6,6,6,7,7,8,10,12,12,12,14,15,15,15,20,20,20],f=[12,14,8,9,15,11,16,10,13],u=[4,5,10,10,10,15,15,20,20],d=[8,66,59,60,9,63,64,15,62,55,22,16,65,56,61,57,19,26,58],p=[7,7,8,9,10,10,10,11,12,15,15,15,16,18,18,20,20,20,25],_=[20,21,18,17,24,22,23,19,25],g=[2,3,4,10,10,15,15,20,20],h=[71,67,17,72,24,75,78,32,70,79,69,73,77,27,76,74,68,28,30],m=[6,7,7,7,9,10,10,11,12,12,13,15,15,16,16,17,18,20,20],y=[27,32,26,28,30,31,29,33],b=[10,10,20,20,20,20,25,27],v=[6,71,5,7,8,67,17,0,59,24,52,9,64,75,78,15,32,45,1,62,70,69,11,49,4,22,16,73,65,27,76,74,61,68,3,10,13,19,26,28,30,58],S=[6,6,7,7,7,7,7,8,8,9,10,10,10,10,10,11,11,12,12,12,12,13,15,15,15,15,15,15,16,16,16,17,18,18,20,20,20,20,20,20,20,25],A=[21,18,14,2,7,0,5,6,8,9,15,17,24,27,32,1,4,11,16,22,3,10,13,19,26,28,30,31,29,33],w=[3,4,5,7,7,8,10,10,10,10,10,10,10,10,10,12,15,15,15,15,20,20,20,20,20,20,20,20,25,27],t=[1,8,16,4,2,3],L=[5,5,5,10,20,50],N=["rhodium","palladium","vegas","platinum","ipanema","malibu","venicebeach","cannes","maldives","dusk","sunset","mist","southbeach","night","ibiza","dawn","goldenhour"],q=[3,4,4,5,5,5,5,5,6,7,7,8,10,12,20,30,40];if("number_of_colors"==e){for(let e=0;e<300;e++)for(let e=0;e<t.length;e++)if(Ue()>100-L[e])return t[e];return 2}if("layer_paths"==e){var k=[],x=["regular","hodl","milestone"];for(let t=0;t<x.length;t++)for(let e=0;e<8;e++){"regular"==x[t]?0==e?(C=o,T=r):1==e?(C=a,T=n):2==e?(C=i,T=s):3==e?(C=f,T=u):4==e?(C=d,T=p):5==e?(C=_,T=g):6==e?(C=h,T=m):7==e&&(C=y,T=b):"hodl"==x[t]?(C=v,T=S):"milestone"==x[t]&&(C=A,T=w);for(var C,T,M=300;0<M;)for(let e=0;e<T.length;e++){M--;var $=Ue(),E=l[C[e]];if($>100-T[e]&&!k.includes(E)){M=0;break}}k.push(E)}return k}if("color_names"==e){var j=[];for(let e=0;e<J;e++){let t=300;for(;0<t;){t--;for(let e=0;e<q.length;e++)if(c=N[e],Ue()>100-q[e]&&!j.includes(c)){t=0;break}}j.push(c)}return j}}function le(t,l,o){if(o<=t[0])return l[0];if(o>=t[t.length-1])return l[l.length-1];for(let e=0;e<l.length-1;e++)if(o>=t[e]&o<t[e+1])return l[e]}function Ye(e){return null!=e&&e==e}function j(e){e=new Date(1e3*e);return e.getFullYear()+`-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)} ${("0"+e.getHours()).slice(-2)}:${("0"+e.getMinutes()).slice(-2)}:`+("0"+e.getSeconds()).slice(-2)}function Ze(e,t,l=!0){e*={years:31536e3,months:2592e3,hours:3600,minutes:60}[t];return l?Math.round(e):e}function Ke(e,t,l){return(t-e)/Ze(1,l,!1)}function Qe(e,t){var l=function(t){let l=0;for(let e=1;e<t.length;e++)l+=Math.abs(t[e]-t[e-1]);return l/(t.length-1)}(t),e=(e-t[t.length-1])/l-1;return null===e||isNaN(e)?0:e}async function Ve(){var e=I(D((await(await fetch(v,{method:"POST",body:JSON.stringify({method:"eth_call",params:[{to:w,data:L},"latest"],id:2,jsonrpc:"2.0"})})).json()).result),[1,200,1,200,1,200,200]);console.log("contract_data:",e),e[0];let t=e[1];e[2];let l=e[3];var o=e[4];let r=H(e[5]),a=H(e[6]);e=I(D((await(await fetch(v,{method:"POST",body:JSON.stringify({method:"eth_call",params:[{to:w,data:function(e){{if("string"==typeof e)return e=/^0x/i.test(e)?e:"0x"+e;if("number"==typeof e)return"0x"+e.toString(16);throw new Error("Unsupported value type: "+typeof e)}}(M+function(e){let t=e.toString(16);return 0<(e=64-t.length)&&(e="0".repeat(e),t=e+t),t}(P))},"latest"],id:2,jsonrpc:"2.0"})})).json()).result),[1,200,1,1,1,1]);console.log("token_data:",e),e[0][0];let n=e[1];var i,s,c,f,u=e[2][0],d=(e[3][0],e[4][0]),e=e[5][0],p=(new Date).getTime()/1e3;r=r.filter(e=>0!=e[0]),a=a.filter(e=>0!=e[0]),l=l.filter(e=>0!=e),t=t.filter(e=>0!=e),n=n.filter(e=>0!=e),console.log("--------------","Generated data","--------------"),console.log("\nTransfer timestamps");for(i of l)console.log(j(i));console.log("\nApproval timestamps");for(s of t)console.log(j(s));console.log("\nETH Recept");for(c of r)console.log(j(c[0],c[1]));console.log("\nWETH Recept");for(f of a)console.log(j(f[0],f[1]));console.log("\nHolder count:",o),console.log("token_mint_timestamp:",u),console.log("wallet_balance:",d),console.log("number_of_hodl_layers:",e),r.sort((e,t)=>e[0]-t[0]),a.sort((e,t)=>e[0]-t[0]);r.map(e=>e[1]),a.map(e=>e[1]);l.sort(),t.sort(),n.sort();let _=r.concat(a);_.sort((e,t)=>e[0]-t[0]),_=_.map(e=>e[1]);var g,h,m=[],y=[];for(g of r){m.push(g[0]);for(let e=n.length-1;0<=e;e--)if(n[e]==g[0]){y.push(n[e]);break}}for(h of a){for(let e=l.length-1;0<=e;e--)if(l[e]<h[0]){m.push(l[e]);break}for(let e=n.length-1;0<=e;e--)if(n[e]<h[0]){y.push(n[e]);break}}return[p,l,t,m,_,o,n,y,d,u,e]}async function et(t,e,l,o,r,a,n,i,s,c,f){var u=Ze(3,"months");e=e.filter(e=>0!=e).slice(-5),l=l.filter(e=>0!=e).slice(-5),o=o.filter(e=>0!=e).slice(-5),n=n.filter(e=>0!=e).slice(-5),i=i.filter(e=>0!=e).slice(-10),r=r.filter(e=>0!=e).slice(-5);let d=Array.from(l),p=Array.from(o),_=Array.from(e),g=Array.from(r);e.length<=1&&(_=[$].concat(e)),n.length<=1&&(n=[$].concat(n)),l.length<=1&&(d=[$].concat(l)),o.length<=1&&(p=[$].concat(o)),r.length<=1&&(g=[1e18*O].concat(r));var n=Qe(t,0<e.length?e:_),h=Qe(t,0<l.length?l:d),m=Qe(t,0<o.length?o:p);let y=0;1<g.length&&(y=g[g.length-1]/(g.slice(0,-1).reduce((e,t)=>e+t)/(g.length-1))-1);var b=Qe(t,e.concat(d).sort().slice(-5));let v=Ke(o[o.length-1],t,"minutes")<10,S=Ke(e[e.length-1],t,"minutes")<10,A=Ke(l[l.length-1],t,"minutes")<10;var a=.51<=a/F,w=!a;let L=-1,N=0;for(let e=0;e<R.length;e++){var q=t-R[e];0<q&&q<86400&&(L=e,N=R[e]+86400)}s-=1;let k=i;var x,C,T,M,i=1<(k=i.length<2?[$].concat(i):k).length&&t-k[k.length-1]<u&&k[k.length-1]-k[k.length-2]<u;console.log("--------------","Processed data","--------------"),console.log("\nCurrent timestamp:",j(t)),console.log("\nTransfer timestamps");for(x of e)console.log(j(x));console.log("\nApproval timestamps");for(C of l)console.log(j(C));console.log("\nSale timestamps");for(T of o)console.log(j(T));console.log("\nRoyalty");for(M of r)console.log(M);console.log("--------------","Calculated traits","--------------"),console.log("transactions_delta:",n),console.log("approvals_delta:",h),console.log("sales_delta:",m),console.log("royalty_delta:",y),console.log("contract_activity_delta:",b),console.log("send_triggered:",S),console.log("approval_triggered:",A),console.log("high_holder_distribution_triggered:",a),console.log("low_holder_distribution:",a),console.log("wallet_holds_multiple_layers_unlocked:",s),console.log("number_of_hodl_layers:",f),console.log("contract_milestone_layers:",L),console.log("token_flipped:",i),a&&document.querySelectorAll("g,.frame")[0].classList.contains("layer")&&(console.log("Triggering high_holder_distribution update"),await E("high_holder_distribution")),w&&document.querySelectorAll("g,.frame")[0].classList.contains("layer")&&(console.log("Triggering low_holder_distribution update"),await E("low_holder_distribution")),-1<L&&(console.log("Setting total_transactions_layers to",L),E("contract_milestone",L),t>N)&&await E("stop_contract_milestone"),s!=U&&(console.log("Setting number_of_unlocked_layers_on_startup to",s),U=s),i?(console.log("Triggering flipped_x_times update"),await E("flipped_x_times")):await E("remove_flip_layer"),f>document.querySelectorAll(".hodl").length&&(console.log("Triggering time_hodld update",f),E("time_hodld",f)),Ye(n)&&(u=Fe(m,le(G.royalty[0],G.royalty[1],y)),r=Fe(n,le(G.contract_activity[0],G.contract_activity[1],-1*b)),a=Fe(n,le(G.clustering_mode[0],G.clustering_mode[1],-1*n)),w=Fe(h,le(G.approvals[0],G.approvals[1],-1*h)),console.log("Adjusting royalty"),await E("tier_royalty",u),console.log("Adjusting contract activity"),await E("tier_contract_activity",r),console.log("Adjusting clustering mode"),await E("tier_sends",a),console.log("Adjusting approvals"),await E("tier_approvals",w)),v&&S&&(o[o.length-1]<e[e.length-1]?v=!1:S=!1),S&&A&&(l[l.length-1]<e[e.length-1]?A=!1:S=!1),v&&A&&(o[o.length-1]<l[l.length-1]?v=!1:A=!1),v?(console.log("Triggering sale update"),await E("sale")):await E("stop_sale"),S?(console.log("Triggering send update"),await E("send")):await E("stop_send"),A?(console.log("Triggering approval update"),await E("approval")):await E("stop_approval")}window.onkeydown=function(e){71===e.keyCode?(d=document.querySelector("#main-svg")).insertAdjacentHTML("afterend",`<div id="prompt-container" class="prompt-container"><p>Change node URL:</p><input id="prompt" class="prompt" value="${v}"/></div>`):13===e.keyCode&&(p=document.getElementById("prompt"),v=p.value,console.log(v),(pc=document.getElementById("prompt-container")).remove())};