var e=(new Date).getTime();let f=(new Date).getTime(),w="http://www.w3.org/2000/svg",g=document.querySelector("#main-svg");let v="https://eth-goerli.g.alchemy.com/v2/ZXbjH0LyjJq69t099ce8gRs494wOaqMq";function K(e){var t=e.slice(2),l=[];for(let e=0;e<t.length;e+=64){var o=t.slice(e,e+64),o=parseInt(o,16);l.push(o)}return l}function Q(t){var l=[];for(let e=0;e<t.length;e+=2)l.push(t.slice(e,e+2));return l}function V(t,l){var e,o=[];let r=0;for(let e=0;e<l.length;e++){var a=l[e],n=t.slice(r,r+a);o.push(n),r+=a}return r<t.length&&(e=t.slice(r),o.push(e)),o}let ee=Je("number_of_colors");var h,t=Je("color_names"),m=(console.log("Selected color names:",t),{goldenhour:{chance:.1,colors:["#ff1249;#6b6cff;#c80085;#ffe112;#ff1249","#6b6cff;#ff1249;#ffe112;#c80085;#6b6cff"]},dawn:{chance:.1,colors:["#ff4637;#83a9ff;#e91278;#fff149;#ff4637","#9ab0fe;#ff5252;#fffb57;#f23662;#9ab0fe"]},ibiza:{chance:.1,colors:["#b2004e;#573fcd;#990086;#ec7d1a;#b2004e","#442dbe;#c2045c;#d26b0a;#a80094;#442dbe"]},southbeach:{chance:.1,colors:["#f72585;#4cc9f0;#11a7d4;#fa6bab;#f72585","#4cc9f0;#f72585;#fa6bab;#11a7d4;#4cc9f0"]},mist:{chance:.1,colors:["#ff6494;#98e8ed;#ffe6ff;#80ffff;#ff6494","#9affff;#ff6277;#80ffff;#ffe6ff;#9affff"]},dusk:{chance:.1,colors:["#c4107c;#1d5fb6;#a50d68;#4d88ff;#c4107c","#5981d9;#f042aa;#2f62d0;#b40d85;#5981d9"]},platinum:{chance:.1,colors:["#080808;#828282;#d2d2d2;#202020;#7d7d7d;#080808","#efefef;#353535;#161616;#b2b2b2;#383838;#f5f5f5"]},palladium:{chance:.1,colors:["#f5f5f5;#808080;#666666;#f2f2f2;#787878;#f5f5f5","#4d4d4d;#949494;#ffffff;#595959;#939393;#4d4d4d"]},rhodium:{chance:.1,colors:["#000000;#4f4f4f;#818181;#000000;#515151;#000000","#929292;#000000;#0f0f0f;#898989;#000000;#929292"]},ipanema:{chance:.1,colors:["#a7c3ff;#ff0066;#ffa9bd;#ff0066;#a7c3ff","#ff9ea1;#0000ff;#68b6ff;#0000ff;#ff9ea1"]},malibu:{chance:.1,colors:["#c0d5ff;#ff6666;#ffe1db;#150070;#c0d5ff","#fee3dc;#ff66ff;#c9e9ff;#ff66ff;#fee3dc"]},night:{chance:.1,colors:["#0000ff;#000080;#ff2a5b;#000080;#0000ff","#dd3a3f;#03000f;#0062be;#03000f;#dd3a3f"]},maldives:{chance:.1,colors:["#ffff99;#ff668a;#ffff33;#ffe6f2;#ffff99","#ff668a;#ffff99;#ffe6f2;#ffff33;#ff668a"]},venicebeach:{chance:.1,colors:["#ff66ff;#ccffff;#ffbb33;#ffff66;#ff66ff;","#ffbb33;#ff66ff;#ffff66;#ccffff;#ffbb33"]},sunset:{chance:.1,colors:["#809fff;#ff4d4d;#4d79ff;#ff7733;#809fff","#ff5500;#809fff;#ff4d4d;#4d79ff;#ff5500"]},vegas:{chance:.1,colors:["#3366ff;#ff99ff;#ff0066;#ff8533;#3366ff","#ffccff;#ff0066;#000099;#3333ff;#ffccff"]},cannes:{chance:.1,colors:["#ffe112;#ff668a;#ffff80;#ff1a4f;#ffe112","#ff668a;#ffe112;#ff1a4f;#ffff80;#ff668a"]},special_sends:{chance:.1,colors:["#ffb380;#e60036;#ffcc00;#ff003c;#ffb380","#e60036;#ffb380;#cc0030;#ff6600;#e60036"]},special_sales:{chance:.1,colors:["#ffff33;#ff0066;#ffff00;#ff6600;#ffff33","#ff4d4d;#ffe112;#e6005c;#ff6666;#ff4d4d"]},special_approval:{chance:.1,colors:["#4d4dff;#98e8ed;#0039e6;#80ffff;#4d4dff","#ccffff;#b3f0ff;#80ffff;#3366ff;#ccffff"]}});let L=[];for(h of t)L.push(m[h]);console.log("Selected colors: ",t);let y=[50,80],N=[];let D={increased:[7,3,1],decreased:[0,4,8],neutral:[6,2,10,5,9,11]},H=[11,11];let l=15,te=e,le=5;let c=5e3;let oe=5e3,re=1,ae=80,ne=2,ie=3e3,se=[.7,.8],ce=1.3,I={royalty:[[-.5,-.3,-.1,0,.1,.7,1],[-3,-2,-1,0,1,2,3]],contract_activity:[[-.5,-.3,-.1,0,.1,.7,1],[-3,-2,-1,0,1,2,3]],clustering_mode:[[-.5,-.3,-.1,0,.1,.7,1],[-3,-2,-1,0,1,2,3]],approvals:[[-.5,-.3,-.1,0,.1,.7,1],[-3,-2,-1,0,1,2,3]]},fe=1,ue=5,de=[L[L.length-1]],pe=3,_e=["#ff944d;#e60036;#ff884d;#ff003c;#ff944d","#e60036;#ff944d;#cc0030;#ff6600;#e60036","#e60036;#ff944d;#cc0030;#ff6600;#e60036","#ff944d;#e60036;#ff884d;#ff003c;#ff944d"],ge=["#ffe112;#ff4d4d;#ffff66;#ff9933;#ffe112","#e67300;#ffe112;#e65c00;#ffff66;#e67300","#e67300;#ffe112;#e65c00;#ffff66;#e67300","#ffe112;#ff4d4d;#ffff66;#ff9933;#ffe112"],he=["#9affff;#4d4dff;#80ffff;#3366ff;#9affff","#4d4dff;#98e8ed;#3366ff;#80ffff;#4d4dff","#4d4dff;#98e8ed;#3366ff;#80ffff;#4d4dff","#9affff;#4d4dff;#80ffff;#3366ff;#9affff"],me=["#ffff00;#ff0000;#ffff00;#ff0000;#ffffff;#0000ff;#ffff00","#ff0000;#ffff00;#0000ff;#ffff00;#ff0000;#ffffff;#ff0000","#ff0000;#ffff00;#0000ff;#ffff00;#ff0000;#ffffff;#ff0000","#ffff00;#ff0000;#ffff00;#ff0000;#ffffff;#0000ff;#ffff00"];var ye,be,ve,Se,t=Je("layer_paths"),e=t.slice(0,8),Ae=t.slice(8,16),we=t.slice(16,24);console.log("Selected layer paths:",e),console.log("Selected hodl layer paths:",Ae),console.log("Selected contract milestone layer paths:",we);let z=[{id:"lp0",type:"plate",paths:i(e[0]),paths_group_name:e[0],color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.7,1],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:L,clustering_density:[0,0],gradient_coordinates:[0,0,100,0]},{id:"lc0",type:"cluster",paths:i(e[1]),paths_group_name:e[1],color_duration:[30,60],coordinates:[[-30,30],[-10,10]],scale:[.06,.1],number_of_visible_shapes:17,change_positions_chance:.5,color_combinations_list:L,clustering_density:[7,9],gradient_coordinates:[0,0,100,0]},{id:"lp1",type:"plate",paths:i(e[2]),paths_group_name:e[2],color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.6,1],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:L,clustering_density:[0,0],gradient_coordinates:[0,0,100,0]},{id:"lc1",type:"cluster",paths:i(e[3]),paths_group_name:e[3],color_duration:[30,60],coordinates:[[-10,10],[-30,30]],scale:[.06,.1],number_of_visible_shapes:17,change_positions_chance:.5,color_combinations_list:L,clustering_density:[7,9],gradient_coordinates:[0,0,100,0]},{id:"lp2",type:"plate",paths:i(e[4]),paths_group_name:e[4],color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.5,.9],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:L,clustering_density:[0,0],gradient_coordinates:[0,0,100,0]},{id:"lc2",type:"cluster",paths:i(e[5]),paths_group_name:e[5],color_duration:[30,60],coordinates:[[-10,80],[-10,30]],scale:[.06,.1],number_of_visible_shapes:17,change_positions_chance:.5,color_combinations_list:L,clustering_density:[7,9],gradient_coordinates:[0,0,100,0]},{id:"lp3",type:"plate",paths:i(e[6]),paths_group_name:e[6],color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.4,.9],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:L,clustering_density:[0,0],gradient_coordinates:[0,0,100,0]},{id:"lc3",type:"cluster",paths:i(e[7]),paths_group_name:e[7],color_duration:[30,60],coordinates:[[-30,10],[-30,50]],scale:[.06,.1],number_of_visible_shapes:17,change_positions_chance:.5,color_combinations_list:L,clustering_density:[7,9],gradient_coordinates:[0,0,100,0]}],S=[{id:"s_lp0",type:"plate",paths:i("L - send"),paths_group_name:"L - send",color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.5,1],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:[m.special_sends],clustering_density:[0,0],gradient_coordinates:[0,0,100,0],classes:["special","send"]},{id:"s_lp1",type:"plate",paths:i("L - sale"),paths_group_name:"L - sale",color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.7,1],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:[m.special_sales],clustering_density:[0,0],gradient_coordinates:[0,0,100,0],classes:["special","sale"]},{id:"s_lp2",type:"plate",paths:i("L - approval"),paths_group_name:"L - approval",color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.45,.75],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:[m.special_approval],clustering_density:[0,0],gradient_coordinates:[0,0,100,0],classes:["special","approval"]},{id:"s_lp3",type:"plate",paths:i("L - flip"),paths_group_name:"L - flip",color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.6,1],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:L,clustering_density:[0,0],gradient_coordinates:[0,0,100,0],classes:["special","flip"]}];for(let e=0;e<7;e++){var Le=Ae[e];S.push({id:"hodl_lp_"+e,type:"plate",paths:i(Le),paths_group_name:Le,color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.5,.8],number_of_visible_shapes:1,change_positions_chance:.5,color_combinations_list:L,clustering_density:[0,0],gradient_coordinates:[0,0,100,0],classes:["special","hodl","time_hodld_"+e]})}for(let e=0;e<7;e++)selected_path=we[e],S.push({id:"milestone_lc_"+e,type:"cluster",paths:i(selected_path),paths_group_name:selected_path,color_duration:[30,60],coordinates:[[-10,10],[-30,30]],scale:[.06,.1],number_of_visible_shapes:10,change_positions_chance:.5,color_combinations_list:L,clustering_density:[7,9],gradient_coordinates:[0,0,100,0],classes:["special","contract_milestones","milestone_"+e]});let Ne={4:{0:{1:2,2:2,3:2,4:2,5:0,6:0,7:0,8:0,9:0,10:0},1:{1:2,2:3,3:2,4:3,5:0,6:0,7:0,8:0,9:0,10:0},2:{1:3,2:3,3:3,4:3,5:0,6:0,7:0,8:0,9:0,10:0},3:{1:3,2:3,3:4,4:4,5:0,6:0,7:0,8:0,9:0,10:0},"-3":{1:1,2:0,3:0,4:1,5:0,6:0,7:0,8:0,9:0,10:0},"-2":{1:0,2:1,3:1,4:1,5:0,6:0,7:0,8:0,9:0,10:0},"-1":{1:2,2:1,3:2,4:1,5:0,6:0,7:0,8:0,9:0,10:0}},5:{0:{1:2,2:2,3:2,4:2,5:1,6:0,7:0,8:0,9:0,10:0},1:{1:2,2:3,3:2,4:3,5:2,6:0,7:0,8:0,9:0,10:0},2:{1:3,2:3,3:3,4:3,5:2,6:0,7:0,8:0,9:0,10:0},3:{1:3,2:3,3:4,4:4,5:3,6:0,7:0,8:0,9:0,10:0},"-3":{1:1,2:0,3:0,4:1,5:1,6:0,7:0,8:0,9:0,10:0},"-2":{1:0,2:1,3:1,4:1,5:1,6:0,7:0,8:0,9:0,10:0},"-1":{1:2,2:1,3:2,4:1,5:1,6:0,7:0,8:0,9:0,10:0}},6:{0:{1:2,2:2,3:2,4:2,5:1,6:1,7:0,8:0,9:0,10:0},1:{1:2,2:3,3:2,4:3,5:2,6:1,7:0,8:0,9:0,10:0},2:{1:3,2:3,3:3,4:3,5:2,6:2,7:0,8:0,9:0,10:0},3:{1:3,2:3,3:4,4:4,5:3,6:2,7:0,8:0,9:0,10:0},"-3":{1:1,2:0,3:0,4:1,5:0,6:1,7:0,8:0,9:0,10:0},"-2":{1:0,2:1,3:1,4:1,5:1,6:0,7:0,8:0,9:0,10:0},"-1":{1:2,2:1,3:2,4:1,5:1,6:1,7:0,8:0,9:0,10:0}},7:{0:{1:2,2:2,3:2,4:2,5:1,6:1,7:2,8:0,9:0,10:0},1:{1:2,2:3,3:2,4:3,5:2,6:1,7:2,8:0,9:0,10:0},2:{1:3,2:3,3:3,4:3,5:2,6:2,7:3,8:0,9:0,10:0},3:{1:3,2:3,3:4,4:4,5:3,6:2,7:3,8:0,9:0,10:0},"-3":{1:1,2:0,3:0,4:1,5:1,6:1,7:0,8:0,9:0,10:0},"-2":{1:0,2:1,3:1,4:1,5:1,6:0,7:1,8:0,9:0,10:0},"-1":{1:2,2:1,3:2,4:1,5:1,6:1,7:2,8:0,9:0,10:0}},8:{0:{1:2,2:2,3:2,4:2,5:1,6:1,7:2,8:1,9:0,10:0},1:{1:2,2:3,3:2,4:3,5:2,6:1,7:2,8:2,9:0,10:0},2:{1:3,2:3,3:3,4:3,5:2,6:2,7:3,8:2,9:0,10:0},3:{1:3,2:3,3:4,4:4,5:3,6:2,7:3,8:2,9:0,10:0},"-3":{1:1,2:0,3:0,4:1,5:1,6:1,7:0,8:1,9:0,10:0},"-2":{1:0,2:1,3:1,4:1,5:1,6:0,7:1,8:1,9:0,10:0},"-1":{1:2,2:1,3:2,4:1,5:1,6:1,7:2,8:1,9:0,10:0}},9:{0:{1:2,2:2,3:2,4:2,5:1,6:1,7:2,8:1,9:1,10:0},1:{1:2,2:3,3:2,4:3,5:2,6:1,7:2,8:2,9:2,10:0},2:{1:3,2:3,3:3,4:3,5:2,6:2,7:3,8:2,9:2,10:0},4:{1:3,2:3,3:4,4:4,5:3,6:2,7:3,8:2,9:3,10:0},"-3":{1:1,2:0,3:0,4:1,5:1,6:1,7:0,8:1,9:1,10:0},"-2":{1:0,2:1,3:1,4:1,5:1,6:0,7:1,8:1,9:1,10:0},"-1":{1:2,2:1,3:2,4:1,5:1,6:1,7:2,8:1,9:1,10:0}},10:{0:{1:2,2:2,3:2,4:2,5:1,6:1,7:2,8:2,9:1,10:1},1:{1:2,2:3,3:2,4:3,5:2,6:2,7:2,8:3,9:2,10:2},2:{1:3,2:3,3:3,4:3,5:2,6:2,7:3,8:2,9:3,10:3},3:{1:4,2:3,3:4,4:4,5:3,6:2,7:3,8:2,9:4,10:3},"-3":{1:1,2:0,3:0,4:1,5:1,6:1,7:0,8:1,9:1,10:0},"-2":{1:0,2:1,3:1,4:1,5:1,6:0,7:1,8:1,9:1,10:1},"-1":{1:2,2:1,3:2,4:1,5:1,6:1,7:2,8:1,9:1,10:1}}};for(ye of S)ye.paths_unlocked=!1;for(be of z)be.paths_unlocked=!1;for(ve of z)if("plate"==ve.type){if(--pe<0)break;ve.paths_unlocked=!0}for(Se of z)Se.classes=[];z.filter(e=>"plate"==e.type).length;let qe=!0;(new Date).getTime();var t=Y(Object.keys(paths),!1),ke=t.filter(e=>"L "==e.slice(0,2)),xe=t.filter(e=>"S "==e.slice(0,2)),Ce=t.filter(e=>"LS"==e.slice(0,2)),o=[];for(let e=0;e<5;e++)for(var Te of ke.concat(Ce))for(layer_name of paths[Te][0].split(","))if(layer_name=="plate layer "+(e+1))try{o[e].push(Te)}catch{o.push([]),o[e].push(Te)}var Me,r,a,n=[];for(let e=0;e<5;e++)for(var $e of xe.concat(Ce))for(layer_name of paths[$e][0].split(","))if(layer_name=="cluster layer "+(e+1))try{n[e].push($e)}catch{n.push([]),n[e].push($e)}for(let e=0;e<4;e++)o[e]=o[e].map(e=>({value:e,sort:Be()})).sort((e,t)=>e.sort-t.sort).map(({value:e})=>e),n[e]=n[e].map(e=>({value:e,sort:Be()})).sort((e,t)=>e.sort-t.sort).map(({value:e})=>e);e=document.querySelector("#main-svg"),(t=document.createElementNS(w,"defs")).setAttributeNS(null,"id","defs"),e.appendChild(t);{let e=document.querySelector("#main-svg"),t=X(y),l=Y(X(de).colors),o=e.querySelector("#defs"),r=ze([0,0,100,0],"gradient_bg"),a=x(0,"#000000"),n=x(1,"#000000"),i=C(l[0],t),s=C(l[1],t),c=(a.appendChild(i),n.appendChild(s),r.appendChild(a),r.appendChild(n),o.appendChild(r),r=ze([0,0,100,0],"gradient_bg_mirror"),a=x(0,"#000000"),n=x(1,"#000000"),i=C(l[1],t),s=C(l[0],t),a.appendChild(i),n.appendChild(s),r.appendChild(a),r.appendChild(n),o.appendChild(r),document.createElementNS(w,"svg")),f=(c.classList.add("background"),c.setAttributeNS(null,"width","100%"),c.setAttributeNS(null,"height","100%"),c.setAttributeNS(null,"x",0),c.setAttributeNS(null,"y",0),document.createElementNS(w,"rect"));f.setAttributeNS(null,"width","100%"),f.setAttributeNS(null,"height","100%"),f.setAttributeNS(null,"x",0),f.setAttributeNS(null,"y",0),f.setAttributeNS(null,"fill","url(#gradient_bg)"),f.setAttributeNS(null,"id","background"),c.appendChild(f),e.appendChild(c)}!function(t=-1,l="bottom"){var o=document.querySelector("#main-svg"),r=o.querySelector("#defs"),a=Y(Array.from(L));for(let e=0;e<z.length;e++)if(!(-1!=t&e!=t)){var n,i=z[e],s=("cluster"==i.type&&(s=z[e-1],T(),s.current_x,s.current_scale,W(i.coordinates[0][0],i.coordinates[0][1]),s.current_y,s.current_scale,W(i.coordinates[1][0],i.coordinates[1][1])),a[e%a.length].colors),c=`g-${i.id}-`+i.type,f=W(i.color_duration[0],i.color_duration[1]),u=(i.current_scale=W(i.scale[0],i.scale[1],.01),ze(i.gradient_coordinates,c)),d=(u.setAttributeNS(null,"class",`gradient ${i.type} `+i.id),x(0,s[0][0])),p=x(1,s[1][0]),_=C(s[0],f),f=C(s[1],f),g=(d.appendChild(_),p.appendChild(f),u.appendChild(d),u.appendChild(p),r.appendChild(u),document.createElementNS(w,"g"));g.setAttributeNS(null,"id",`g-${i.id}-${i.type}-`+e),g.setAttributeNS(null,"class",`layer group ${i.type} `+i.id),"cluster"==i.type&&(n=Ge(X(H),i.number_of_visible_shapes,W(i.clustering_density[0],i.clustering_density[1]),.5,[3,6],i.clustering_density));for(let t=0;t<i.number_of_visible_shapes;t++){var h,m,y=`p-${i.id}-${i.type}-`+t,b=`s-${i.id}-${i.type}-`+t;let e=1;"plate"==i.type?(h=U(i.coordinates[0][0],i.coordinates[0][1])/i.current_scale,m=U(i.coordinates[1][0],i.coordinates[1][1])/i.current_scale,i.current_x=h,i.current_y=m,i.current_path=X(i.paths,i.paths_unlocked)):(h=n[t][0],m=n[t][1],i.current_x=h,i.current_y=m,i.current_path=X(i.paths,i.paths_unlocked),N.length&&(e=W(N[0],N[1],.01)));var v,S=document.createElementNS(w,"path"),A=(S.setAttributeNS(null,"transform",`scale(${i.current_scale*e}, ${i.current_scale*e})`),S.setAttributeNS(null,"d",i.current_path),S.setAttributeNS(null,"fill",`url(#${c})`),S.setAttributeNS(null,"id",y),S.setAttributeNS(null,"class",`layer path ${i.type} `+i.id),document.createElementNS(w,"svg"));A.setAttributeNS(null,"x",h+"%"),A.setAttributeNS(null,"y",m+"%"),A.setAttributeNS(null,"transform-origin","center"),A.setAttributeNS(null,"id",b),A.setAttributeNS(null,"class",`layer svg ${i.type} `+i.id);for(v of i.classes)A.classList.add(v),g.classList.add(v);A.appendChild(S),g.appendChild(A)}if(g.setAttribute("initial_number_of_shapes",i.number_of_visible_shapes),-1!=t)return g.animate([{opacity:"0"},{opacity:"1"}],{duration:oe,iterations:1,fill:"forwards"}),"top"==l?(_=document.querySelectorAll(".group.plate"))[_.length-1].after(g):document.querySelector(".group.plate").before(g);o.appendChild(g)}}(),e=document.querySelector("#main-svg"),t=e.querySelector("#defs"),(Me=document.createElementNS(w,"mask")).setAttributeNS(null,"id","bg_border_clip_path"),(r=document.createElementNS(w,"rect")).setAttributeNS(null,"width","101%"),r.setAttributeNS(null,"height","101%"),r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y","0"),r.setAttributeNS(null,"fill","white"),(a=document.createElementNS(w,"rect")).setAttributeNS(null,"width","94%"),a.setAttributeNS(null,"height","95.3%"),a.setAttributeNS(null,"x","3%"),a.setAttributeNS(null,"y","2.5%"),a.setAttributeNS(null,"fill","black"),Me.appendChild(r),Me.appendChild(a),t.appendChild(Me),(r=document.createElementNS(w,"rect")).setAttributeNS(null,"width","100%"),r.setAttributeNS(null,"height","100%"),r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y","0"),r.setAttributeNS(null,"fill","url(#gradient_bg_mirror)"),r.setAttributeNS(null,"mask","url(#bg_border_clip_path)"),r.setAttributeNS(null,"class","frame"),e.appendChild(r);setTimeout(async function e(o,r=!1,a=10){let t=Y(Array.from(z).concat(S));for(var n of t)if("cluster"==n.type){let e=g.querySelector(".group."+n.id);if(null!=e){let l=e.querySelectorAll("svg");var i=Ge(X(H),l.length,W(n.clustering_density[0],n.clustering_density[1]),.5,[3,6],n.clustering_density);for(let t=0;t<l.length;t++)if(T()>1-n.change_positions_chance&&!l[t].classList.contains("animating")&&!l[t].classList.contains("removing")){l[t].classList.add("animating");var s=i[t][0],c=i[t][1];s<0&&(s+=U(1,10)),0<s&&(s-=U(1,10)),c<0&&(c+=U(1,10)),0<c&&(c-=U(1,10)),n.current_x=s,n.current_y=c,r&&(n.current_path=X(n.paths));let e=e=>{e[0].classList.contains("removing")?e[0].remove():(e[0].setAttributeNS(null,"x",e[1]+"%"),e[0].setAttributeNS(null,"y",e[2]+"%"),e[4]&&e[0].querySelector("path").setAttributeNS(null,"d",e[3]))};0==a?_([l[t]],o,e,[l[t],s,c,n.current_path,r]):setTimeout(_,1e3*U(0,a),[l[t]],o,e,[l[t],s,c,n.current_path,r])}}}0;setTimeout(e,5e3,5,r,a)},5e3,5,!0,5),setTimeout(async function e(o,r=!1,a=10){864e5<(new Date).getTime()-te&&(te=(new Date).getTime(),console.log("Reducing plate_shapes_update_time, current",l),--l,l=Math.max(l,5),le=l,console.log("New",l));let n=!1;let t=Y(Array.from(z).concat(S));for(var i of t){if("plate"==i.type){let e=g.querySelector(".group."+i.id);if(null==e)continue;let l=e.querySelectorAll("svg");for(let t=0;t<l.length;t++){if(T()>1-i.change_positions_chance&&!l[t].classList.contains("animating")&&!l[t].classList.contains("removing")){l[t].classList.add("animating"),Math.abs(i.current_x-s)<10&&(s=i.current_x+W(-20,20)),Math.abs(i.current_y-c)<10&&(c=i.current_y+W(-20,20));var s=W(i.coordinates[0][0],i.coordinates[0][1])/i.current_scale,c=W(i.coordinates[1][0],i.coordinates[1][1])/i.current_scale;i.current_x=s,i.current_y=c,r&&(i.current_path=X(i.paths));let e=e=>{e[0].classList.contains("removing")?e[0].remove():(e[0].setAttributeNS(null,"x",e[1]+"%"),e[0].setAttributeNS(null,"y",e[2]+"%"),e[4]&&e[0].querySelector("path").setAttributeNS(null,"d",e[3]))};0==a?_([l[t]],o,e,[l[t],s,c,i.current_path,r]):setTimeout(_,1e3*U(0,a),[l[t]],o,e,[l[t],s,c,i.current_path,r]),n=!0;break}if(n)break}if(n)break}if(n)break}0;setTimeout(e,1e3*l,le,r,a)},5e3,le,!0,5),async function e(){let t=await Ye();await Ze(...t);setTimeout(e,1e4)}();let Ee=(e,t)=>{var l;return 0!=t&&(l=t<0?-1:1,t=Math.abs(t),.33<=e&&--t,.66<=e&&(t-=2),.99<=e&&(t-=3),-0==(t=Math.max(0,t)*l))?0:t};async function k(e,r){if("send"==e){if(0<document.querySelectorAll(".sale").length&&(G("sale"),await B("special_frame_sale","special_background_sale")),0<document.querySelectorAll(".approval").length&&(G("approval"),await B("special_frame_approval","special_background_approval")),0<document.querySelectorAll(".send").length)return console.log("Send layer already exists"),void He(1,5,20,!0);0<document.querySelectorAll(".special_frame_contract_milestone").length&&await B("special_frame_contract_milestone","special_background_contract_milestone"),J("send"),Pe("cluster",1,2e4),await je(_e,"special_frame_send","special_background_send"),He(1,5,20,!0)}if("stop_send"==e&&(0<document.querySelectorAll(".send").length&&G("send"),0<document.querySelectorAll(".special_frame_send").length)&&await B("special_frame_send","special_background_send"),"sale"==e){if(0<document.querySelectorAll(".send").length&&(G("send"),await B("special_frame_send","special_background_send")),0<document.querySelectorAll(".approval").length&&(G("approval"),await B("special_frame_approval","special_background_approval")),0<document.querySelectorAll(".sale").length)return console.log("Sale layer already exists"),void await Ie(5,"plate",20,!0,!0);0<document.querySelectorAll(".special_frame_contract_milestone").length&&await B("special_frame_contract_milestone","special_background_contract_milestone"),J("sale"),Ie(5,"plate",20,!0,!0),await je(ge,"special_frame_sale","special_background_sale"),He(1,5,20,!0),Pe("cluster",1,2e4)}if("stop_sale"==e&&(0<document.querySelectorAll(".sale").length&&G("sale"),0<document.querySelectorAll(".special_frame_sale").length)&&await B("special_frame_sale","special_background_sale"),"approval"==e){if(0<document.querySelectorAll(".send").length&&(G("send"),await B("special_frame_send","special_background_send")),0<document.querySelectorAll(".sale").length&&(G("sale"),await B("special_frame_sale","special_background_sale")),0<document.querySelectorAll(".approval").length)return console.log("Approval layer already exists"),void await He(1,5,20,!0);0<document.querySelectorAll(".special_frame_contract_milestone").length&&await B("special_frame_contract_milestone","special_background_contract_milestone"),J("approval"),await je(he,"special_frame_approval","special_background_approval"),He(1,5,20,!0)}if("stop_approval"==e&&(0<document.querySelectorAll(".approval").length&&G("approval"),0<document.querySelectorAll(".special_frame_approval").length)&&await B("special_frame_approval","special_background_approval"),"high_royalty"==e){var t=Z(I.royalty[0],I.royalty[1],r),l=Y(Array.from(document.querySelectorAll("g.plate")));for(let e=0;e<t;e++)for(var o of l.reverse())for(let e=0;e<fe;e++){if(!(document.querySelectorAll("g.plate path").length<ae))break;console.log("Adding 1 shape to plate layer"),De(o,1),await new Promise(e=>setTimeout(e,1e3*U(1,5)))}}if("low_royalty"==e){var a=Z(I.royalty[0],I.royalty[1],r),a=Math.abs(a),n=Y(Array.from(document.querySelectorAll("g.plate")));for(let e=0;e<a;e++)for(let t of n.reverse())for(let e=0;e<fe;e++){var i=t.querySelectorAll("svg"),s=document.querySelectorAll("g.plate path");if(!(0<i.length&s.length>re))break;s=z.filter(e=>e.id==t.id.split("-")[1])[0];null==s.svg_prototype&&(s.svg_prototype=i[0]),console.log("Subtracting 1 shape of plate layer"),De(t,-1),await new Promise(e=>setTimeout(e,1e3*U(1,5)))}}if("same_royalty"==e)for(let t of document.querySelectorAll("g.plate")){var c=t.querySelectorAll("svg");if(2<c.length){var f=z.filter(e=>e.id==t.id.split("-"[1]));null==f.svg_prototype&&(f.svg_prototype=c[0]);for(let e=0;e<c.length-2;e++)De(t,-1),await new Promise(e=>setTimeout(e,1e3*W(1,3)))}else c.length<2&&(De(t,1),await new Promise(e=>setTimeout(e,1e3*W(1,3))))}if("high_holder_distribution"==e&&(P=(L=document.querySelector(".frame")).cloneNode(!0),document.querySelector("g.group").before(P),L.animate({opacity:"0"},{duration:5e3,iterations:1,fill:"forwards"}),setTimeout(e=>e.remove(),5e3,L)),"low_holder_distribution"==e&&(L=(P=document.querySelector(".frame")).cloneNode(!0),(j=document.querySelectorAll("g.group"))[j.length-1].after(L),L.animate([{opacity:"0"},{opacity:"1"}],{duration:5e3,iterations:1,fill:"forwards"}),setTimeout(e=>e.remove(),5e3,P)),"total_contract_activity_up"==e){var u=Z(I.contract_activity[0],I.contract_activity[1],r),d=Y(Array.from(document.querySelectorAll("g.cluster")));for(let e=0;e<u;e++)for(var p of d.reverse())for(let e=0;e<ue;e++){if(!(document.querySelectorAll("g.cluster path").length<ie))break;console.log("Adding 1 shape to cluster layer"),Re(p,1),await new Promise(e=>setTimeout(e,1e3*U(1,2)))}}if("total_contract_activity_down"==e){var _=Z(I.contract_activity[0],I.contract_activity[1],r),_=Math.abs(_),g=Y(Array.from(document.querySelectorAll("g.cluster")));for(let e=0;e<_;e++)for(let t of g.reverse())for(let e=0;e<ue;e++){var h=t.querySelectorAll("svg"),m=document.querySelectorAll("g.cluster path");if(!(0<h.length&m.length>ne))break;m=z.filter(e=>e.id==t.id.split("-")[1])[0];null==m.svg_prototype&&(m.svg_prototype=h[0]),console.log("Subtracting 1 shape of cluster layer"),Re(t,-1),await new Promise(e=>setTimeout(e,1e3*U(1,2)))}}if("contract_milestone"==e){var y=document.querySelectorAll("g.contract_milestones").length,b=r+1-y;if(0<b){if(0<document.querySelectorAll(".send").length)return void console.log("Send layer active, delaying contract milestone");if(0<document.querySelectorAll(".sale").length)return void console.log("Sale layer active, delaying contract milestone");if(0<document.querySelectorAll(".approval").length)return void console.log("Approval layer active, delaying contract milestone")}for(let e=y;e<y+b;e++)console.log("Adding contract milestone milestone_"+e),J("milestone_"+e);if(Ue(document.querySelector(".special_frame_contract_milestone")))return void console.log("Another party mode currently on");await je(me,"special_frame_contract_milestone","special_background_contract_milestone"),Ie(5,"plate",100,!0,!0)}if("stop_contract_milestone"==e&&0<document.querySelectorAll(".special_frame_contract_milestone").length&&await B("special_frame_contract_milestone","special_background_contract_milestone"),"contract_milestone_no_celebration"==e){var v=document.querySelectorAll("g.contract_milestones").length,S=r+1-v;for(let e=v;e<v+S;e++)console.log("Adding contract milestone milestone_"+e),J("milestone_"+e)}if("time_hodld"==e){var A=document.querySelectorAll("g.hodl"),w=r-A.length;if(0<w)for(let e=0;e<Math.abs(w);e++)console.log("Adding hodl layer"),J("time_hodld_"+e);else if(w<0)for(let e=0;e<Math.abs(w);e++)console.log("Removing hodl layer",A[e].id),!function(e){var t=e.animate([{opacity:0}],{duration:5e3,iterations:1,fill:"forwards"});t.onfinish=()=>{e.remove()}}(A[e])}if("wallet_holds_multiple"==e&&(console.log("Setting number_of_unlocked_layers_on_startup to",r-1),pe=r-1),"flipped_x_times"==e&&null==document.querySelector(".flip")&&J("flip"),"hodld_after_flipped_x_times"==e&&G("flip"),"increased_sends"==e&&(j=X(D.increased),console.log("Switching clustering mode to upwards",j),H=[j,j]),"decreased_sends"==e&&(L=X(D.decreased),console.log("Switching clustering mode to downwards",L),H=[L,L]),"same_sends"==e&&(P=X(D.neutral),console.log("Switching clustering mode to vertical",P),H=[P,P]),"no_sends"==e&&(j=X(D.neutral),console.log("Switching clustering mode to horizontal",j),H=[j,j]),"tier_royalty"==e){var F=r,L=document.querySelectorAll("g.plate:not(.special)");let t=0,l=0;var N,q=document.querySelectorAll("path.plate:not(.special)").length;for(N of Y(L)){var k=N.querySelectorAll(".svg:not(.special)").length,O=k-parseInt(N.getAttribute("initial_number_of_shapes"));let e=F*fe-O;e<0?(e=Math.abs(e),q-t-e<re&&(e=q-t-re),e=Math.min(e,k),Fe(N,e,"plate"),t+=e):0<e&&(e=Math.abs(e),q+l+e>ae&&(e=ae-(q+l)),Oe(N,e,"plate"),l+=e)}}if("tier_contract_activity"==e){var x=r,C=document.querySelectorAll("g.cluster"),T=C.length;let l=0,o=0;var M=document.querySelectorAll("path.cluster").length;for(let t=0;t<T;t++){var $=C[t],E=$.querySelectorAll(".svg").length,R=E-parseInt($.getAttribute("initial_number_of_shapes"));let e=Ne[T][x][t+1]-R;console.log("layers:",T,"tier:",x,"layer:",t+1,"n_shapes:",e),e<0?(e=Math.abs(e),M-l-e<ne&&(e=M-l-ne),Fe($,e=Math.min(e,E),"cluster"),l+=e):0<e&&(e=Math.abs(e),Oe($,e=M+o+e>ie?ie-(M+o):e,"cluster"),o+=e)}}if("tier_sends"==e){var j,P=r;let e=D.neutral;if(0<P?e=D.increased:P<0&&(e=D.decreased),-1!=e.indexOf(H[0])&&(0==P||e[Math.abs(P)-1]==H[0]))return void console.log("Clustering mode already matches desired one");j=0==P?X(e):e[Math.abs(P)-1],console.log("Setting clustering mode to",j),H=[j,j]}if("tier_approvals"==e){let e=-3==r?1.9:-2==r?1.5:-1==r?1.25:1==r?.75:2==r?.5:3==r?.3:0;!async function(r){var e=document.querySelectorAll("linearGradient");for(let o of e){var a=o.querySelectorAll(".animation");for(let l=0;l<a.length;l++){let e=a[l].getAttribute("dur"),t=(e=Number.parseFloat(e.slice(0,e.length-1)),parseFloat(a[l].getAttribute("original_duration")));var n=0==r?t:Math.round(t*r);n=Math.max(10,n),e==n?console.log("Gradient speed already matching",a[l].id):(a[l].old_dur=e,a[l].new_dur=n,a[l].onrepeat=function(){console.log(`Changing gradient speed from ${this.old_dur}s to ${this.new_dur}s (original: ${t}s) of `+o.getAttribute("id")),this.setAttribute("begin",this.getCurrentTime()),this.setAttribute("dur",this.new_dur+"s"),this.onrepeat=void 0})}}}(e)}}async function je(e,t,l){var o,r,a=document.querySelector(".frame"),n=document.querySelector("#background"),i=a.cloneNode(!0),t=(i.classList.add(t),n.cloneNode(!0)),l=(t.classList.add(l),i.setAttribute("fill","url(#gradient_bg_mirror_read_and_black)"),t.setAttribute("fill","url(#gradient_bg_read_and_black)"),document.querySelector("#gradient_bg_mirror")),s=document.querySelector("#gradient_bg"),c=l.cloneNode(!0),f=s.cloneNode(!0),u=(c.setAttribute("id","gradient_bg_mirror_read_and_black"),f.setAttribute("id","gradient_bg_read_and_black"),Array.from(e));for(o of c.querySelectorAll("stop")){var d=o.querySelector("animate");d.setAttribute("values",u.pop()),d.setAttribute("dur","20s")}for(r of f.querySelectorAll("stop")){var p=r.querySelector("animate");p.setAttribute("values",u.pop()),p.setAttribute("dur","30s")}l.after(c),s.after(f),i.setAttribute("opacity","0"),i.animate([{opacity:"1"}],{duration:5e3,iterations:1,fill:"forwards"}),a.after(i),t.setAttribute("opacity","0"),t.animate([{opacity:"1"}],{duration:5e3,iterations:1,fill:"forwards"}),n.after(t)}async function B(e,t){let l=document.querySelector("."+e);document.querySelector("#gradient_bg_mirror");l.setAttribute("opacity","1");let o=l.animate([{opacity:"0"}],{duration:5e3,iterations:1,fill:"forwards"}),r=(o.onfinish=function(){l.remove()},document.querySelector("."+t));r.setAttribute("opacity","1"),(o=r.animate([{opacity:"0"}],{duration:5e3,iterations:1,fill:"forwards"})).onfinish=function(){r.remove()},await new Promise(e=>setTimeout(e,6e3))}function Pe(t,l,o){for(let e of z)e.type==t&&(null==e.original_change_positions_chance&&(e.original_change_positions_chance=e.change_positions_chance),e.change_positions_chance=l,setTimeout(()=>{e.change_positions_chance=e=e.original_change_positions_chance},o))}async function Fe(l,e,o){let r=Y(l.querySelectorAll("svg"));for(let t=0;t<e;t++){console.log(`Removing ${o} of layer`,l.id);let e=z.filter(e=>e.id==l.id.split("-")[1])[0];null==(e=null==e?S.filter(e=>e.id==l.id.split("-")[1])[0]:e).svg_prototype&&(e.svg_prototype=r[t]),r[t].classList.add("removing"),r[t].classList.contains("animating")||(r[t].animate([{opacity:"0"}],{duration:5e3,iterations:1,fill:"forwards"}).onfinish=e=>{r[t].remove()})}}async function Oe(l,t,o){for(let e=0;e<t;e++)if(console.log("Adding shape to layer",l.id),"cluster"==o){let t=X(l.querySelectorAll(".svg.cluster")),e=t.cloneNode(!0);if(null==t){let e=z.filter(e=>e.id==l.id.split("-")[1])[0];null==e&&(e=S.filter(e=>e.id==l.id.split("-")[1])[0]),t=e.svg_prototype}try{n=(l.classList.contains("special")?S.filter(e=>l.classList.contains(e.id)):z.filter(e=>l.classList.contains(e.id)))[0],e.querySelector("path").setAttribute("d",X(n.paths))}catch(e){console.log("Adding shapes to plate layer failed",l,e)}var r=e.getAttribute("x").split("%")[0]*W(.99,1.01,.1),a=e.getAttribute("y").split("%")[0]*W(.99,1.01,.1),r=(e.setAttribute("x",r+"%"),e.setAttribute("y",a+"%"),e.classList.add("animating"),e.animate([{opacity:"0"},{opacity:"1"}],{duration:c,iterations:1,fill:"forwards"}));l.appendChild(e),r.onfinish=function(){e.classList.remove("animating")}}else if("plate"==o){let t=l.querySelector("svg");if(null==t){let e=z.filter(e=>e.id==l.id.split("-")[1])[0];null==e&&(e=S.filter(e=>e.id==l.id.split("-")[1])[0]),t=e.svg_prototype}let e=t.cloneNode(!0);try{var n;n=(l.classList.contains("special")?S.filter(e=>l.classList.contains(e.id)):z.filter(e=>l.classList.contains(e.id)))[0],e.querySelector("path").setAttribute("d",X(n.paths))}catch(e){console.log("Adding shapes to plate layer failed",l,e)}var a=W(se[0],se[1],.1),r=e.querySelector("path"),i=r.getAttribute("transform").split("(")[1].split(","),i=(i[0]=parseFloat(i[0])*a,i[1]=parseFloat(i[1].slice(0,i[1].length-2))*a,r.setAttribute("transform",`scale(${i[0]}, ${i[1]})`),parseFloat(e.getAttribute("x").split("%")[0])+W(-20,20)),s=parseFloat(e.getAttribute("y").split("%")[0])+W(-20,20);i*=ce,s*=ce,e.setAttribute("x",i+"%"),e.setAttribute("y",s+"%"),e.classList.add("animating"),e.classList.add("dynamic_add"),l.appendChild(e),e.animate([{opacity:"0"},{opacity:"1"}],{duration:c,iterations:1,fill:"forwards"}).onfinish=function(){e.classList.remove("animating")}}}async function Re(l,t){if(t<0){var o=l.querySelectorAll("svg");for(let e=0;e<o.length;e++){var r=o[e];if(r.classList.contains("animating"))for(let t of r.getAnimations())"finished"!=t.playState&&(console.log(t),t.svg=r,t.onfinish=e=>{t.svg.remove()},console.log("Shape is animating",l.id));return console.log("Removing shape from layer",l.id),r.classList.add("animating"),r.classList.add("removing"),r.animate([{opacity:"0"}],{duration:c,iterations:1,fill:"forwards"}),setTimeout(e=>e.remove(),c,r),!0}return!1}if(0<t){console.log("Adding shape to layer",l.id);let e=X(l.querySelectorAll(".svg.cluster")).cloneNode(!0);var t=e.getAttribute("x").split("%")[0]*W(.99,1.01),a=e.getAttribute("y").split("%")[0]*W(.99,1.01),t=(e.setAttribute("x",t+"%"),e.setAttribute("y",a+"%"),e.classList.add("animating"),e.animate([{opacity:"0"},{opacity:"1"}],{duration:c,iterations:1,fill:"forwards"}));l.appendChild(e),t.onfinish=function(){e.classList.remove("animating")}}}function De(o,t){if(t<0){var l=o.querySelectorAll("svg");for(let t=0;t<l.length;t++){if(!l[t].classList.contains("animating")){console.log("Removing shape from layer",o.id);let e=l[t];e.classList.add("animating"),e.classList.add("removing"),e.animate([{opacity:"0"}],{duration:c,iterations:1,fill:"forwards"}).onfinish=function(){e.remove()};break}console.log("Shape is animating",o.id)}}else if(0<t){console.log("Adding shape to layer",o.id);let e=o.querySelector("svg");null==e&&(t=z.filter(e=>e.id==o.id.split("-")[1])[0],e=t.svg_prototype);let l=e.cloneNode(!0);try{let t=o.getAttribute("id").split("-")[1];var r=("s_"==t.slice(0,2)?S.filter(e=>e.id==t):z.filter(e=>e.id==t))[0];l.querySelector("path").setAttribute("d",X(r.paths))}catch{console.log("Adding shapes to plate layer failed",o)}var t=W(se[0],se[1],.1),r=l.querySelector("path"),a=r.getAttribute("transform").split("(")[1].split(","),t=(a[0]=parseFloat(a[0])*t,a[1]=parseFloat(a[1].slice(0,a[1].length-2))*t,r.setAttribute("transform",`scale(${a[0]}, ${a[1]})`),parseFloat(l.getAttribute("x").split("%")[0])+W(-20,20)),r=parseFloat(l.getAttribute("y").split("%")[0])+W(-20,20);t*=ce,r*=ce,l.setAttribute("x",t+"%"),l.setAttribute("y",r+"%"),l.classList.add("animating"),l.classList.add("dynamic_add"),o.appendChild(l),l.animate([{opacity:"0"},{opacity:"1"}],{duration:c,iterations:1,fill:"forwards"}).onfinish=function(){l.classList.remove("animating")}}}function G(e){var t;for(t of document.querySelectorAll("g."+e)){let e=t.animate([{opacity:1},{opacity:0}],{duration:5e3,iterations:1,fill:"forwards"});e.layer=t,e.onfinish=t=>{z=z.filter(e=>e.id!=t.target.layer.id),e.layer.remove()}}}async function He(t=.5,l=5,o=2,r=!1){console.log("Changing order");var a=document.querySelectorAll(".group.layer"),a=Array.from(a).filter(e=>!e.classList.contains("special")),n=document.querySelector("#main-svg");let i=0;for(let e=2;e<a.length&&!(i>=o);e+=2)T()>1-t&&(_([a[e],a[e+1]],l,e=>{e[0].insertBefore(e[2],e[3]),e[0].insertBefore(e[1],e[2])},[n,a[e],a[e+1],a[0]]),i+=1,r)&&await new Promise(e=>setTimeout(e,1e3*W(3,6)));setTimeout(function(){var l=[],o=document.querySelectorAll(".group.layer");for(let t=0;t<o.length;t++)for(let e=0;e<z.length;e++)if(o[t].getAttribute("class").includes(z[e].id)){l.push(z[e]);break}z=l},2*l*1e3)}async function Ie(l=5,t="both",o=4,r=!1,a=!1){console.log("Changing positions and paths");for(let e=0;e<z.length;e++){var n=z[e];if(!("both"!=t&t!=n.type)){var i=g.querySelector(".group."+n.id);if(null==i)n.delete=!0;else{var s,c,f,u=i.querySelectorAll("svg");"cluster"==n.type&&Y(s=Ge(X(H),n.number_of_visible_shapes,W(n.clustering_density[0],n.clustering_density[1]),.5,[3,6],n.clustering_density));let t=0;for(let e=0;e<u.length&&!(t>=o);e++)if((!!r||T()>1-n.change_positions_chance)&!u[e].classList.contains("animating")){for(u[e].classList.add("animating"),f="cluster"==n.type?(c=s[e][0],s[e][1]):(c=W(n.coordinates[0][0],n.coordinates[0][1])/n.current_scale,W(n.coordinates[1][0],n.coordinates[1][1])/n.current_scale),Math.abs(n.current_x-c)<10&&(c=n.current_x+W(10,20)),Math.abs(n.current_y-f)<10&&(f=n.current_y+W(10,20)),n.current_x=c,n.current_y=f;;)if(X(n.paths)!=n.current_path){n.current_path=X(n.paths);break}_([u[e]],l,e=>{e[0].setAttributeNS(null,"x",e[1]+"%"),e[0].setAttributeNS(null,"y",e[2]+"%"),e[0].querySelector("path").setAttributeNS(null,"d",e[3])},[u[e],c,f,n.current_path]),a&&await new Promise(e=>setTimeout(e,1e3*U(2,8))),t++}}}}z=z.filter(e=>1!=e.delete)}async function _(t,e,l,o,r=0){t=t.filter(e=>null!=e),0!=r&&await new Promise(e=>setTimeout(e,r));let a={duration:1e3*e,iterations:1,fill:"forwards"};for(let e=0;e<t.length;e++)t[e].animate({opacity:"0"},a);setTimeout(function(){l(o);for(let e=0;e<t.length;e++)t[e].animate({opacity:"1"},a),t[e].classList.remove("animating")},1e3*e)}function J(t,e="top"){var l,o=document.querySelector("#main-svg").querySelector("#defs"),r=X(S.filter(e=>-1!=e.classes.indexOf(t))),a=X(r.color_combinations_list).colors,n=`g-${r.id}-`+r.type,i=W(r.color_duration[0],r.color_duration[1]),s=ze(r.gradient_coordinates,n),c=(r.current_scale=W(r.scale[0],r.scale[1],.01),s.setAttributeNS(null,"class",`gradient ${r.type} `+r.id),x(0,a[0])),f=x(1,a[1]),u=C(a[0],i),a=C(a[1],i),d=(c.appendChild(u),f.appendChild(a),s.appendChild(c),s.appendChild(f),o.appendChild(s),document.createElementNS(w,"g"));d.setAttributeNS(null,"id",`g-${r.id}-`+r.type),d.setAttributeNS(null,"class",`layer group ${r.type} `+r.id),"cluster"==r.type&&(l=Ge(X(H),r.number_of_visible_shapes,W(r.clustering_density[0],r.clustering_density[1]),.5,[3,6],r.clustering_density));for(let t=0;t<r.number_of_visible_shapes;t++){var p,_,g=`p-${r.id}-${r.type}-`+t,h=`s-${r.id}-${r.type}-`+t;let e=1;"plate"==r.type?(p=U(r.coordinates[0][0],r.coordinates[0][1])/r.current_scale,_=U(r.coordinates[1][0],r.coordinates[1][1])/r.current_scale,r.current_x=p,r.current_y=_,r.current_path=X(r.paths,qe)):(p=l[t][0],_=l[t][1],r.current_x=p,r.current_y=_,r.current_path=X(r.paths,qe),N.length&&(e=W(N[0],N[1],.01)));var m,y=document.createElementNS(w,"path"),b=(y.setAttributeNS(null,"transform",`scale(${r.current_scale*e}, ${r.current_scale*e})`),y.setAttributeNS(null,"d",r.current_path),y.setAttributeNS(null,"fill",`url(#${n})`),y.setAttributeNS(null,"id",g),y.setAttributeNS(null,"class",`layer path ${r.type} ${r.id} special`),document.createElementNS(w,"svg"));b.setAttributeNS(null,"x",p+"%"),b.setAttributeNS(null,"y",_+"%"),b.setAttributeNS(null,"transform-origin","center"),b.setAttributeNS(null,"id",h),b.setAttributeNS(null,"class",`layer svg ${r.type} ${r.id} special`);for(m of r.classes)b.classList.add(m),d.classList.add(m);b.appendChild(y),d.appendChild(b)}d.setAttribute("initial_number_of_shapes",r.number_of_visible_shapes),d.animate([{opacity:"0"},{opacity:"1"}],{duration:oe,iterations:1,fill:"forwards"}),"top"==e?(i=document.querySelectorAll(".group"))[i.length-1].after(d):document.querySelector(".group").before(d)}function x(e,t){var l=document.createElementNS(w,"stop");return l.setAttributeNS(null,"offset",e),l.setAttributeNS(null,"stop-color",t),l}function C(e,t){var l=document.createElementNS(w,"animate");return l.setAttributeNS(null,"attributeName","stop-color"),l.setAttributeNS(null,"values",e),l.setAttributeNS(null,"dur",t+"s"),l.setAttributeNS(null,"repeatCount","indefinite"),l.setAttributeNS(null,"class","animation"),l.setAttributeNS(null,"original_duration",t),l}function ze(e,t){var l=document.createElementNS(w,"linearGradient");return l.setAttributeNS(null,"id",t),l.setAttributeNS(null,"x1",e[0]+"%"),l.setAttributeNS(null,"x2",e[2]+"%"),l.setAttributeNS(null,"y1",e[1]+"%"),l.setAttributeNS(null,"y2",e[3]+"%"),l}function T(){var e=1e4*Math.sin(f++);return e-Math.floor(e)}function Be(){return(u+=s)%100/100}function j(){return(u=(1664525*u+s)%89652912)%101}function U(e,t,l=!0){return e=Math.ceil(e),t=Math.floor(t),l?Math.floor(T()*(t+1-e)+e):Math.floor(Be()*(t+1-e)+e)}function W(e,t,l=1,o=3,r=!0){r=r?T()*(t+l-e)+e:Be()*(t+l-e)+e;return t=(t=o)||0,Math.floor(r*Math.pow(10,t))/Math.pow(10,t)}function X(e,t=!0){return e[U(0,e.length-1,t)]}function Y(e,t=!0){let l=e.length,o;for(;0!=l;)o=t?Math.floor(T()*l):Math.floor(Be()*l),l--,[e[l],e[o]]=[e[o],e[l]];return e}function Ge(e,t,l=0,o=0,r=[3,8],a=[1,3],n=0,i=[-200,300]){var s,c,f,u,d,p,_,g,h,m,y;if(0==e&&(c=A(45,95,40,10,l+10,t+1),f=A(30,55,40,20,l+20,t+1),u=A(40,0,40,30,l+30,t+1)),1==e&&(c=A(60,0,90,30,l+40,t+1),f=A(20,40,20,40,l+20,t+1),u=A(40,70,100,50,l+30,t+1)),5==e&&(u=A(10,5,5,10,l+10,t+1),c=A(20,10,1,50,l+50,t+1),f=A(30,30,-5,20,l+20,t+1)),3==e&&(u=A(90,0,160,0,l+20,t+1),f=A(50,50,160,0,l+30,t+1),c=A(10,70,160,0,l+40,t+1)),6==e&&(c=A(50,50,10,10,l+30,t+1),f=A(50,20,20,10,l+5,t+1),u=A(50,50,30,10,l+10,t+1)),2==e&&(c=A(0,10,20,10,l+5,t+1),f=A(80,40,10,20,l+10,t+1),u=A(90,30,40,30,l+30,t+1)),4==e){for(s=[],_=t/100,S=0;S<t;S++)d=b=S/_,d+=W(-(p=S|b&d)%10,p%10)+Math.sin(b)*p%30,p+=W(-S%10,S%10),s.push({x:d%110,y:p%110});u=f=c=s}7==e&&(c=A(95,30,-40,13,l+10,2*t),f=A(90,40,-35,20,l+20,t+1),u=A(80,50,-30,30,l+30,t+1)),8==e&&(c=A(60,50,-10,10,l+10,t+1),f=A(70,50,10,20,l+20,t+1),u=A(80,50,20,30,l+30,t+1)),9==e&&(c=A(5,40,.1,2,l+30,t+1),f=A(40,50,.3,2,l+10,t+1),u=A(60,45,.3,2,l+40,t+1)),10==e&&(c=A(3,10,-5,20,l+10,t+1),f=A(10,80,-10,20,l+20,t+1),u=A(80,20,-20,10,l+30,t+1)),11==e&&(c=A(15,10,-5,30,l+40,t+1),f=A(50,80,-10,26,l+30,t+1),u=A(80,40,-10,15,l+20,t+1)),g=[],s=(s=(s=c.filter(e=>0<e.x&e.x<100&0<e.y&e.y<101)).concat(f.filter(e=>0<e.x&e.x<100&0<e.y&e.y<101))).concat(u.filter(e=>0<e.x&e.x<100&0<e.y&e.y<101));for(let e=0;e<t;e++)g.push(X(s));if(0<o)for(h=!1,S=y=m=0;S<g.length;S++)h?(S<y&&(g[S].x=g[m].x+W(-_,_),g[S].y=g[m].y+W(-_,_)),y<S&&(h=!1)):T()>o&&(h=!0,y=(m=S)+U(r),_=W(a[0],a[1]));for(var v=[],S=0;S<g.length;S++)g[S].x<i[0]|g[S].x>i[1]&&(g[S].x=W(0,100,3)),g[S].y<i[0]|g[S].y>i[1]&&(g[S].y=W(0,100,3)),0<n&&T()>1-n&&(g[S].x=W(0,100,3),g[S].y=W(0,100,3)),v.push([g[S].x,g[S].y]);return v}function A(t,l,e,o,r,a){var n=Math.tan(e),i=Math.cos(e)*o,s=Math.sin(e)*o,c=[];for(let e=0;e<a;e++){var f=(T()-.5)*r,u=(T()-.5)*r,f=t+i+f;c.push({x:f,y:l+n*(f-t)+s+u})}return c}function i(e){try{return paths[e].slice(1,paths[e].length-1)}catch{var t=X(Object.keys(paths));return console.log(e,"not found in paths using: ",t),paths[t].slice(1,paths[t].length-1)}}function Je(e){var a=["LS - range","LS - splash","LS - plane","LS - streetlight","LS - glass","LS - left","LS - right","LS - map","LS - fracture","LS - liquid","LS - mosaic","LS - cumulus","S - recall fragment","LS - pointer","LS - cliff","LS - hill","LS - city","LS - sign","S - ship","LS - plus","S - recall flock","S - bug","LS - honeycomb","L - ice large","LS - path","S - footprint small","LS - planet","LS - logo","LS - multiplier","S - fragment","LS - stratus","S - flock","LS - river","S - candle","L - girder","L - elevation","L - urban","L - plan","L - floor","L - ruin","L - corridor","L - wall ","L - pie chart","L - house","L - pod","L - ceiling","L - window displaced","L - modern","L - blueprint","L - road","L - bell curve","L - beam thick","L - perspective","L - flame","L - window pane","L - window poly","L - window frame","L - frame","L - future","L - body","L - beam medium","L - head","L - rural","L - beam thin","L - ripple","L - brain","L - flame high","L - foothill","L - mnemonic","L - jet","L - mountain","L - rockies","L - fingerprint","L - haze","L - skeleton","L - skyline","L - comic","L - ribbon","L - wave","L - footprint large"],n=[3,36,42,23,11,34,35,37,38,39,2,41,43,14,40],i=[20,18,17,15,15,10,10,10,10,10,7,7,6,5,5],s=[3,4,1,5,6,0,2,7],c=[20,15,12,10,10,8,7,7],f=[10,50,13,47,49,4,46,45,1,51,52,0,5,7,48,53,6,44,54],u=[20,20,20,15,15,15,14,12,12,12,10,8,7,7,6,6,6,5,4],d=[10,13,11,16,8,9,15,14,12],p=[20,20,15,15,10,10,10,5,4],_=[58,57,19,26,56,61,65,55,22,16,62,15,9,63,64,60,59,8,66],g=[25,20,20,20,18,18,16,15,15,15,12,11,10,10,10,9,8,7,7],h=[19,25,22,23,17,24,18,21,20],m=[20,20,15,15,10,10,4,3,2],y=[28,30,68,74,27,76,73,77,69,70,79,32,75,78,24,67,17,72,71],b=[20,20,18,17,16,16,15,15,13,12,12,11,10,10,9,7,7,7,6],v=[33,29,26,28,30,31,27,32],S=[27,25,20,20,20,20,10,10],A=[58,3,10,13,19,26,28,30,61,68,74,65,27,76,11,49,4,22,16,73,69,45,1,62,70,15,32,52,9,64,75,78,24,0,59,5,7,8,67,17,6,71],w=[25,20,20,20,20,20,20,20,18,18,17,16,16,16,15,15,15,15,15,15,13,12,12,12,12,11,11,10,10,10,10,10,9,8,8,7,7,7,7,7,6,6],L=[33,29,3,10,13,19,26,28,30,31,4,11,16,22,1,5,6,8,9,15,17,24,27,32,0,2,7,14,18,21],N=[27,25,20,20,20,20,20,20,20,20,15,15,15,15,12,10,10,10,10,10,10,10,10,10,8,7,7,5,4,3],t=[1,8,16,2,3,4],l=[5,5,5,20,50,10],r=["goldenhour","dawn","ibiza","southbeach","mist","dusk","platinum","palladium","rhodium","ipanema","malibu","night","maldives","venicebeach","sunset","vegas","cannes"],q=[40,30,20,10,8,7,5,4,3,5,5,12,6,5,7,4,5];if("number_of_colors"==e){for(let e=0;e<300;e++)for(let e=0;e<t.length;e++)if(j()>100-l[e])return t[e];return 2}if("layer_paths"==e){var k=[],x=["regular","hodl","milestone"];for(let r=0;r<x.length;r++)for(let o=0;o<8;o++){"regular"==x[r]?0==o?(C=n,T=i):1==o?(C=s,T=c):2==o?(C=f,T=u):3==o?(C=d,T=p):4==o?(C=_,T=g):5==o?(C=h,T=m):6==o?(C=y,T=b):7==o&&(C=v,T=S):"hodl"==x[r]?(C=A,T=w):"milestone"==x[r]&&(C=L,T=N);var C,T,M=j()%C.length;let e=j(),t=a[C[M]],l=300;for(;-1!=k.indexOf(t)||e<100-T[o];){if(l<=0){console.log("break at",x[r],o,T[o]);break}l--,M=j()%C.length,e=j(),t=a[C[M]]}k.push(t)}return k}if("color_names"==e){var $=[];for(let e=0;e<ee;e++){var E=j();let e=j(),t=E%q.length,l=r[t],o=300;for(;(e<100-q[t]||-1!=$.indexOf(l))&&(E=j(),e=j(),t=E%q.length,l=r[t],!(o<=0));)o--;$.push(l)}return $}}function Z(t,l,o){if(o<=t[0])return l[0];if(o>=t[t.length-1])return l[l.length-1];for(let e=0;e<l.length-1;e++)if(o>=t[e]&o<t[e+1])return l[e]}function Ue(e){return null!=e&&e==e}function M(e){e=new Date(1e3*e);return e.getFullYear()+`-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)} ${("0"+e.getHours()).slice(-2)}:${("0"+e.getMinutes()).slice(-2)}:`+("0"+e.getSeconds()).slice(-2)}function $(e,t,l=!0){e*={years:31536e3,months:2592e3,hours:3600,minutes:60}[t];return l?Math.round(e):e}function We(e,t,l){return(t-e)/$(1,l,!1)}function Xe(e,t){var l=function(t){let l=0;for(let e=1;e<t.length;e++)l+=Math.abs(t[e]-t[e-1]);return l/(t.length-1)}(t),e=e-t[t.length-1];return void 0===(delta=e/l-1)||null===delta||isNaN(delta)?0:delta}async function Ye(){var e=V(K((await(await fetch(v,{method:"POST",body:JSON.stringify({method:"eth_call",params:[{to:E,data:P},"latest"],id:2,jsonrpc:"2.0"})})).json()).result),[1,200,1,200,1,200,200]);console.log("contract_data:",e),e[0];let t=e[1];e[2];let l=e[3];var o=e[4];let r=Q(e[5]),a=Q(e[6]);e=V(K((await(await fetch(v,{method:"POST",body:JSON.stringify({method:"eth_call",params:[{to:E,data:F+function(e){let t=e.toString();return 0<(e=64-t.length)&&(e="0".repeat(e),t=e+t),t}(O)},"latest"],id:2,jsonrpc:"2.0"})})).json()).result),[1,200,1,1,1,1]);console.log("token_data:",e),e[0][0];let n=e[1];var i,s,c,f,u=e[2][0],d=(e[3][0],e[4][0]),e=e[5][0],p=(new Date).getTime()/1e3;0==t.length&&t.push(q),0==l.length&&l.push(q),0==t.length&&t.push(q),0==t.length&&t.push(q),r=r.filter(e=>0!=e[0]),a=a.filter(e=>0!=e[0]),l=l.filter(e=>0!=e),t=t.filter(e=>0!=e),n=n.filter(e=>0!=e),console.log("--------------","Generated data","--------------"),console.log("\nTransfer timestamps");for(i of l)console.log(M(i));console.log("\nApproval timestamps");for(s of t)console.log(M(s));console.log("\nETH Recept");for(c of r)console.log(M(c[0],c[1]));console.log("\nWETH Recept");for(f of a)console.log(M(f[0],f[1]));console.log("\nHolder count:",o),console.log("token_mint_timestamp:",u),console.log("wallet_balance:",d),console.log("number_of_hodl_layers:",e),r.sort((e,t)=>e[0]-t[0]),a.sort((e,t)=>e[0]-t[0]);r.map(e=>e[1]),a.map(e=>e[1]);l.sort(),t.sort(),n.sort();let _=r.concat(a);_.sort((e,t)=>e[0]-t[0]),_=_.map(e=>e[1]);var g,h,m=[],y=[];for(g of r){m.push(g[0]);for(let e=n.length-1;0<e;e--)if(n[e]<=g[0]){y.push(n[e]);break}}for(h of a){for(let e=l.length-1;0<e;e--)if(l[e]<h[0]){m.push(l[e]);break}for(let e=n.length-1;0<e;e--)if(n[e]<h[0]){y.push(n[e]);break}}return[p,l,t,m,_,o,n,y,d,u,e]}async function Ze(t,e,l,o,r,a,n,i,s,c,f){let u=$(3,"months");var d=[q+$(6,"months"),q+$(1,"years"),q+$(2,"years"),q+$(5,"years"),q+$(10,"years"),q+$(20,"years")],n=(e=e.filter(e=>0!=e),l=l.filter(e=>0!=e),o=o.filter(e=>0!=e),n=n.filter(e=>0!=e),i=i.filter(e=>0!=e),r=r.filter(e=>0!=e),Xe(t,e)),p=Xe(t,l),_=Xe(t,o);let g=0;0<r.length&&(g=r[r.length-1]/(r.reduce((e,t)=>e+t)/r.length));var h=(n+p+_)/3;let m=We(o[o.length-1],t,"minutes")<10,y=We(e[e.length-1],t,"minutes")<10,b=We(l[l.length-1],t,"minutes")<10;var a=.5<=a/R,v=!a;let S=function(t,l){if(t>l[l.length-1])return l[l.length-1];for(let e=1;e<l.length;e++)if(l[e-1]<t&&t<l[e])return e}(t,d);null==S&&(S=0);var A,w,L,N,d=s-1,s=2<=i.filter(e=>e>t-u).length;console.log("--------------","Processed data","--------------"),console.log("\nCurrent timestamp:",M(t)),console.log("\nTransfer timestamps");for(A of e)console.log(M(A));console.log("\nApproval timestamps");for(w of l)console.log(M(w));console.log("\nSale timestamps");for(L of o)console.log(M(L));console.log("\nRoyalty");for(N of r)console.log(N);console.log("--------------","Calculated traits","--------------"),console.log("transactions_delta:",n),console.log("approvals_delta:",p),console.log("sales_delta:",_),console.log("royalty_delta:",g),console.log("average_total_contract_activity:",h),console.log("send_triggered:",y),console.log("approval_triggered:",b),console.log("high_holder_distribution_triggered:",a),console.log("low_holder_distribution:",a),console.log("wallet_holds_multiple_layers_unlocked:",d),console.log("number_of_hodl_layers:",f),console.log("contract_milestone_layers:",S),console.log("token_flipped:",s),a&&document.querySelectorAll("g,.frame")[0].classList.contains("layer")&&(console.log("Triggering high_holder_distribution update"),await k("high_holder_distribution")),v&&document.querySelectorAll("g,.frame")[0].classList.contains("layer")&&(console.log("Triggering low_holder_distribution update"),await k("low_holder_distribution")),S&&(console.log("Setting total_transactions_layers to",S),k("contract_milestone",S),t>contract_milestone_until_timestamp)&&k("stop_contract_milestone"),d!=pe&&(console.log("Setting number_of_unlocked_layers_on_startup to",d),pe=d),s&&(console.log("Triggering flipped_x_times update"),k("flipped_x_times")),f!=document.querySelectorAll(".hodl").length&&(console.log("Triggering time_hodld update",f),k("time_hodld",f)),Ue(n)&&(i=Ee(n,Z(I.royalty[0],I.royalty[1],g)),r=Ee(n,Z(I.contract_activity[0],I.contract_activity[1],h)),_=Ee(n,Z(I.clustering_mode[0],I.clustering_mode[1],n)),a=Ee(n,Z(I.approvals[0],I.approvals[1],p)),console.log("Adjusting royalty"),await k("tier_royalty",i),console.log("Adjusting contract activity"),await k("tier_contract_activity",r),console.log("Adjusting clustering mode"),await k("tier_sends",_),console.log("Adjusting approvals"),await k("tier_approvals",a)),m&&y&&(o[o.length-1]<e[e.length-1]?m=!1:y=!1),y&&b&&(l[l.length-1]<e[e.length-1]?b=!1:y=!1),m&&b&&(o[o.length-1]<l[l.length-1]?m=!1:b=!1),m?(console.log("Triggering sale update"),await k("sale")):await k("stop_sale"),y?(console.log("Triggering send update"),await k("send")):await k("stop_send"),b?(console.log("Triggering approval update"),await k("approval")):await k("stop_approval")}window.onkeydown=function(e){71===e.keyCode?(d=document.querySelector("#main-svg")).insertAdjacentHTML("afterend",`<div id="prompt-container" class="prompt-container"><p>Change node URL:</p><input id="prompt" class="prompt" value="${v}"/></div>`):13===e.keyCode&&(p=document.getElementById("prompt"),v=p.value,console.log(v),(pc=document.getElementById("prompt-container")).remove())};