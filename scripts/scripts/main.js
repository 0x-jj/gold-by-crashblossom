let f=!1,e=["https://eth-goerli.g.alchemy.com/v2/ZXbjH0LyjJq69t099ce8gRs494wOaqMq","https://eth-goerli.g.alchemy.com/v2/FX3jC58-puCxQ3md_9Fi-5s26LBFeOtt","https://eth-goerli.g.alchemy.com/v2/txECqoWYc5kAdVtvwOskW2kSumzPrKzd","https://eth-goerli.g.alchemy.com/v2/RIC3cWdDvZQ9t_ylbIsTKm-gl0HZBHji"],X=Array.from(e),Y=500;Q/=100;var t=(new Date).getTime();let g=(new Date).getTime(),N="http://www.w3.org/2000/svg",k=document.querySelector("#main-svg");let V=[$+3600,$+7200,$+10800,$+14400,$+18e3,$+21600],S=G(e.slice(0,-1));function ee(e){var t=e.slice(2),l=[];for(let e=0;e<t.length;e+=64){var o=t.slice(e,e+64),o=parseInt(o,16);l.push(o)}return l}function te(t){var l=[];for(let e=0;e<t.length;e+=2)l.push(t.slice(e,e+2));return l}function le(t,l){var e,o=[];let r=0;for(let e=0;e<l.length;e++){var a=l[e],n=t.slice(r,r+a);o.push(n),r+=a}return r<t.length&&(e=t.slice(r),o.push(e)),o}let oe=Ze("number_of_colors");var m,l=Ze("color_names"),y=(console.log("Selected color names:",l),{goldenhour:{chance:.1,colors:["#ff1249;#6b6cff;#c80085;#ffe112;#ff1249","#6b6cff;#ff1249;#ffe112;#c80085;#6b6cff"]},dawn:{chance:.1,colors:["#ff4637;#83a9ff;#e91278;#fff149;#ff4637","#9ab0fe;#ff5252;#fffb57;#f23662;#9ab0fe"]},ibiza:{chance:.1,colors:["#b2004e;#573fcd;#990086;#ec7d1a;#b2004e","#442dbe;#c2045c;#d26b0a;#a80094;#442dbe"]},southbeach:{chance:.1,colors:["#f72585;#4cc9f0;#11a7d4;#fa6bab;#f72585","#4cc9f0;#f72585;#fa6bab;#11a7d4;#4cc9f0"]},mist:{chance:.1,colors:["#ff6494;#98e8ed;#ffe6ff;#80ffff;#ff6494","#9affff;#ff6277;#80ffff;#ffe6ff;#9affff"]},dusk:{chance:.1,colors:["#c4107c;#1d5fb6;#a50d68;#4d88ff;#c4107c","#5981d9;#f042aa;#2f62d0;#b40d85;#5981d9"]},platinum:{chance:.1,colors:["#080808;#828282;#d2d2d2;#202020;#7d7d7d;#080808","#efefef;#353535;#161616;#b2b2b2;#383838;#f5f5f5"]},palladium:{chance:.1,colors:["#f5f5f5;#808080;#666666;#f2f2f2;#787878;#f5f5f5","#4d4d4d;#949494;#ffffff;#595959;#939393;#4d4d4d"]},rhodium:{chance:.1,colors:["#000000;#4f4f4f;#818181;#000000;#515151;#000000","#929292;#000000;#0f0f0f;#898989;#000000;#929292"]},ipanema:{chance:.1,colors:["#a7c3ff;#ff0066;#ffa9bd;#ff0066;#a7c3ff","#ff9ea1;#0000ff;#68b6ff;#0000ff;#ff9ea1"]},malibu:{chance:.1,colors:["#c0d5ff;#ff6666;#ffe1db;#150070;#c0d5ff","#fee3dc;#ff66ff;#c9e9ff;#ff66ff;#fee3dc"]},night:{chance:.1,colors:["#0000ff;#000080;#ff2a5b;#000080;#0000ff","#dd3a3f;#03000f;#0062be;#03000f;#dd3a3f"]},maldives:{chance:.1,colors:["#ffff99;#ff668a;#ffff33;#ffe6f2;#ffff99","#ff668a;#ffff99;#ffe6f2;#ffff33;#ff668a"]},venicebeach:{chance:.1,colors:["#ff66ff;#ccffff;#ffbb33;#ffff66;#ff66ff;","#ffbb33;#ff66ff;#ffff66;#ccffff;#ffbb33"]},sunset:{chance:.1,colors:["#809fff;#ff4d4d;#4d79ff;#ff7733;#809fff","#ff5500;#809fff;#ff4d4d;#4d79ff;#ff5500"]},vegas:{chance:.1,colors:["#3366ff;#ff99ff;#ff0066;#ff8533;#3366ff","#ffccff;#ff0066;#000099;#3333ff;#ffccff"]},cannes:{chance:.1,colors:["#ffe112;#ff668a;#ffff80;#ff1a4f;#ffe112","#ff668a;#ffe112;#ff1a4f;#ffff80;#ff668a"]},special_sends:{chance:.1,colors:["#ffb380;#e60036;#ffcc00;#ff003c;#ffb380","#e60036;#ffb380;#cc0030;#ff6600;#e60036"]},special_sales:{chance:.1,colors:["#ffff33;#ff0066;#ffff00;#ff6600;#ffff33","#ff4d4d;#ffe112;#e6005c;#ff6666;#ff4d4d"]},special_approval:{chance:.1,colors:["#4d4dff;#98e8ed;#0039e6;#80ffff;#4d4dff","#ccffff;#b3f0ff;#80ffff;#3366ff;#ccffff"]}});let q=[];for(m of l)q.push(y[m]);console.log("Selected colors: ",l);let re=[50,80],x=[];let C={increased:[7,3,1],decreased:[0,4,8],neutral:[6,2,10,5,9,11]};let u=15,ae=t,ne=5;let ie=5e3;let se=5e3,ce=1,fe=80,ue=2,de=3e3,pe=[.7,.8],_e=1.3,E={royalty:[[-.4,-.3,-.1,0,.1,.3,.6],[-3,-2,-1,0,1,2,3]],contract_activity:[[-1,-.5,-.25,0,.25,.5,.75],[-3,-2,-1,0,1,2,3]],clustering_mode:[[-1,-.5,-.25,0,.25,.5,.75],[-3,-2,-1,0,1,2,3]],approvals:[[-1,-.5,-.25,0,.25,.5,.75],[-3,-2,-1,0,1,2,3]]};let ge=5,he=[q[q.length-1]],j=3,me=0,ye=["#ff944d;#e60036;#ff884d;#ff003c;#ff944d","#e60036;#ff944d;#cc0030;#ff6600;#e60036","#e60036;#ff944d;#cc0030;#ff6600;#e60036","#ff944d;#e60036;#ff884d;#ff003c;#ff944d"],be=["#ffe112;#ff4d4d;#ffff66;#ff9933;#ffe112","#e67300;#ffe112;#e65c00;#ffff66;#e67300","#e67300;#ffe112;#e65c00;#ffff66;#e67300","#ffe112;#ff4d4d;#ffff66;#ff9933;#ffe112"],Se=["#9affff;#4d4dff;#80ffff;#3366ff;#9affff","#4d4dff;#98e8ed;#3366ff;#80ffff;#4d4dff","#4d4dff;#98e8ed;#3366ff;#80ffff;#4d4dff","#9affff;#4d4dff;#80ffff;#3366ff;#9affff"],ve=["#ffff00;#ff0000;#ffff00;#ff0000;#ffffff;#0000ff;#ffff00","#ff0000;#ffff00;#0000ff;#ffff00;#ff0000;#ffffff;#ff0000","#ff0000;#ffff00;#0000ff;#ffff00;#ff0000;#ffffff;#ff0000","#ffff00;#ff0000;#ffff00;#ff0000;#ffffff;#0000ff;#ffff00"];var Ae,we,Le,Ne,l=Ze("layer_paths"),t=l.slice(0,8),qe=l.slice(8,16),ke=l.slice(16,24);console.log("Selected layer paths:",t),console.log("Selected hodl layer paths:",qe),console.log("Selected contract milestone layer paths:",ke);let M=[{id:"lp0",type:"plate",paths:i(t[0]),paths_group_name:t[0],color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.7,1],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:q,clustering_density:[0,0],gradient_coordinates:[0,0,100,0]},{id:"lc0",type:"cluster",paths:i(t[1]),paths_group_name:t[1],color_duration:[30,60],coordinates:[[-30,30],[-10,10]],scale:[.06,.1],number_of_visible_shapes:17,change_positions_chance:.5,color_combinations_list:q,clustering_density:[7,9],gradient_coordinates:[0,0,100,0]},{id:"lp1",type:"plate",paths:i(t[2]),paths_group_name:t[2],color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.6,1],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:q,clustering_density:[0,0],gradient_coordinates:[0,0,100,0]},{id:"lc1",type:"cluster",paths:i(t[3]),paths_group_name:t[3],color_duration:[30,60],coordinates:[[-10,10],[-30,30]],scale:[.06,.1],number_of_visible_shapes:17,change_positions_chance:.5,color_combinations_list:q,clustering_density:[7,9],gradient_coordinates:[0,0,100,0]},{id:"lp2",type:"plate",paths:i(t[4]),paths_group_name:t[4],color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.5,.9],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:q,clustering_density:[0,0],gradient_coordinates:[0,0,100,0]},{id:"lc2",type:"cluster",paths:i(t[5]),paths_group_name:t[5],color_duration:[30,60],coordinates:[[-10,80],[-10,30]],scale:[.06,.1],number_of_visible_shapes:17,change_positions_chance:.5,color_combinations_list:q,clustering_density:[7,9],gradient_coordinates:[0,0,100,0]},{id:"lp3",type:"plate",paths:i(t[6]),paths_group_name:t[6],color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.4,.9],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:q,clustering_density:[0,0],gradient_coordinates:[0,0,100,0]},{id:"lc3",type:"cluster",paths:i(t[7]),paths_group_name:t[7],color_duration:[30,60],coordinates:[[-30,10],[-30,50]],scale:[.06,.1],number_of_visible_shapes:17,change_positions_chance:.5,color_combinations_list:q,clustering_density:[7,9],gradient_coordinates:[0,0,100,0]}],v=[{id:"s_lp0",type:"plate",paths:i("L - send"),paths_group_name:"L - send",color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.5,1],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:[y.special_sends],clustering_density:[0,0],gradient_coordinates:[0,0,100,0],classes:["special","send","special_no_add"]},{id:"s_lp1",type:"plate",paths:i("L - sale"),paths_group_name:"L - sale",color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.7,1],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:[y.special_sales],clustering_density:[0,0],gradient_coordinates:[0,0,100,0],classes:["special","sale","special_no_add"]},{id:"s_lp2",type:"plate",paths:i("L - approval"),paths_group_name:"L - approval",color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.45,.75],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:[y.special_approval],clustering_density:[0,0],gradient_coordinates:[0,0,100,0],classes:["special","approval","special_no_add"]},{id:"s_lp3",type:"plate",paths:i("L - flip"),paths_group_name:"L - flip",color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.6,1],number_of_visible_shapes:2,change_positions_chance:.5,color_combinations_list:q,clustering_density:[0,0],gradient_coordinates:[0,0,100,0],classes:["special","flip","special_no_add"]}];for(let e=0;e<7;e++){var xe=qe[e];v.push({id:"hodl_lp_"+e,type:"plate",paths:i(xe),paths_group_name:xe,color_duration:[30,60],coordinates:[[0,20],[0,30]],scale:[.5,.8],number_of_visible_shapes:1,change_positions_chance:.5,color_combinations_list:q,clustering_density:[0,0],gradient_coordinates:[0,0,100,0],classes:["special","hodl","time_hodld_"+e]})}for(let e=0;e<7;e++)selected_path=ke[e],v.push({id:"milestone_lc_"+e,type:"cluster",paths:i(selected_path),paths_group_name:selected_path,color_duration:[30,60],coordinates:[[-10,10],[-30,30]],scale:[.06,.1],number_of_visible_shapes:10,change_positions_chance:.5,color_combinations_list:q,clustering_density:[7,9],gradient_coordinates:[0,0,100,0],classes:["special","contract_milestones","milestone_"+e]});let Ce={4:{0:{1:2,2:2,3:2,4:2,5:0,6:0,7:0,8:0,9:0,10:0},1:{1:2,2:3,3:2,4:3,5:0,6:0,7:0,8:0,9:0,10:0},2:{1:3,2:3,3:3,4:3,5:0,6:0,7:0,8:0,9:0,10:0},3:{1:3,2:3,3:4,4:4,5:0,6:0,7:0,8:0,9:0,10:0},"-3":{1:1,2:0,3:0,4:1,5:0,6:0,7:0,8:0,9:0,10:0},"-2":{1:0,2:1,3:1,4:1,5:0,6:0,7:0,8:0,9:0,10:0},"-1":{1:2,2:1,3:2,4:1,5:0,6:0,7:0,8:0,9:0,10:0}},5:{0:{1:2,2:2,3:2,4:2,5:1,6:0,7:0,8:0,9:0,10:0},1:{1:2,2:3,3:2,4:3,5:2,6:0,7:0,8:0,9:0,10:0},2:{1:3,2:3,3:3,4:3,5:2,6:0,7:0,8:0,9:0,10:0},3:{1:3,2:3,3:4,4:4,5:3,6:0,7:0,8:0,9:0,10:0},"-3":{1:1,2:0,3:0,4:1,5:1,6:0,7:0,8:0,9:0,10:0},"-2":{1:0,2:1,3:1,4:1,5:1,6:0,7:0,8:0,9:0,10:0},"-1":{1:2,2:1,3:2,4:1,5:1,6:0,7:0,8:0,9:0,10:0}},6:{0:{1:2,2:2,3:2,4:2,5:1,6:1,7:0,8:0,9:0,10:0},1:{1:2,2:3,3:2,4:3,5:2,6:1,7:0,8:0,9:0,10:0},2:{1:3,2:3,3:3,4:3,5:2,6:2,7:0,8:0,9:0,10:0},3:{1:3,2:3,3:4,4:4,5:3,6:2,7:0,8:0,9:0,10:0},"-3":{1:1,2:0,3:0,4:1,5:0,6:1,7:0,8:0,9:0,10:0},"-2":{1:0,2:1,3:1,4:1,5:1,6:0,7:0,8:0,9:0,10:0},"-1":{1:2,2:1,3:2,4:1,5:1,6:1,7:0,8:0,9:0,10:0}},7:{0:{1:2,2:2,3:2,4:2,5:1,6:1,7:2,8:0,9:0,10:0},1:{1:2,2:3,3:2,4:3,5:2,6:1,7:2,8:0,9:0,10:0},2:{1:3,2:3,3:3,4:3,5:2,6:2,7:3,8:0,9:0,10:0},3:{1:3,2:3,3:4,4:4,5:3,6:2,7:3,8:0,9:0,10:0},"-3":{1:1,2:0,3:0,4:1,5:1,6:1,7:0,8:0,9:0,10:0},"-2":{1:0,2:1,3:1,4:1,5:1,6:0,7:1,8:0,9:0,10:0},"-1":{1:2,2:1,3:2,4:1,5:1,6:1,7:2,8:0,9:0,10:0}},8:{0:{1:2,2:2,3:2,4:2,5:1,6:1,7:2,8:1,9:0,10:0},1:{1:2,2:3,3:2,4:3,5:2,6:1,7:2,8:2,9:0,10:0},2:{1:3,2:3,3:3,4:3,5:2,6:2,7:3,8:2,9:0,10:0},3:{1:3,2:3,3:4,4:4,5:3,6:2,7:3,8:2,9:0,10:0},"-3":{1:1,2:0,3:0,4:1,5:1,6:1,7:0,8:1,9:0,10:0},"-2":{1:0,2:1,3:1,4:1,5:1,6:0,7:1,8:1,9:0,10:0},"-1":{1:2,2:1,3:2,4:1,5:1,6:1,7:2,8:1,9:0,10:0}},9:{0:{1:2,2:2,3:2,4:2,5:1,6:1,7:2,8:1,9:1,10:0},1:{1:2,2:3,3:2,4:3,5:2,6:1,7:2,8:2,9:2,10:0},2:{1:3,2:3,3:3,4:3,5:2,6:2,7:3,8:2,9:2,10:0},4:{1:3,2:3,3:4,4:4,5:3,6:2,7:3,8:2,9:3,10:0},"-3":{1:1,2:0,3:0,4:1,5:1,6:1,7:0,8:1,9:1,10:0},"-2":{1:0,2:1,3:1,4:1,5:1,6:0,7:1,8:1,9:1,10:0},"-1":{1:2,2:1,3:2,4:1,5:1,6:1,7:2,8:1,9:1,10:0}},10:{0:{1:2,2:2,3:2,4:2,5:1,6:1,7:2,8:2,9:1,10:1},1:{1:2,2:3,3:2,4:3,5:2,6:2,7:2,8:3,9:2,10:2},2:{1:3,2:3,3:3,4:3,5:2,6:2,7:3,8:2,9:3,10:3},3:{1:4,2:3,3:4,4:4,5:3,6:2,7:3,8:2,9:4,10:3},"-3":{1:1,2:0,3:0,4:1,5:1,6:1,7:0,8:1,9:1,10:0},"-2":{1:0,2:1,3:1,4:1,5:1,6:0,7:1,8:1,9:1,10:1},"-1":{1:2,2:1,3:2,4:1,5:1,6:1,7:2,8:1,9:1,10:1}}};for(Ae of v)Ae.paths_unlocked=!1;for(we of M)we.paths_unlocked=!1;for(Le of M)if("plate"==Le.type){if(--j<0)break;Le.paths_unlocked=!0}for(Ne of M)Ne.classes=[];M.filter(e=>"plate"==e.type).length;let Me=!0;(new Date).getTime();var l=W(Object.keys(paths),!1),Te=l.filter(e=>"L "==e.slice(0,2)),$e=l.filter(e=>"S "==e.slice(0,2)),Ee=l.filter(e=>"LS"==e.slice(0,2)),o=[];for(let e=0;e<5;e++)for(var je of Te.concat(Ee))for(layer_name of paths[je][0].split(","))if(layer_name=="plate layer "+(e+1))try{o[e].push(je)}catch{o.push([]),o[e].push(je)}var r=[];for(let e=0;e<5;e++)for(var Oe of $e.concat(Ee))for(layer_name of paths[Oe][0].split(","))if(layer_name=="cluster layer "+(e+1))try{r[e].push(Oe)}catch{r.push([]),r[e].push(Oe)}for(let e=0;e<4;e++)o[e]=o[e].map(e=>({value:e,sort:Ge()})).sort((e,t)=>e.sort-t.sort).map(({value:e})=>e),r[e]=r[e].map(e=>({value:e,sort:Ge()})).sort((e,t)=>e.sort-t.sort).map(({value:e})=>e);var De,a,n,t=C.neutral[We()%C.neutral.length];let T=[t,t];console.log("Clustering mode:",t),l=document.querySelector("#main-svg"),(t=document.createElementNS(N,"defs")).setAttributeNS(null,"id","defs"),l.appendChild(t);{let e=document.querySelector("#main-svg"),t=G(re),l=W(G(he).colors),o=e.querySelector("#defs"),r=Je([0,0,100,0],"gradient_bg"),a=H(0,"#000000"),n=H(1,"#000000"),i=I(l[0],t),s=I(l[1],t),c=(a.appendChild(i),n.appendChild(s),r.appendChild(a),r.appendChild(n),o.appendChild(r),r=Je([0,0,100,0],"gradient_bg_mirror"),a=H(0,"#000000"),n=H(1,"#000000"),i=I(l[1],t),s=I(l[0],t),a.appendChild(i),n.appendChild(s),r.appendChild(a),r.appendChild(n),o.appendChild(r),document.createElementNS(N,"svg")),f=(c.classList.add("background"),c.setAttributeNS(null,"width","100%"),c.setAttributeNS(null,"height","100%"),c.setAttributeNS(null,"x",0),c.setAttributeNS(null,"y",0),document.createElementNS(N,"rect"));f.setAttributeNS(null,"width","100%"),f.setAttributeNS(null,"height","100%"),f.setAttributeNS(null,"x",0),f.setAttributeNS(null,"y",0),f.setAttributeNS(null,"fill","url(#gradient_bg)"),f.setAttributeNS(null,"id","background"),c.appendChild(f),e.appendChild(c)}!function(t=-1,l="bottom"){var o=document.querySelector("#main-svg"),r=o.querySelector("#defs"),a=W(Array.from(q)),n=[];for(let e=0;e<M.length;e++)if(!(-1!=t&e!=t)){var i,s=M[e],c=("cluster"==s.type&&(c=M[e-1],B(),c.current_x,c.current_scale,J(s.coordinates[0][0],s.coordinates[0][1]),c.current_y,c.current_scale,J(s.coordinates[1][0],s.coordinates[1][1])),a[e%a.length].colors),f=(n.includes(JSON.stringify(c))&&console.log("Duplicate color"),n.push(JSON.stringify(c)),console.log("Using color",c,"for layer",e),`g-${s.id}-`+s.type),u=J(s.color_duration[0],s.color_duration[1]),d=(s.current_scale=J(s.scale[0],s.scale[1],.01),Je(s.gradient_coordinates,f)),p=(d.setAttributeNS(null,"class",`gradient ${s.type} `+s.id),H(0,c[0][0])),_=H(1,c[1][0]),g=I(c[0],u),u=I(c[1],u),h=(p.appendChild(g),_.appendChild(u),d.appendChild(p),d.appendChild(_),r.appendChild(d),document.createElementNS(N,"g")),m=(h.setAttributeNS(null,"id",`g-${s.id}-${s.type}-`+e),h.setAttributeNS(null,"class",`layer group ${s.type} `+s.id),"cluster"==s.type&&(i=Ue(G(T),s.number_of_visible_shapes,J(s.clustering_density[0],s.clustering_density[1]),.5,[3,6],s.clustering_density)),W(Array.from(s.paths),s.paths_unlocked));for(let t=0;t<s.number_of_visible_shapes;t++){var y,b,S=`p-${s.id}-${s.type}-`+t,v=`s-${s.id}-${s.type}-`+t;let e=1;"plate"==s.type?(y=z(s.coordinates[0][0],s.coordinates[0][1])/s.current_scale,b=z(s.coordinates[1][0],s.coordinates[1][1])/s.current_scale,s.current_x=y,s.current_y=b,s.current_path=m[t%m.length]):(y=i[t][0],b=i[t][1],s.current_x=y,s.current_y=b,s.current_path=m[t%m.length],x.length&&(e=J(x[0],x[1],.01)));var A,w=document.createElementNS(N,"path"),L=(w.setAttributeNS(null,"transform",`scale(${s.current_scale*e}, ${s.current_scale*e})`),w.setAttributeNS(null,"d",s.current_path),w.setAttributeNS(null,"fill",`url(#${f})`),w.setAttributeNS(null,"id",S),w.setAttributeNS(null,"class",`layer path ${s.type} `+s.id),document.createElementNS(N,"svg"));L.setAttributeNS(null,"x",y+"%"),L.setAttributeNS(null,"y",b+"%"),L.setAttributeNS(null,"transform-origin","center"),L.setAttributeNS(null,"id",v),L.setAttributeNS(null,"class",`layer svg ${s.type} `+s.id);for(A of s.classes)L.classList.add(A),h.classList.add(A);L.appendChild(w),h.appendChild(L)}if(h.setAttribute("initial_number_of_shapes",s.number_of_visible_shapes),-1!=t)return h.animate([{opacity:"0"},{opacity:"1"}],{duration:se,iterations:1,fill:"forwards"}),"top"==l?(g=document.querySelectorAll(".group.plate"))[g.length-1].after(h):document.querySelector(".group.plate").before(h);o.appendChild(h)}}(),l=document.querySelector("#main-svg"),t=l.querySelector("#defs"),(De=document.createElementNS(N,"mask")).setAttributeNS(null,"id","bg_border_clip_path"),(a=document.createElementNS(N,"rect")).setAttributeNS(null,"width","101%"),a.setAttributeNS(null,"height","101%"),a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y","0"),a.setAttributeNS(null,"fill","white"),(n=document.createElementNS(N,"rect")).setAttributeNS(null,"width","94%"),n.setAttributeNS(null,"height","95.3%"),n.setAttributeNS(null,"x","3%"),n.setAttributeNS(null,"y","2.5%"),n.setAttributeNS(null,"fill","black"),De.appendChild(a),De.appendChild(n),t.appendChild(De),(a=document.createElementNS(N,"rect")).setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y","0"),a.setAttributeNS(null,"fill","url(#gradient_bg_mirror)"),a.setAttributeNS(null,"mask","url(#bg_border_clip_path)"),a.setAttributeNS(null,"class","frame"),l.appendChild(a);setTimeout(async function e(o,r=!1,a=10){let t=W(Array.from(M).concat(v));for(var n of t)if("cluster"==n.type){let e=k.querySelector(".group."+n.id);if(null!=e){let l=e.querySelectorAll("svg");var i=Ue(G(T),l.length,J(n.clustering_density[0],n.clustering_density[1]),.5,[3,6],n.clustering_density);for(let t=0;t<l.length;t++)if(B()>1-n.change_positions_chance&&!l[t].classList.contains("animating")&&!l[t].classList.contains("removing")){l[t].classList.add("animating");var s=i[t][0],c=i[t][1];s<0&&(s+=z(1,10)),0<s&&(s-=z(1,10)),c<0&&(c+=z(1,10)),0<c&&(c-=z(1,10)),n.current_x=s,n.current_y=c,r&&(n.current_path=G(n.paths));let e=e=>{e[0].classList.contains("removing")?e[0].remove():(e[0].setAttributeNS(null,"x",e[1]+"%"),e[0].setAttributeNS(null,"y",e[2]+"%"),e[4]&&e[0].querySelector("path").setAttributeNS(null,"d",e[3]))};0==a?_([l[t]],o,e,[l[t],s,c,n.current_path,r]):setTimeout(_,1e3*z(0,a),[l[t]],o,e,[l[t],s,c,n.current_path,r])}}}0;setTimeout(e,5e3,5,r,a)},5e3,5,!0,5),setTimeout(async function e(o,r=!1,a=10){864e5<(new Date).getTime()-ae&&(ae=(new Date).getTime(),console.log("Reducing plate_shapes_update_time, current",u),--u,u=Math.max(u,5),ne=u,console.log("New",u));let n=!1;let i=Array.from(M).concat(v);let t=W(Array.from(M).concat(v));for(var s of t){if("plate"==s.type){let e=k.querySelector(".group."+s.id);if(null==e)continue;let l=e.querySelectorAll("svg");for(let t=0;t<l.length;t++){if(B()>1-s.change_positions_chance&&!l[t].classList.contains("animating")&&!l[t].classList.contains("removing")){if(l[t].classList.add("animating"),0<j&&me<j)for(let e=0;e<i.length;e++)if(e<Math.min(j,10)-me){me++,r=!0;break}Math.abs(s.current_x-c)<10&&(c=s.current_x+J(-20,20)),Math.abs(s.current_y-f)<10&&(f=s.current_y+J(-20,20));var c=J(s.coordinates[0][0],s.coordinates[0][1])/s.current_scale,f=J(s.coordinates[1][0],s.coordinates[1][1])/s.current_scale;s.current_x=c,s.current_y=f,r&&(s.current_path=G(s.paths));let e=e=>{e[0].classList.contains("removing")?e[0].remove():(e[0].setAttributeNS(null,"x",e[1]+"%"),e[0].setAttributeNS(null,"y",e[2]+"%"),e[4]&&e[0].querySelector("path").setAttributeNS(null,"d",e[3]))};0==a?_([l[t]],o,e,[l[t],c,f,s.current_path,r]):setTimeout(_,1e3*z(0,a),[l[t]],o,e,[l[t],c,f,s.current_path,r]),n=!0;break}if(n)break}if(n)break}if(n)break}0;setTimeout(e,1e3*u,ne,r,a)},5e3,ne,!0,5);var Pe=!1;!async function e(){try{if(f)return void console.log("Another update is in progress");f=!0;let e=await et();await tt(...e)}catch(e){console.log(e)}f=!1;Pe||(setInterval(e,1e4),Pe=!0)}();let Re=(e,t)=>{var l;return 0!=t&&(l=t<0?-1:1,t=Math.abs(t),0<=e&&--t,1<=e&&(t-=2),2<=e&&(t-=3),-0==(t=Math.max(0,t)*l))?0:t};async function O(e,t){if("send"==e){if(0<document.querySelectorAll(".sale").length&&(P("sale"),await D("special_frame_sale","special_background_sale")),0<document.querySelectorAll(".approval").length&&(P("approval"),await D("special_frame_approval","special_background_approval")),0<document.querySelectorAll(".send").length)return console.log("Send layer already exists"),void R(1,5,20,!0);0<document.querySelectorAll(".special_frame_contract_milestone").length&&await D("special_frame_contract_milestone","special_background_contract_milestone"),F("send"),He("cluster",1,2e4),await Fe(ye,"special_frame_send","special_background_send"),R(1,5,20,!0)}if("stop_send"==e&&(0<document.querySelectorAll(".send").length&&P("send"),0<document.querySelectorAll(".special_frame_send").length||0<document.querySelectorAll(".special_background_send").length)&&await D("special_frame_send","special_background_send"),"sale"==e){if(0<document.querySelectorAll(".send").length&&(P("send"),await D("special_frame_send","special_background_send")),0<document.querySelectorAll(".approval").length&&(P("approval"),await D("special_frame_approval","special_background_approval")),0<document.querySelectorAll(".sale").length)return console.log("Sale layer already exists"),void await ze(5,"plate",20,!0,!0);0<document.querySelectorAll(".special_frame_contract_milestone").length&&await D("special_frame_contract_milestone","special_background_contract_milestone"),F("sale"),ze(5,"plate",20,!0,!0),await Fe(be,"special_frame_sale","special_background_sale"),R(1,5,20,!0),He("cluster",1,2e4)}if("stop_sale"==e&&(0<document.querySelectorAll(".sale").length&&P("sale"),0<document.querySelectorAll(".special_frame_sale").length||0<document.querySelectorAll(".special_background_sale").length)&&await D("special_frame_sale","special_background_sale"),"approval"==e){if(0<document.querySelectorAll(".send").length&&(P("send"),await D("special_frame_send","special_background_send")),0<document.querySelectorAll(".sale").length&&(P("sale"),await D("special_frame_sale","special_background_sale")),0<document.querySelectorAll(".approval").length)return console.log("Approval layer already exists"),void await R(1,5,20,!0);0<document.querySelectorAll(".special_frame_contract_milestone").length&&await D("special_frame_contract_milestone","special_background_contract_milestone"),F("approval"),await Fe(Se,"special_frame_approval","special_background_approval"),R(1,5,20,!0)}var l;if("stop_approval"==e&&(0<document.querySelectorAll(".approval").length&&P("approval"),0<document.querySelectorAll(".special_frame_approval").length||0<document.querySelectorAll(".special_background_approval").length)&&await D("special_frame_approval","special_background_approval"),"high_holder_distribution"==e&&(l=k.querySelectorAll("*"))[l.length-1].classList.contains("frame")&&(A=(l=document.querySelector(".frame")).cloneNode(!0),document.querySelector("g.group").before(A),l.animate({opacity:"0"},{duration:5e3,iterations:1,fill:"forwards"}),setTimeout(e=>e.remove(),5e3,l),await new Promise(e=>setTimeout(e,5e3))),"low_holder_distribution"!=e||(A=k.querySelectorAll("*"))[A.length-1].classList.contains("frame")||(A=(l=document.querySelector(".frame")).cloneNode(!0),(w=document.querySelectorAll("g.group"))[w.length-1].after(A),A.animate([{opacity:"0"},{opacity:"1"}],{duration:5e3,iterations:1,fill:"forwards"}),setTimeout(e=>e.remove(),5e3,l),await new Promise(e=>setTimeout(e,5e3))),"contract_milestone"==e){var o=document.querySelectorAll("g.contract_milestones").length,r=t+1-o;if(0<r){if(0<document.querySelectorAll(".send").length)return void console.log("Send layer active, delaying contract milestone");if(0<document.querySelectorAll(".sale").length)return void console.log("Sale layer active, delaying contract milestone");if(0<document.querySelectorAll(".approval").length)return void console.log("Approval layer active, delaying contract milestone")}for(let e=o;e<o+r;e++)console.log("Adding contract milestone milestone_"+e),F("milestone_"+e);if(Qe(document.querySelector(".special_frame_contract_milestone")))return void console.log("Another party mode currently on");await Fe(ve,"special_frame_contract_milestone","special_background_contract_milestone"),ze(5,"plate",100,!0,!0)}if("stop_contract_milestone"==e&&0<document.querySelectorAll(".special_frame_contract_milestone").length&&await D("special_frame_contract_milestone","special_background_contract_milestone"),"contract_milestone_no_celebration"==e){var a=document.querySelectorAll("g.contract_milestones").length,n=t+1-a;for(let e=a;e<a+n;e++)console.log("Adding contract milestone milestone_"+e),F("milestone_"+e)}if("time_hodld"==e){var i=document.querySelectorAll("g.hodl"),s=t-i.length;if(0<s)for(let e=0;e<Math.abs(s);e++)console.log("Adding hodl layer"),F("time_hodld_"+e);else if(s<0)for(let e=0;e<Math.abs(s);e++)console.log("Removing hodl layer",i[e].id),!function(e){var t=e.animate([{opacity:0}],{duration:5e3,iterations:1,fill:"forwards"});t.onfinish=()=>{e.remove()}}(i[e])}if("wallet_holds_multiple"==e&&(console.log("Setting number_of_unlocked_layers_on_startup to",t-1),j=t-1),"flipped_x_times"==e&&null==document.querySelector(".flip")&&F("flip"),"hodld_after_flipped_x_times"==e&&P("flip"),"tier_royalty"==e){var c=t,f=document.querySelectorAll("g.plate:not(.special_no_add)"),u=f.length;let l=0,o=0;var d=document.querySelectorAll("path.plate:not(.special_no_add)").length;console.log("number plate layers:",u,"tier:",c);for(let t=0;t<f.length;t++){var p=f[t],_=p.querySelectorAll(".svg").length;parseInt(p.getAttribute("initial_number_of_shapes"));let e=Ce[u][c][t+1]-_;console.log("layer:",t+1,"number_of_shapes:",_,"number_of_shapes_to_add_or_remove:",e),e<0?(e=Math.abs(e),d-l-e<ce&&(e=d-l-ce),Ie(p,e=Math.min(e,_),"plate"),l+=e):0<e&&(e=Math.abs(e),Be(p,e=d+o+e>fe?fe-(d+o):e,"plate"),o+=e)}}if("tier_contract_activity"==e){var g=t,h=document.querySelectorAll("g.cluster:not(.special_no_add)"),m=h.length;let l=0,o=0;var y=document.querySelectorAll("path.cluster:not(.special_no_add)").length;console.log("number cluster layers:",m,"tier:",g);for(let t=0;t<m;t++){var b=h[t],S=b.querySelectorAll(".svg").length,v=S-parseInt(b.getAttribute("initial_number_of_shapes"));let e=g*ge-v;console.log("layer:",t+1,"number_of_shapes:",S,"number_of_shapes_to_add_or_remove:",e),e<0?(e=Math.abs(e),y-l-e<ue&&(e=y-l-ue),Ie(b,e=Math.min(e,S),"cluster"),l+=e):0<e&&(e=Math.abs(e),Be(b,e=y+o+e>de?de-(y+o):e,"cluster"),o+=e)}}if("tier_sends"==e){var A,w=t;let e=C.neutral;if(0<w?e=C.increased:w<0&&(e=C.decreased),-1!=e.indexOf(T[0])&&(0==w||e[Math.abs(w)-1]==T[0]))return void console.log("Clustering mode already matches desired one");A=0==w?G(e):e[Math.abs(w)-1],console.log("Setting clustering mode to",A),T=[A,A]}if("tier_approvals"==e){let e=-3==t?1.9:-2==t?1.5:-1==t?1.25:1==t?.75:2==t?.5:3==t?.3:0;var L=e;for(let o of document.querySelectorAll("linearGradient")){var N=o.querySelectorAll(".animation");for(let l=0;l<N.length;l++){let e=N[l].getAttribute("dur"),t=(e=Number.parseFloat(e.slice(0,e.length-1)),parseFloat(N[l].getAttribute("original_duration")));var q=0==L?t:Math.round(t*L);q=Math.max(10,q),e==q?console.log("Gradient speed already matching"):(N[l].old_dur=e,N[l].new_dur=q,N[l].onrepeat=function(){console.log(`Changing gradient speed from ${this.old_dur}s to ${this.new_dur}s (original: ${t}s) of `+o.getAttribute("id")),this.setAttribute("begin",this.getCurrentTime()),this.setAttribute("dur",this.new_dur+"s"),this.onrepeat=void 0})}}await 0}"remove_flip_layer"==e&&P("flip")}async function Fe(e,t,l){try{var o,r,a=document.querySelector(".frame"),n=document.querySelector("#background"),i=a.cloneNode(!0),s=(i.classList.add(t),n.cloneNode(!0)),c=(s.classList.add(l),i.setAttribute("fill","url(#gradient_bg_mirror_read_and_black)"),s.setAttribute("fill","url(#gradient_bg_read_and_black)"),document.querySelector("#gradient_bg_mirror")),f=document.querySelector("#gradient_bg"),u=c.cloneNode(!0),d=f.cloneNode(!0),p=(u.setAttribute("id","gradient_bg_mirror_read_and_black"),d.setAttribute("id","gradient_bg_read_and_black"),Array.from(e));for(o of u.querySelectorAll("stop")){var _=o.querySelector("animate");_.setAttribute("values",p.pop()),_.setAttribute("dur","20s")}for(r of d.querySelectorAll("stop")){var g=r.querySelector("animate");g.setAttribute("values",p.pop()),g.setAttribute("dur","30s")}c.after(u),f.after(d),i.setAttribute("opacity","0"),i.animate([{opacity:"1"}],{duration:5e3,iterations:1,fill:"forwards"}),a.after(i),s.setAttribute("opacity","0"),s.animate([{opacity:"1"}],{duration:5e3,iterations:1,fill:"forwards"}),n.after(s)}catch(e){console.log("add_special_background_and_frame",e)}}async function D(e,t){let l=document.querySelector("."+e);document.querySelector("#gradient_bg_mirror");l.setAttribute("opacity","1");let o=l.animate([{opacity:"0"}],{duration:5e3,iterations:1,fill:"forwards"}),r=(o.onfinish=function(){l.remove()},document.querySelector("."+t));r.setAttribute("opacity","1"),(o=r.animate([{opacity:"0"}],{duration:5e3,iterations:1,fill:"forwards"})).onfinish=function(){r.remove()},await new Promise(e=>setTimeout(e,6e3))}function He(t,l,o){for(let e of M)e.type==t&&(null==e.original_change_positions_chance&&(e.original_change_positions_chance=e.change_positions_chance),e.change_positions_chance=l,setTimeout(()=>{e.change_positions_chance=e=e.original_change_positions_chance},o))}async function Ie(l,e,o){let r=W(l.querySelectorAll("svg"));for(let t=0;t<e;t++){console.log(`Removing ${o} of layer`,l.id);let e=M.filter(e=>e.id==l.id.split("-")[1])[0];null==(e=null==e?v.filter(e=>e.id==l.id.split("-")[1])[0]:e).svg_prototype&&(e.svg_prototype=r[t]),r[t].classList.contains("removing")?console.log("Shape is animating"):r[t].animate([{opacity:"0"}],{duration:5e3,iterations:1,fill:"forwards"}).onfinish=e=>{r[t].remove()},r[t].classList.add("removing")}}async function Be(l,t,o){for(let e=0;e<t;e++)if(console.log("Adding shape to layer",l.id),"cluster"==o){let t=G(l.querySelectorAll(".svg.cluster"));if(null==t){let e=M.filter(e=>e.id==l.id.split("-")[1])[0];null==e&&(e=v.filter(e=>e.id==l.id.split("-")[1])[0]),t=e.svg_prototype}var r=t.cloneNode(!0);try{i=(l.classList.contains("special")?v.filter(e=>l.classList.contains(e.id)):M.filter(e=>l.classList.contains(e.id)))[0],r.querySelector("path").setAttribute("d",G(i.paths))}catch(e){console.log("Adding shapes to plate layer failed",l,e)}var a=Ue(G(T),i.number_of_visible_shapes,J(i.clustering_density[0],i.clustering_density[1]),.5,[3,6],i.clustering_density),a=G(a),n=a[0],a=a[1],n=(r.setAttribute("x",n+"%"),r.setAttribute("y",a+"%"),r.classList.add("animating"),r.animate([{opacity:"0"},{opacity:"1"}],{duration:ie,iterations:1,fill:"forwards"}));l.appendChild(r),n.onfinish=function(){r.classList.remove("animating")}}else if("plate"==o){let t=l.querySelector("svg");if(null==t){let e=M.filter(e=>e.id==l.id.split("-")[1])[0];null==e&&(e=v.filter(e=>e.id==l.id.split("-")[1])[0]),t=e.svg_prototype}let e=t.cloneNode(!0);try{var i;i=(l.classList.contains("special")?v.filter(e=>l.classList.contains(e.id)):M.filter(e=>l.classList.contains(e.id)))[0],e.querySelector("path").setAttribute("d",G(i.paths))}catch(e){console.log("Adding shapes to plate layer failed",l,e)}var a=J(pe[0],pe[1],.1),n=e.querySelector("path"),s=J(i.scale[0],i.scale[1],.1),s=(n.setAttribute("transform",`scale(${s*a}, ${s*a})`),parseFloat(e.getAttribute("x").split("%")[0])+J(-20,20)),c=parseFloat(e.getAttribute("y").split("%")[0])+J(-20,20);s*=_e,c*=_e,e.setAttribute("x",s+"%"),e.setAttribute("y",c+"%"),e.classList.add("animating"),e.classList.add("dynamic_add"),l.appendChild(e),e.animate([{opacity:"0"},{opacity:"1"}],{duration:ie,iterations:1,fill:"forwards"}).onfinish=function(){e.classList.remove("animating")}}}function P(e){var t;for(t of document.querySelectorAll("g."+e)){let e=t.animate([{opacity:1},{opacity:0}],{duration:5e3,iterations:1,fill:"forwards"});e.layer=t,e.onfinish=t=>{M=M.filter(e=>e.id!=t.target.layer.id),e.layer.remove()}}}async function R(t=.5,l=5,o=2,r=!1){console.log("Changing order");var a=document.querySelectorAll(".group.layer"),a=Array.from(a).filter(e=>!e.classList.contains("special")),n=document.querySelector("#main-svg");let i=0;for(let e=2;e<a.length&&!(i>=o);e+=2)B()>1-t&&(_([a[e],a[e+1]],l,e=>{e[0].insertBefore(e[2],e[3]),e[0].insertBefore(e[1],e[2])},[n,a[e],a[e+1],a[0]]),i+=1,r)&&await new Promise(e=>setTimeout(e,1e3*J(3,6)));setTimeout(function(){var l=[],o=document.querySelectorAll(".group.layer");for(let t=0;t<o.length;t++)for(let e=0;e<M.length;e++)if(o[t].getAttribute("class").includes(M[e].id)){l.push(M[e]);break}M=l},2*l*1e3)}async function ze(l=5,t="both",o=4,r=!1,a=!1){console.log("Changing positions and paths");for(let e=0;e<M.length;e++){var n=M[e];if(!("both"!=t&t!=n.type)){var i=k.querySelector(".group."+n.id);if(null==i)n.delete=!0;else{var s,c,f,u=i.querySelectorAll("svg");"cluster"==n.type&&W(s=Ue(G(T),n.number_of_visible_shapes,J(n.clustering_density[0],n.clustering_density[1]),.5,[3,6],n.clustering_density));let t=0;for(let e=0;e<u.length&&!(t>=o);e++)if((!!r||B()>1-n.change_positions_chance)&!u[e].classList.contains("animating")){for(u[e].classList.add("animating"),f="cluster"==n.type?(c=s[e][0],s[e][1]):(c=J(n.coordinates[0][0],n.coordinates[0][1])/n.current_scale,J(n.coordinates[1][0],n.coordinates[1][1])/n.current_scale),Math.abs(n.current_x-c)<10&&(c=n.current_x+J(10,20)),Math.abs(n.current_y-f)<10&&(f=n.current_y+J(10,20)),n.current_x=c,n.current_y=f;;)if(G(n.paths)!=n.current_path){n.current_path=G(n.paths);break}_([u[e]],l,e=>{e[0].setAttributeNS(null,"x",e[1]+"%"),e[0].setAttributeNS(null,"y",e[2]+"%"),e[0].querySelector("path").setAttributeNS(null,"d",e[3])},[u[e],c,f,n.current_path]),a&&await new Promise(e=>setTimeout(e,1e3*z(2,8))),t++}}}}M=M.filter(e=>1!=e.delete)}async function _(t,e,l,o,r=0){t=t.filter(e=>null!=e),0!=r&&await new Promise(e=>setTimeout(e,r));let a={duration:1e3*e,iterations:1,fill:"forwards"};for(let e=0;e<t.length;e++)t[e].animate({opacity:"0"},a);setTimeout(function(){l(o);for(let e=0;e<t.length;e++)t[e].animate({opacity:"1"},a),t[e].classList.remove("animating")},1e3*e)}function F(t,e="top"){var l,o=document.querySelector("#main-svg").querySelector("#defs"),r=G(v.filter(e=>-1!=e.classes.indexOf(t))),a=G(r.color_combinations_list).colors,n=`g-${r.id}-`+r.type,i=J(r.color_duration[0],r.color_duration[1]),s=Je(r.gradient_coordinates,n),c=(r.current_scale=J(r.scale[0],r.scale[1],.01),s.setAttributeNS(null,"class",`gradient ${r.type} `+r.id),H(0,a[0])),f=H(1,a[1]),u=I(a[0],i),a=I(a[1],i),d=(c.appendChild(u),f.appendChild(a),s.appendChild(c),s.appendChild(f),o.appendChild(s),document.createElementNS(N,"g"));d.setAttributeNS(null,"id",`g-${r.id}-`+r.type),d.setAttributeNS(null,"class",`layer group ${r.type} `+r.id),"cluster"==r.type&&(l=Ue(G(T),r.number_of_visible_shapes,J(r.clustering_density[0],r.clustering_density[1]),.5,[3,6],r.clustering_density));for(let t=0;t<r.number_of_visible_shapes;t++){var p,_,g=`p-${r.id}-${r.type}-`+t,h=`s-${r.id}-${r.type}-`+t;let e=1;"plate"==r.type?(p=z(r.coordinates[0][0],r.coordinates[0][1])/r.current_scale,_=z(r.coordinates[1][0],r.coordinates[1][1])/r.current_scale,r.current_x=p,r.current_y=_,r.current_path=G(r.paths,Me)):(p=l[t][0],_=l[t][1],r.current_x=p,r.current_y=_,r.current_path=G(r.paths,Me),x.length&&(e=J(x[0],x[1],.01)));var m,y=document.createElementNS(N,"path"),b=(y.setAttributeNS(null,"transform",`scale(${r.current_scale*e}, ${r.current_scale*e})`),y.setAttributeNS(null,"d",r.current_path),y.setAttributeNS(null,"fill",`url(#${n})`),y.setAttributeNS(null,"id",g),y.setAttributeNS(null,"class",`layer path ${r.type} ${r.id} special`),document.createElementNS(N,"svg"));b.setAttributeNS(null,"x",p+"%"),b.setAttributeNS(null,"y",_+"%"),b.setAttributeNS(null,"transform-origin","center"),b.setAttributeNS(null,"id",h),b.setAttributeNS(null,"class",`layer svg ${r.type} ${r.id} special`);for(m of r.classes)b.classList.add(m),d.classList.add(m);b.appendChild(y),d.appendChild(b)}d.setAttribute("initial_number_of_shapes",r.number_of_visible_shapes),d.animate([{opacity:"0"},{opacity:"1"}],{duration:se,iterations:1,fill:"forwards"}),"top"==e?(i=document.querySelectorAll(".group"))[i.length-1].after(d):document.querySelector(".group").before(d)}function H(e,t){var l=document.createElementNS(N,"stop");return l.setAttributeNS(null,"offset",e),l.setAttributeNS(null,"stop-color",t),l}function I(e,t){var l=document.createElementNS(N,"animate");return l.setAttributeNS(null,"attributeName","stop-color"),l.setAttributeNS(null,"values",e),l.setAttributeNS(null,"dur",t+"s"),l.setAttributeNS(null,"repeatCount","indefinite"),l.setAttributeNS(null,"class","animation"),l.setAttributeNS(null,"original_duration",t),l}function Je(e,t){var l=document.createElementNS(N,"linearGradient");return l.setAttributeNS(null,"id",t),l.setAttributeNS(null,"x1",e[0]+"%"),l.setAttributeNS(null,"x2",e[2]+"%"),l.setAttributeNS(null,"y1",e[1]+"%"),l.setAttributeNS(null,"y2",e[3]+"%"),l}function B(){var e=1e4*Math.sin(g++);return e-Math.floor(e)}function Ge(){return(h+=s)%100/100}function We(){return(h=(1664525*h+s)%89652912)%101}function z(e,t,l=!0){return e=Math.ceil(e),t=Math.floor(t),l?Math.floor(B()*(t+1-e)+e):Math.floor(Ge()*(t+1-e)+e)}function J(e,t,l=1,o=3,r=!0){r=r?B()*(t+l-e)+e:Ge()*(t+l-e)+e;return t=(t=o)||0,Math.floor(r*Math.pow(10,t))/Math.pow(10,t)}function G(e,t=!0){return e[z(0,e.length-1,t)]}function W(e,t=!0){let l=e.length,o;for(;0!=l;)o=t?Math.floor(B()*l):Math.floor(Ge()*l),l--,[e[l],e[o]]=[e[o],e[l]];return e}function Ue(e,t,l=0,o=0,r=[3,8],a=[1,3],n=0,i=[-200,300]){var s,c,f,u,d,p,_,g,h,m,y;if(0==e&&(c=A(45,95,40,10,l+10,t+1),f=A(30,55,40,20,l+20,t+1),u=A(40,0,40,30,l+30,t+1)),1==e&&(c=A(60,0,90,30,l+40,t+1),f=A(20,40,20,40,l+20,t+1),u=A(40,70,100,50,l+30,t+1)),5==e&&(u=A(10,5,5,10,l+10,t+1),c=A(20,10,1,50,l+50,t+1),f=A(30,30,-5,20,l+20,t+1)),3==e&&(u=A(90,0,160,0,l+20,t+1),f=A(50,50,160,0,l+30,t+1),c=A(10,70,160,0,l+40,t+1)),6==e&&(c=A(50,50,10,10,l+30,t+1),f=A(50,20,20,10,l+5,t+1),u=A(50,50,30,10,l+10,t+1)),2==e&&(c=A(0,10,20,10,l+5,t+1),f=A(80,40,10,20,l+10,t+1),u=A(90,30,40,30,l+30,t+1)),4==e){for(s=[],_=t/100,v=0;v<t;v++)d=b=v/_,d+=J(-(p=v|b&d)%10,p%10)+Math.sin(b)*p%30,p+=J(-v%10,v%10),s.push({x:d%110,y:p%110});u=f=c=s}7==e&&(c=A(95,30,-40,13,l+10,2*t),f=A(90,40,-35,20,l+20,t+1),u=A(80,50,-30,30,l+30,t+1)),8==e&&(c=A(60,50,-10,10,l+10,t+1),f=A(70,50,10,20,l+20,t+1),u=A(80,50,20,30,l+30,t+1)),9==e&&(c=A(5,40,.1,2,l+30,t+1),f=A(40,50,.3,2,l+10,t+1),u=A(60,45,.3,2,l+40,t+1)),10==e&&(c=A(3,10,-5,20,l+10,t+1),f=A(10,80,-10,20,l+20,t+1),u=A(80,20,-20,10,l+30,t+1)),11==e&&(c=A(15,10,-5,30,l+40,t+1),f=A(50,80,-10,26,l+30,t+1),u=A(80,40,-10,15,l+20,t+1)),g=[],s=(s=(s=c.filter(e=>0<e.x&e.x<100&0<e.y&e.y<101)).concat(f.filter(e=>0<e.x&e.x<100&0<e.y&e.y<101))).concat(u.filter(e=>0<e.x&e.x<100&0<e.y&e.y<101));for(let e=0;e<t;e++)g.push(G(s));if(0<o)for(h=!1,v=y=m=0;v<g.length;v++)h?(v<y&&(g[v].x=g[m].x+J(-_,_),g[v].y=g[m].y+J(-_,_)),y<v&&(h=!1)):B()>o&&(h=!0,y=(m=v)+z(r),_=J(a[0],a[1]));for(var S=[],v=0;v<g.length;v++)g[v].x<i[0]|g[v].x>i[1]&&(g[v].x=J(0,100,3)),g[v].y<i[0]|g[v].y>i[1]&&(g[v].y=J(0,100,3)),0<n&&B()>1-n&&(g[v].x=J(0,100,3),g[v].y=J(0,100,3)),S.push([g[v].x,g[v].y]);return S}function A(t,l,e,o,r,a){var n=Math.tan(e),i=Math.cos(e)*o,s=Math.sin(e)*o,c=[];for(let e=0;e<a;e++){var f=(B()-.5)*r,u=(B()-.5)*r,f=t+i+f;c.push({x:f,y:l+n*(f-t)+s+u})}return c}function i(e){try{return paths[e].slice(1,paths[e].length-1)}catch{var t=G(Object.keys(paths));return console.log(e,"not found in paths using: ",t),paths[t].slice(1,paths[t].length-1)}}function Ze(e){var l=["LS - range","LS - splash","LS - plane","LS - streetlight","LS - glass","LS - left","LS - right","LS - map","LS - fracture","LS - liquid","LS - mosaic","LS - cumulus","S - recall fragment","LS - pointer","LS - cliff","LS - hill","LS - city","LS - sign","S - ship","LS - plus","S - recall flock","S - bug","LS - honeycomb","L - ice large","LS - path","S - footprint small","LS - planet","LS - logo","LS - multiplier","S - fragment","LS - stratus","S - flock","LS - river","S - candle","L - girder","L - elevation","L - urban","L - plan","L - floor","L - ruin","L - corridor","L - wall ","L - pie chart","L - house","L - pod","L - ceiling","L - window displaced","L - modern","L - blueprint","L - road","L - bell curve","L - beam thick","L - perspective","L - flame","L - window pane","L - window poly","L - window frame","L - frame","L - future","L - body","L - beam medium","L - head","L - rural","L - beam thin","L - ripple","L - brain","L - flame high","L - foothill","L - mnemonic","L - jet","L - mountain","L - rockies","L - fingerprint","L - haze","L - skeleton","L - skyline","L - comic","L - ribbon","L - wave","L - footprint large","S - ice small"],o=[11,34,35,2,37,38,39,40,41,43,14,23,36,3,42],r=[2,4,4,4,4,4,4,4,4,4,6,11,15,15,15],a=[0,7,2,6,5,1,3,4],n=[2,7,10,10,12,14,20,25],i=[0,54,44,45,46,48,5,53,6,7,4,51,52,47,10,50,13,1,49],s=[2,2,4,4,4,4,4,4,4,4,5,5,5,7,7,7,8,10,10],f=[12,8,14,9,15,11,16,13,10],u=[2,4,4,10,10,15,15,18,22],d=[59,8,55,56,57,9,58,60,15,62,63,16,64,66,19,26,22,61,65],p=[2,4,4,4,4,4,4,4,4,4,4,4,4,4,10,10,10,10,10],_=[20,22,18,21,17,24,80,25,19],g=[2,4,5,5,8,10,15,25,26],h=[70,30,67,32,17,71,72,24,77,78,69,73,75,74,27,76,79,68,28],m=[2,2,4,4,4,4,4,4,4,4,5,5,5,6,7,7,7,10,12],y=[30,29,31,32,27,28,26,33],b=[2,10,10,10,12,16,20,20],S=[6,71,5,7,8,67,17,0,59,24,52,9,64,75,78,15,32,45,1,62,70,69,11,49,4,22,16,73,65,27,76,74,61,68,3,10,13,19,26,28,30,58],v=[6,6,7,7,7,7,7,8,8,9,10,10,10,10,10,11,11,12,12,12,12,13,15,15,15,15,15,15,16,16,16,17,18,18,20,20,20,20,20,20,20,25],A=[21,18,14,2,7,0,5,6,8,9,15,17,24,27,32,1,4,11,16,22,3,10,13,19,26,28,30,31,29,33],w=[3,4,5,7,7,8,10,10,10,10,10,10,10,10,10,12,15,15,15,15,20,20,20,20,20,20,20,20,25,27],t=[1,8,16,4,2,3],L=[5,5,5,10,20,50],N=["rhodium","palladium","vegas","platinum","ipanema","malibu","venicebeach","cannes","maldives","dusk","sunset","mist","southbeach","night","ibiza","dawn","goldenhour"],q=[3,4,4,5,5,5,5,5,6,7,7,8,10,12,20,30,40];if("number_of_colors"==e){for(let e=0;e<300;e++)for(let e=0;e<t.length;e++)if(We()>100-L[e])return t[e];return 2}if("layer_paths"==e){var k=[],x=["regular","hodl","milestone"];for(let t=0;t<x.length;t++)for(let e=0;e<8;e++){"regular"==x[t]?0==e?(C=o,M=r):1==e?(C=a,M=n):2==e?(C=i,M=s):3==e?(C=f,M=u):4==e?(C=d,M=p):5==e?(C=_,M=g):6==e?(C=h,M=m):7==e&&(C=y,M=b):"hodl"==x[t]?(C=S,M=v):"milestone"==x[t]&&(C=A,M=w);for(var C,M,T=300;0<T;)for(let e=0;e<M.length;e++){T--;var $=We(),E=l[C[e]];if($>100-M[e]&&!k.includes(E)){T=0;break}}k.push(E)}return k}if("color_names"==e){var j=[];for(let e=0;e<oe;e++){let t=300;for(;0<t;){t--;for(let e=0;e<q.length;e++)if(c=N[e],We()>100-q[e]&&!j.includes(c)){t=0;break}}j.push(c)}return j}}function Ke(t,l,o){if(o<=t[0])return l[0];if(o>=t[t.length-1])return l[l.length-1];for(let e=0;e<l.length-1;e++)if(o>=t[e]&o<t[e+1])return l[e]}function Qe(e){return null!=e&&e==e}function U(e){e=new Date(1e3*e);return e.getFullYear()+`-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)} ${("0"+e.getHours()).slice(-2)}:${("0"+e.getMinutes()).slice(-2)}:`+("0"+e.getSeconds()).slice(-2)}function Xe(e,t,l=!0){e*={years:31536e3,months:2592e3,hours:3600,minutes:60}[t];return l?Math.round(e):e}function Ye(e,t,l){return(t-e)/Xe(1,l,!1)}function Ve(e,t){var l=function(t){let l=0;for(let e=1;e<t.length;e++)l+=Math.abs(t[e]-t[e-1]);return l/(t.length-1)}(t),e=(e-t[t.length-1])/l-1;return null===e||isNaN(e)?0:e}async function et(){try{var n=await fetch(S,{method:"POST",body:JSON.stringify({method:"eth_call",params:[{to:w,data:L},"latest"],id:2,jsonrpc:"2.0"})})}catch{return console.log("Node failed, picking another one."),e=(e=0==e.length?Array.from(X):e).filter(e=>e!=S),void(S=1==e.length?e[0]:G(e.slice(0,-1)))}n=await n.json();if(null==n.error){n=le(ee(n.result),[1,200,1,200,1,400,400,1]);console.log("contract_data:",n),n[0];let e=n[1];n[2];let l=n[3];var i=n[4];let t=te(n[5]),o=te(n[6]);Y=n[7][0];n=le(ee((await(await fetch(S,{method:"POST",body:JSON.stringify({method:"eth_call",params:[{to:w,data:function(e){{if("string"==typeof e)return e=/^0x/i.test(e)?e:"0x"+e;if("number"==typeof e)return"0x"+e.toString(16);throw new Error("Unsupported value type: "+typeof e)}}(Z+function(e){let t=e.toString(16);return 0<(e=64-t.length)&&(e="0".repeat(e),t=e+t),t}(K))},"latest"],id:2,jsonrpc:"2.0"})})).json()).result),[1,200,1,1,1,1]);console.log("token_data:",n),n[0][0];let r=n[1];var s,c,f,u,d,p=n[2][0],_=(n[3][0],n[4][0]),n=n[5][0],g=(new Date).getTime()/1e3;t=t.filter(e=>0!=e[0]),o=o.filter(e=>0!=e[0]),l=l.filter(e=>0!=e),e=e.filter(e=>0!=e),r=r.filter(e=>0!=e),console.log("--------------","Generated data","--------------"),console.log("\nTransfer timestamps");for(s of l)console.log(U(s));console.log("\nApproval timestamps");for(c of e)console.log(U(c));console.log("\nETH Recept");for(f of t)console.log(U(f[0],f[1]));console.log("\nWETH Recept");for(u of o)console.log(U(u[0],u[1]));for(d of r)console.log(U(d));console.log("\nHolder count:",i),console.log("token_mint_timestamp:",p),console.log("wallet_balance:",_),console.log("number_of_hodl_layers:",n),t.sort((e,t)=>e[0]-t[0]),o.sort((e,t)=>e[0]-t[0]);t.map(e=>e[1]),o.map(e=>e[1]);l.sort(),e.sort(),r.sort();let a=t.concat(o);a.sort((e,t)=>e[0]-t[0]),a=a.map(e=>e[1]);var h,m,y=[],b=[];for(h of t){y.push(h[0]);for(let e=r.length-1;0<=e;e--)if(r[e]==h[0]){b.push(r[e]);break}}for(m of o)for(let t=l.length-1;0<=t;t--)if(l[t]<m[0]){y.push(l[t]),r.includes(l[t])&&(l.filter(e=>e==l[t]).length<=1?b.push(l[t]):console.log("Two sales match token sale timestamp",l[t],"ignoring token sale"));break}return 0<b.length&&console.log("token_sale_timestamps",b),[g,l,e,y,a,i,r,b,_,p,n]}console.log("Node failed, picking another one."),e=(e=0==e.length?Array.from(X):e).filter(e=>e!=S),S=1==e.length?e[0]:G(e.slice(0,-1))}async function tt(t,e,l,o,r,a,n,i,s,c,f){var u=Xe(3,"months");e=[...new Set(e)],l=[...new Set(l)],o=[...new Set(o)],n=[...new Set(n)],e.sort(),l.sort(),o.sort(),n.sort(),l=null==l?[]:l,o=null==o?[]:o,n=null==n?[]:n,i=null==i?[]:i,r=null==r?[]:r,e=(e=null==e?[]:e).filter(e=>0!=e).slice(-5),l=l.filter(e=>0!=e).slice(-5),o=o.filter(e=>0!=e).slice(-5),n=n.filter(e=>0!=e).slice(-5),i=i.filter(e=>0!=e).slice(-10),r=r.filter(e=>0!=e).slice(-5);let d=Array.from(l),p=Array.from(o),_=Array.from(e),g=Array.from(r);e.length<=1&&(_=[$].concat(e)),n.length<=1&&(n=[$].concat(n)),l.length<=1&&(d=[$].concat(l)),o.length<=1&&(p=[$].concat(o)),r.length<=1&&(g=[5e17*Q].concat(r));var n=Ve(t,1<e.length?e:_),h=Ve(t,1<l.length?l:d),m=Ve(t,1<o.length?o:p);let y=0;1<g.length&&(y=g[g.length-1]/(g.slice(0,-1).reduce((e,t)=>e+t)/(g.length-1))-1);var b=Ve(t,e.concat(d).sort().slice(-5));let S=Ye(o[o.length-1],t,"minutes")<10,v=Ye(e[e.length-1],t,"minutes")<10,A=Ye(l[l.length-1],t,"minutes")<10;var a=.51<=a/Y,w=!a;let L=-1,N=0;for(let e=0;e<V.length;e++){var q=t-V[e];(0<q&&q<86400||0<q&&e==V.length-1)&&(L=e,N=V[e]+1800)}s-=1;let k=i;var x,C,M,T,i=1<(k=i.length<2?[$].concat(i):k).length&&t-k[k.length-1]<u&&k[k.length-1]-k[k.length-2]<u;console.log("_token_sale_timestamps:",k),console.log("flip_condition_1:",1<k.length),console.log("flip_condition_2:",t-k[k.length-1]<u),console.log("flip_condition_3:",k[k.length-1]-k[k.length-2]<u),console.log("--------------","Processed data","--------------"),console.log("\nCurrent timestamp:",U(t)),console.log("\nTransfer timestamps");for(x of e)console.log(U(x));console.log("\nApproval timestamps");for(C of l)console.log(U(C));console.log("\nSale timestamps");for(M of o)console.log(U(M));console.log("\nRoyalty");for(T of r)console.log(T);console.log("--------------","Calculated traits","--------------"),console.log("transactions_delta:",n),console.log("approvals_delta:",h),console.log("sales_delta:",m),console.log("royalty_delta:",y),console.log("contract_activity_delta:",b),console.log("send_triggered:",v),console.log("approval_triggered:",A),console.log("high_holder_distribution_triggered:",a),console.log("low_holder_distribution:",w),console.log("wallet_holds_multiple_layers_unlocked:",s),console.log("number_of_hodl_layers:",f),console.log("contract_milestone_layers:",L),console.log("token_flipped:",i),a&&document.querySelectorAll("g,.frame")[0].classList.contains("layer")&&(console.log("Triggering high_holder_distribution update"),await O("high_holder_distribution")),w&&document.querySelectorAll("g,.frame")[0].classList.contains("layer")&&(console.log("Triggering low_holder_distribution update"),await O("low_holder_distribution")),-1<L&&(console.log("Setting total_transactions_layers to",L),t>N?(await O("contract_milestone_no_celebration",L),await O("stop_contract_milestone")):await O("contract_milestone",L)),s!=j&&(console.log("Setting number_of_unlocked_layers_on_startup to",s),j=s),i?(console.log("Triggering flipped_x_times update"),await O("flipped_x_times")):await O("remove_flip_layer"),f>document.querySelectorAll(".hodl").length&&(console.log("Triggering time_hodld update",f),O("time_hodld",f)),Qe(n)&&(u=Re(m,Ke(E.royalty[0],E.royalty[1],y)),r=Re(n,Ke(E.contract_activity[0],E.contract_activity[1],-1*b)),a=Re(n,Ke(E.clustering_mode[0],E.clustering_mode[1],-1*n)),w=Re(h,Ke(E.approvals[0],E.approvals[1],-1*h)),console.log("Adjusting royalty"),await O("tier_royalty",u),console.log("Adjusting contract activity"),await O("tier_contract_activity",r),console.log("Adjusting clustering mode"),await O("tier_sends",a),console.log("Adjusting approvals"),await O("tier_approvals",w)),S&&v&&(o[o.length-1]<e[e.length-1]?S=!1:v=!1),v&&A&&(l[l.length-1]<e[e.length-1]?A=!1:v=!1),S&&A&&(o[o.length-1]<l[l.length-1]?S=!1:A=!1),S?(console.log("Triggering sale update"),await O("sale")):await O("stop_sale"),v?(console.log("Triggering send update"),await O("send")):await O("stop_send"),A?(console.log("Triggering approval update"),await O("approval")):await O("stop_approval")}window.onkeydown=function(e){71===e.keyCode?(d=document.querySelector("#main-svg")).insertAdjacentHTML("afterend",`<div id="prompt-container" class="prompt-container"><p>Change node URL:</p><input id="prompt" class="prompt" value="${S}"/></div>`):13===e.keyCode&&(p=document.getElementById("prompt"),S=p.value,console.log(S),(pc=document.getElementById("prompt-container")).remove())};